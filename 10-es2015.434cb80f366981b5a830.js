(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{K7bo:function(e,o,t){"use strict";t.r(o),t.d(o,"ShowLastPedidoModule",(function(){return h}));var i=t("ofXK"),r=t("tyNb"),a=t("fXoL");let s=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=a.Gb({type:e,selectors:[["app-main"]],decls:1,vars:0,template:function(e,o){1&e&&a.Nb(0,"router-outlet")},directives:[r.e],styles:[""]}),e})();var d=t("0IaG"),n=t("pjhI"),l=t("+lji"),c=t("e5F3"),p=t("wne+");const b=function(e,o){return{"bg-danger":e,"text-white":o}},u=[{path:"",component:s,data:{titulo:"Pedido"},children:[{path:"",component:(()=>{class e{constructor(e,o,t,i,r,a){this.router=e,this.activatedRoute=o,this.dialog=t,this.crudService=i,this.pedidoComercioService=r,this.utilService=a,this.timepoMax=10,this.timepoMedio=this.timepoMax/2,this.labelMsj="Cargando Datos...",this.isPedidoExpirado=!1}ngOnInit(){this.activatedRoute.queryParams.subscribe(e=>{const o=JSON.parse(atob(e.p.toString()));o.s=o.s.split(".")[1];const t=this.utilService.xTiempoTranscurrido_min(o.h);if(console.log("\xbf_hExpira",t),t>60)return this.isPedidoExpirado=!0,this.labelMsj="El tiempo para ver el pedido expir\xf3.",void setTimeout(()=>{this.router.navigate(["/"])},4e3);this.loadOrden(o)})}loadOrden(e){this.crudService.postFree(e,"comercio","get-last-pedido-url",!1).subscribe(e=>{console.log("pedido",e),(null==e?void 0:e.data.length)>0&&this.darFormatoOrden(e.data)})}darFormatoOrden(e){e.filter(e=>!e.con_formato).map(e=>{e.json_datos_delivery="object"==typeof e.json_datos_delivery?e.json_datos_delivery:JSON.parse(e.json_datos_delivery),e.estadoTitle=this.pedidoComercioService.getEstadoPedido(e.pwa_estado).estadoTitle,e.json_datos_delivery.p_subtotales=this.pedidoComercioService.darFormatoSubTotales(e.json_datos_delivery.p_subtotales,e.json_datos_delivery.p_header.arrDatosDelivery.costoTotalDelivery),e.visible=!0,e.isTieneRepartidor=!!e.idrepartidor,e.isClientePasaRecoger=e.json_datos_delivery.p_header.arrDatosDelivery.pasoRecoger,e.nom_repartidor=e.isClientePasaRecoger?"Cliente Recoge":e.nom_repartidor,e.con_formato=!0,e.flag_pedido_programado=e.flag_pedido_programado?e.flag_pedido_programado:0;const o=e.tiempo?e.tiempo:0;return e.color=o>=this.timepoMax?"r":o>=this.timepoMedio?"a":"v",e.color=1===e.flag_pedido_programado?"p":e.color,e}),this.openDialogOrden(e[0])}openDialogOrden(e){const o=new d.e;o.disableClose=!0,o.hasBackdrop=!0,o.width="700px",o.panelClass=["my-dialog-orden-detalle","my-dialog-scrool"],o.data={laOrden:e,isViewOnlyPedidoUrl:!0},this.dialog.open(n.a,o)}}return e.\u0275fac=function(o){return new(o||e)(a.Mb(r.b),a.Mb(r.a),a.Mb(d.b),a.Mb(l.a),a.Mb(c.a),a.Mb(p.a))},e.\u0275cmp=a.Gb({type:e,selectors:[["app-show-pedido"]],decls:4,vars:5,consts:[[1,"p-5"],[1,"div-center-msj"],[1,"div-label-msj","text-center",3,"ngClass"]],template:function(e,o){1&e&&(a.Sb(0,"div",0),a.Sb(1,"div",1),a.Sb(2,"p",2),a.Dc(3),a.Rb(),a.Rb(),a.Rb()),2&e&&(a.Ab(2),a.jc("ngClass",a.pc(2,b,o.isPedidoExpirado,o.isPedidoExpirado)),a.Ab(1),a.Ec(o.labelMsj))},directives:[i.k],styles:[".div-center-msj[_ngcontent-%COMP%]{height:90vh;margin:0 auto;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-flex-wrap:wrap;flex-wrap:wrap;-webkit-align-content:center;align-content:center;-webkit-box-pack:space-evenly;-webkit-justify-content:space-evenly;justify-content:space-evenly}.div-label-msj[_ngcontent-%COMP%]{background:#d3d3d3;padding:20px;border-radius:5px}"]}),e})(),data:{titulo:"Pedido"}}]}];let m=(()=>{class e{}return e.\u0275mod=a.Kb({type:e}),e.\u0275inj=a.Jb({factory:function(o){return new(o||e)},imports:[[r.d.forChild(u)],r.d]}),e})(),h=(()=>{class e{}return e.\u0275mod=a.Kb({type:e}),e.\u0275inj=a.Jb({factory:function(o){return new(o||e)},imports:[[i.c,m]]}),e})()}}]);
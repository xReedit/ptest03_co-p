function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function _createClass(t,e,i){return e&&_defineProperties(t.prototype,e),i&&_defineProperties(t,i),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{"6qA3":function(t,e,i){"use strict";var o=i("OAkW"),n=i("Z5tI"),r=i("poJ0"),a=i("ozli"),s=i("yRPT"),c=i("90cg"),d=i("GMZp"),l=i("VKeD"),u=i("zfKp");e.subscribeTo=function(t){if(t&&"function"==typeof t[u.observable])return a.subscribeToObservable(t);if(s.isArrayLike(t))return o.subscribeToArray(t);if(c.isPromise(t))return n.subscribeToPromise(t);if(t&&"function"==typeof t[l.iterator])return r.subscribeToIterable(t);var e=d.isObject(t)?"an invalid object":"'"+t+"'";throw new TypeError("You provided "+e+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")}},"90cg":function(t,e,i){"use strict";e.isPromise=function(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}},CGVT:function(t,e,i){"use strict";i.r(e),i.d(e,"ComercioModule",(function(){return Yo}));var o,n=i("ofXK"),r=i("tyNb"),a=i("0IaG"),s=i("+lji"),c=i("zOUh"),d=i("NEqF"),l=i("fXoL"),u=i("Jho9"),p=((o=function(){function t(e,i,o){_classCallCheck(this,t),this.swPush=e,this.crudService=i,this.infoTokenService=o,this.swPush.notificationClicks.subscribe((function(t){window.location.reload()}))}return _createClass(t,[{key:"getIsTienePermiso",value:function(){return"granted"===Notification.permission}},{key:"suscribirse",value:function(){console.log("llego a suscribirse estado this.swPush.isEnabled: ",this.swPush.isEnabled),this.keySuscribtion()}},{key:"keySuscribtion",value:function(){var t=this;this.swPush.requestSubscription({serverPublicKey:d.g}).then((function(e){t.saveSuscripcion(e)})).catch(console.error)}},{key:"saveSuscripcion",value:function(t){this.crudService.postFree({suscripcion:t,idcliente:this.infoTokenService.infoUsToken.idcliente},"comercio","push-suscripcion",!0).subscribe((function(t){return console.log(t)}))}}]),t}()).\u0275fac=function(t){return new(t||o)(l.Wb(u.b),l.Wb(s.a),l.Wb(c.a))},o.\u0275prov=l.Ib({token:o,factory:o.\u0275fac,providedIn:"root"}),o),f=i("kVse"),h=i("bTqV");function b(t,e){1&t&&(l.Qb(0),l.Sb(1,"span",1),l.Dc(2,"Acepte las notificaciones para recibir indicaciones."),l.Rb(),l.Nb(3,"hr"),l.Pb())}var m,g=((m=function(){function t(e,i){_classCallCheck(this,t),this.pushNotificationService=e,this.comercioService=i,this.isOnNotificactionPush=!1,this.importe=""}return _createClass(t,[{key:"ngOnInit",value:function(){this.isOnNotificactionPush=this.pushNotificationService.getIsTienePermiso()}},{key:"listoOnline",value:function(){this.comercioService.guardarEstadoOnline(1)}}]),t}()).\u0275fac=function(t){return new(t||m)(l.Mb(p),l.Mb(f.a))},m.\u0275cmp=l.Gb({type:m,selectors:[["app-dialog-efectivo-repartidor"]],decls:11,vars:1,consts:[[4,"ngIf"],[1,"fw-100"],[1,"text-center"],["mat-flat-button","","color","primary","mat-dialog-close","",3,"click"]],template:function(t,e){1&t&&(l.Sb(0,"div"),l.Sb(1,"p"),l.Dc(2,"Parametros Iniciales: "),l.Rb(),l.Nb(3,"hr"),l.Bc(4,b,4,0,"ng-container",0),l.Sb(5,"span",1),l.Dc(6," Desde este momento estas en linea, listo para recibir pedidos. "),l.Rb(),l.Nb(7,"hr"),l.Sb(8,"div",2),l.Sb(9,"button",3),l.Zb("click",(function(){return e.listoOnline()})),l.Dc(10,"Listo"),l.Rb(),l.Rb(),l.Rb()),2&t&&(l.Ab(4),l.jc("ngIf",!e.isOnNotificactionPush))},directives:[n.m,h.a,a.d],styles:[""]}),m),v=i("yFR0"),y=i("ds6q"),R=i("IW2O"),S=i("XhcP"),_=i("FKr1"),C=i("1jcm");function k(t,e){if(1&t){var i=l.Tb();l.Sb(0,"div",5),l.Sb(1,"i",6),l.Zb("click",(function(){return l.vc(i),l.dc().abrirMenuLateral()})),l.Rb(),l.Sb(2,"span",7),l.Dc(3),l.ec(4,"titlecase"),l.ec(5,"titlecase"),l.Rb(),l.Rb()}if(2&t){var o=l.dc();l.Ab(3),l.Gc(" ",l.fc(4,2,o.dataSede.sedenombre)," | ",l.fc(5,4,o.dataSede.ciudad)," ")}}var P,w,D,I,A,O,x,T,E=((P=function(){function t(e,i){_classCallCheck(this,t),this.infoTokenService=e,this.comercioService=i,this.changeTogle=new l.o(!1),this.openMenuLateral=new l.o(!1),this.isTogleActive=!0}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;setTimeout((function(){t.dataSede=t.comercioService.getSedeInfo(),t.infoTokenService.infoUsToken.isOnline=!0}),1500)}},{key:"repartidorOnLine",value:function(t){this.isTogleActive=t.checked,this.infoTokenService.setisOnline(this.isTogleActive),this.changeTogle.emit(this.isTogleActive)}},{key:"abrirMenuLateral",value:function(){this.openMenuLateral.emit(!0)}}]),t}()).\u0275fac=function(t){return new(t||P)(l.Mb(c.a),l.Mb(f.a))},P.\u0275cmp=l.Gb({type:P,selectors:[["app-tool-bar-repartidor"]],outputs:{changeTogle:"changeTogle",openMenuLateral:"openMenuLateral"},decls:6,vars:2,consts:[[1,"header-app","p-3","d-flex","justify-content-between"],["class","text-truncate",4,"ngIf"],[1,"d-flex","align-items-center"],[1,"fs-12","pr-2"],[3,"checked","change"],[1,"text-truncate"],[1,"fa","fa-bars","pr-2","xCursor",3,"click"],[1,"fs-14","fw-100","text-truncate"]],template:function(t,e){1&t&&(l.Sb(0,"div",0),l.Bc(1,k,6,6,"div",1),l.Sb(2,"div",2),l.Sb(3,"span",3),l.Dc(4,"En Linea"),l.Rb(),l.Sb(5,"mat-slide-toggle",4),l.Zb("change",(function(t){return e.repartidorOnLine(t)})),l.Rb(),l.Rb(),l.Rb()),2&t&&(l.Ab(1),l.jc("ngIf",e.dataSede),l.Ab(4),l.jc("checked",e.isTogleActive))},directives:[n.m,C.a],pipes:[n.u],styles:[""]}),P),j=function(){return["ordenes","lista"]},M=function(){return["ordenes","maps"]},B=function(){return["resumen-dia"]},F=function(){return["repartidores"]},L=((w=function(){function t(e,i,o,n,r,a,s){_classCallCheck(this,t),this.dialog=e,this.socketService=i,this.comercioService=o,this.router=n,this.infoTokenService=r,this.crudService=a,this.pushNotificationService=s,this.destroy$=new y.Subject,this.showPanelLeft=!1}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.socketService.connect(),this.listenDatosSede(),this.comercioService.guardarEstadoOnline(1),this.pushNotificationService.getIsTienePermiso(),setTimeout((function(){t.pushNotificationService.suscribirse()}),1500)}},{key:"ngOnDestroy",value:function(){this.destroy$.next(!0),this.destroy$.unsubscribe()}},{key:"comercioOnLine",value:function(t){if(t){var e=new a.e;e.disableClose=!0,e.hasBackdrop=!0,this.dialog.open(g,e)}else this.comercioService.guardarEstadoOnline(0)}},{key:"listenDatosSede",value:function(){var t=this;this.socketService.onGetDatosSede().pipe(Object(R.takeUntil)(this.destroy$)).subscribe((function(e){t.comercioService.setSedeInfo(e[0].datossede[0]),t.comercioService.loadDatosImpresion(),t.comercioService.loadDatosTipoPago()}))}},{key:"openServidorPrint",value:function(){console.log("aa");var t=btoa(JSON.stringify({o:this.infoTokenService.infoUsToken.usuario.idorg,s:this.infoTokenService.infoUsToken.usuario.idsede}));window.open("http://appx.papaya.com.pe/print-server/print-server.html?o="+t,"Servidor de Impresion")}},{key:"cerrarSession",value:function(){this.comercioService.guardarEstadoOnline(0),this.socketService.closeConnection(),this.router.navigate(["../"])}}]),t}()).\u0275fac=function(t){return new(t||w)(l.Mb(a.b),l.Mb(v.a),l.Mb(f.a),l.Mb(r.b),l.Mb(c.a),l.Mb(s.a),l.Mb(p))},w.\u0275cmp=l.Gb({type:w,selectors:[["app-main"]],decls:42,vars:9,consts:[[1,"example-container"],["mode","over",1,"example-sidenav",3,"opened","closedStart"],["drawerIzq",""],[2,"min-width","250px"],[1,"p-3","border-bottom"],[1,"w-100","text-center"],["src","assets/icons/icon-72x72.png"],[1,"pt-1","fw-600","fs-12","text-secondary","m-0"],[1,"pt-1","fw-100","fs-11","text-secondary","m-0"],[1,"p-3","border-bottom","w-100",3,"click"],[1,"fw-600","fs-13"],[1,"fa","fa-arrow-left","pr-2"],[1,"fs-13"],["matRipple","",1,"border-bottom","p-3","xCursor",3,"routerLink","click"],[1,"fa","fa-paper-plane","pr-2"],[1,"fa","fa-map","pr-2"],[1,"fa","fa-object-group","pr-2"],[1,"fa","fa-motorcycle","pr-2"],["matRipple","",1,"border-bottom","p-3","xCursor",3,"click"],["aria-hidden","true",1,"fa","fa-print","pr-2"],[1,"fa","fa-close","pr-2"],[1,"text-info","fs-11"],[1,"animated","fadeIn"],[3,"changeTogle","openMenuLateral"],[1,"content-body"]],template:function(t,e){if(1&t){var i=l.Tb();l.Sb(0,"mat-drawer-container",0),l.Sb(1,"mat-drawer",1,2),l.Zb("closedStart",(function(){return e.showPanelLeft=!1})),l.Sb(3,"div",3),l.Sb(4,"div",4),l.Sb(5,"div",5),l.Nb(6,"img",6),l.Sb(7,"p",7),l.Dc(8,"Papaya Comercio"),l.Rb(),l.Sb(9,"p",8),l.Dc(10,"papaya.com.pe"),l.Rb(),l.Rb(),l.Rb(),l.Sb(11,"div",9),l.Zb("click",(function(){return l.vc(i),l.tc(2).toggle()})),l.Sb(12,"span",10),l.Nb(13,"i",11),l.Dc(14,"Opciones"),l.Rb(),l.Rb(),l.Sb(15,"div",12),l.Sb(16,"div",13),l.Zb("click",(function(){return l.vc(i),l.tc(2).toggle()})),l.Nb(17,"i",14),l.Dc(18," Pedidos en el panel "),l.Rb(),l.Sb(19,"div",13),l.Zb("click",(function(){return l.vc(i),l.tc(2).toggle()})),l.Nb(20,"i",15),l.Dc(21," Pedidos en el mapa "),l.Rb(),l.Sb(22,"div",13),l.Zb("click",(function(){return l.vc(i),l.tc(2).toggle()})),l.Nb(23,"i",16),l.Dc(24," Resumen del dia. "),l.Rb(),l.Sb(25,"div",13),l.Zb("click",(function(){return l.vc(i),l.tc(2).toggle()})),l.Nb(26,"i",17),l.Dc(27," Repartidores "),l.Rb(),l.Sb(28,"div",18),l.Zb("click",(function(){l.vc(i);var t=l.tc(2);return e.openServidorPrint(),t.toggle()})),l.Nb(29,"i",19),l.Dc(30," Servidor de Impresion "),l.Rb(),l.Sb(31,"div",18),l.Zb("click",(function(){return e.cerrarSession()})),l.Nb(32,"i",20),l.Sb(33,"span"),l.Dc(34," Cerrar Sesion"),l.Rb(),l.Nb(35,"br"),l.Sb(36,"span",21),l.Dc(37,"Al cerrar dejara de recibir pedidos."),l.Rb(),l.Rb(),l.Rb(),l.Rb(),l.Rb(),l.Sb(38,"div",22),l.Sb(39,"app-tool-bar-repartidor",23),l.Zb("changeTogle",(function(t){return e.comercioOnLine(t)}))("openMenuLateral",(function(t){return e.showPanelLeft=t})),l.Rb(),l.Sb(40,"div",24),l.Nb(41,"router-outlet"),l.Rb(),l.Rb(),l.Rb()}2&t&&(l.Ab(1),l.jc("opened",e.showPanelLeft),l.Ab(15),l.jc("routerLink",l.nc(5,j)),l.Ab(3),l.jc("routerLink",l.nc(6,M)),l.Ab(3),l.jc("routerLink",l.nc(7,B)),l.Ab(3),l.jc("routerLink",l.nc(8,F)))},directives:[S.b,S.a,_.i,r.c,E,r.e],styles:[".content-body[_ngcontent-%COMP%]{margin-top:56px;height:-webkit-calc(100vh - 56px);height:calc(100vh - 56px);overflow:auto}"]}),w),N=i("wne+"),z=i("pjhI"),W=i("e5F3"),$=["ngx-masonry",""],Q=["*"],q=((x=function(){function t(e,i){_classCallCheck(this,t),this.platformId=e,this._element=i,this.useImagesLoaded=!1,this.updateLayout=!1,this.layoutComplete=new l.o,this.removeComplete=new l.o}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.useImagesLoaded&&void 0===D&&(D=i("vX6Q")),Object(n.w)(this.platformId)&&void 0===I&&(I=i("hNNL")),this.options||(this.options={}),this.options.itemSelector||(this.options.itemSelector="[ngxMasonryItem], ngxMasonryItem"),Object(n.w)(this.platformId)&&(this._msnry=new I(this._element.nativeElement,this.options),this._msnry.on("layoutComplete",(function(e){t.layoutComplete.emit(e)})),this._msnry.on("removeComplete",(function(e){t.removeComplete.emit(e)})))}},{key:"ngOnChanges",value:function(t){t.updateLayout&&(t.updateLayout.firstChange||this.layout())}},{key:"ngOnDestroy",value:function(){this._msnry&&this._msnry.destroy()}},{key:"layout",value:function(){var t=this;setTimeout((function(){t._msnry.layout()}))}},{key:"reloadItems",value:function(){var t=this;setTimeout((function(){t._msnry.reloadItems()}))}},{key:"add",value:function(t){var e=this,i=!1;0===this._msnry.items.length&&(i=!0),this.useImagesLoaded?(D(t,(function(o){e._element.nativeElement.appendChild(t),e._msnry.appended(t),i&&e.layout()})),this._element.nativeElement.removeChild(t)):(this._msnry.appended(t),i&&this.layout())}},{key:"remove",value:function(t){this._msnry.remove(t),this.layout()}}]),t}()).\u0275fac=function(t){return new(t||x)(l.Mb(l.C),l.Mb(l.l))},x.\u0275cmp=l.Gb({type:x,selectors:[["","ngx-masonry",""],["ngx-masonry"]],inputs:{useImagesLoaded:"useImagesLoaded",updateLayout:"updateLayout",options:"options"},outputs:{layoutComplete:"layoutComplete",removeComplete:"removeComplete"},features:[l.yb],attrs:$,ngContentSelectors:Q,decls:1,vars:0,template:function(t,e){1&t&&(l.ic(),l.hc(0))},styles:["[_nghost-%COMP%] {\n\t\t\tdisplay: block;\n\t\t}"]}),x),H=((O=function(){function t(e,i,o){_classCallCheck(this,t),this._element=e,this._parent=i,this.platformId=o}return _createClass(t,[{key:"ngAfterViewInit",value:function(){Object(n.w)(this.platformId)&&(this._parent.add(this._element.nativeElement),this.watchForHtmlChanges())}},{key:"ngOnDestroy",value:function(){Object(n.w)(this.platformId)&&this._parent.remove(this._element.nativeElement)}},{key:"watchForHtmlChanges",value:function(){if(MutationObserver=window.MutationObserver||window.WebKitMutationObserver,MutationObserver){var t=this;new MutationObserver((function(e,i){t._parent.layout()})).observe(this._element.nativeElement,{subtree:!0,childList:!0})}}}]),t}()).\u0275fac=function(t){return new(t||O)(l.Mb(l.l),l.Mb(Object(l.U)((function(){return q}))),l.Mb(l.C))},O.\u0275dir=l.Hb({type:O,selectors:[["","ngxMasonryItem",""],["ngxMasonryItem"]]}),O),G=((A=function t(){_classCallCheck(this,t)}).\u0275mod=l.Kb({type:A}),A.\u0275inj=l.Jb({factory:function(t){return new(t||A)},imports:[[]]}),A),Z=function t(){_classCallCheck(this,t)},U=function t(){_classCallCheck(this,t),this.secciones=[]},V=function t(){_classCallCheck(this,t),this.items=[]},X=function t(){_classCallCheck(this,t),this.precio_total=0,this.cantidad_seleccionada_x_tpc=0,this.cantidad_descontado=0,this.itemtiposconsumo=[],this.subitems_selected=[],this.subitems_view=[]},J=i("6NNB"),K=i("Q1FS"),Y=((T=function(){function t(e,i){_classCallCheck(this,t),this.crudService=e,this.router=i,this.keyLocal="sys::pr",this.init()}return _createClass(t,[{key:"init",value:function(){this.pedidoRepartidor=this.getLocal()}},{key:"cleanLocal",value:function(){localStorage.removeItem(this.keyLocal),this.pedidoRepartidor=this.getLocal()}},{key:"setPasoVa",value:function(t){this.pedidoRepartidor.paso_va=t,this.setLocal(this.pedidoRepartidor)}},{key:"setCostoSercicio",value:function(t){this.pedidoRepartidor.c_servicio=t,this.setLocal(this.pedidoRepartidor)}},{key:"setImporteTotalPedido",value:function(t){this.pedidoRepartidor.importePedido=t,this.setLocal(this.pedidoRepartidor)}},{key:"setIsHayPropina",value:function(t){this.pedidoRepartidor.isHayPropina=t,this.setLocal(this.pedidoRepartidor)}},{key:"setLocal",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;t=t||this.pedidoRepartidor,localStorage.setItem(this.keyLocal,btoa(JSON.stringify(t)))}},{key:"getLocal",value:function(){var t=localStorage.getItem(this.keyLocal);return t?JSON.parse(atob(t)):new Z}},{key:"asignarPedido",value:function(){var t=this;this.crudService.postFree({idpedido:this.pedidoRepartidor.idpedido},"repartidor","set-asignar-pedido",!0).subscribe((function(e){t.pedidoRepartidor.estado=1,t.setPasoVa(1)}))}},{key:"playAudioNewPedido",value:function(){var t=new Audio;t.src="./assets/audio/Alarm04.wav",t.load(),t.play()}},{key:"darFormatoSubTotales",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.init();var e=(t=t||this.pedidoRepartidor.datosSubtotales)[t.length-1];e.importe=t.filter((function(t){return-2!==t.id&&-3!==t.id&&"TOTAL"!==t.descripcion})).map((function(t){return parseFloat(t.importe)})).reduce((function(t,e){return t+e}),0),this.pedidoRepartidor.importePedido=e.importe;var i=parseFloat(t.filter((function(t){return-2===t.id||-3===t.id})).map((function(t){return parseFloat(t.importe)})).reduce((function(t,e){return t+e}),0));this.pedidoRepartidor.c_servicio=i.toString();var o=!!t.filter((function(t){return-3===t.id}))[0];return this.pedidoRepartidor.isHayPropina=o,this.setLocal(),t.filter((function(t){return-2!==t.id&&-3!==t.id}))}},{key:"darFormatoPedido",value:function(t){var e=new J.a,i=[],o=0;return t.data.map((function(t){var e=i.filter((function(e){return e.idtipo_consumo===t.idtipo_consumo}))[0];e||((e=new U).descripcion=t.des_tp,e.idtipo_consumo=parseInt(t.idtipo_consumo,0),i.push(e))})),i.map((function(e){t.data.filter((function(t){return t.idtipo_consumo===e.idtipo_consumo})).map((function(t,i){var o=e.secciones.filter((function(e){return e.idseccion.toString()===t.idseccion.toString()}))[0];o||((o=new V).idseccion=t.idseccion.toString(),o.des=t.des_seccion,o.sec_orden=t.sec_orden,o.ver_stock_cero=0,e.count_items_seccion=i+1,e.secciones.push(o))}))})),i.map((function(e){e.secciones.map((function(i){t.data.filter((function(t){return t.idtipo_consumo.toString()===e.idtipo_consumo.toString()&&t.idseccion.toString()===i.idseccion.toString()})).map((function(t,e){var n=new X,r=parseFloat(t.precio_default)*parseInt(t.cantidad,0),a=t.precio_default;o+=r,n.des=t.descripcion,n.detalles="",n.iditem=t.iditem,n.idcarta_lista=t.idcarta_lista,n.idseccion=t.idseccion,n.isalmacen=t.isalmacen,n.cantidad_seleccionada=parseInt(t.cantidad,0),n.precio=a,n.precio_print=parseFloat(r.toString()),n.precio_total=parseFloat(r.toString()),n.procede="0"===t.procede?1:0,n.seccion=t.des_seccion,n.img=t.img,n.subitems_view="null"!==t.subitems&&""!==t.subitems&&t.subitems?JSON.parse(t.subitems):[],i.count_items=e+1,i.items=i.items?i.items:[],i.items.push(n)}))}))})),e.tipoconsumo=i,this.reCalcularSubTotal(o),e}},{key:"darFormatoPedidoLocal",value:function(t){var e=0;return t.tipoconsumo.map((function(t){t.secciones.map((function(t){t.items.map((function(t){var i=parseFloat(t.precio_default)*t.cantidad_seleccionada;e+=i,t.precio=t.precio_default,t.precio_print=parseFloat(i.toString()),t.precio_total=parseFloat(i.toString())}))}))})),this.reCalcularSubTotal(e),t}},{key:"reCalcularSubTotal",value:function(t){this.init();var e=this.pedidoRepartidor.datosSubtotales[0];if(t!==parseFloat(e.importe)){var i=parseFloat(e.importe)-t;e.importe=t;var o=this.pedidoRepartidor.datosSubtotales.filter((function(t){return"TOTAL"===t.descripcion}))[0];this.pedidoRepartidor.importePagaCliente=o.importe,o.importe=parseFloat(o.importe)-i,this.setLocal()}}},{key:"verificarEstadoPedido",value:function(t){var e=this;return new K.Observable((function(i){e.crudService.postFree({idpedido:t},"repartidor","get-estado-pedido").subscribe((function(t){e.pedidoRepartidor.estado=t.data[0].pwa_delivery_status,i.next(e.pedidoRepartidor.estado)}))}))}},{key:"finalizarPedido",value:function(){var t=this,e=this.pedidoRepartidor.c_servicio,i=this.pedidoRepartidor.datosDelivery.propina.value,o=parseFloat(e)+parseFloat(i),n=parseFloat(this.pedidoRepartidor.importePagaCliente)-(parseFloat(this.pedidoRepartidor.importePedido)+o),r={idrepartidor:this.pedidoRepartidor.datosRepartidor.idrepartidor,idpedido:this.pedidoRepartidor.idpedido,idcliente:this.pedidoRepartidor.datosCliente.idcliente,idsede:this.pedidoRepartidor.datosComercio.idsede,operacion:{metodoPago:this.pedidoRepartidor.datosDelivery.metodoPago,importeTotalPedido:parseFloat(this.pedidoRepartidor.importePagaCliente),importePagadoRepartidor:this.pedidoRepartidor.importePedido,comisionRepartidor:e,propinaRepartidor:i,costoTotalServicio:o,importeDepositar:parseFloat(n.toFixed()).toFixed(2)}};this.crudService.postFree(r,"repartidor","set-fin-pedido-entregado").subscribe((function(e){t.cleanLocal(),t.router.navigate(["./repartidor/pedidos"])}))}}]),t}()).\u0275fac=function(t){return new(t||T)(l.Wb(s.a),l.Wb(r.b))},T.\u0275prov=l.Ib({token:T,factory:T.\u0275fac,providedIn:"root"}),T),tt=i("eI2u");function et(t,e){if(1&t&&(l.Sb(0,"div",7),l.Sb(1,"div",8),l.Sb(2,"div"),l.Sb(3,"span",9),l.Dc(4),l.ec(5,"number"),l.Rb(),l.Sb(6,"span"),l.Dc(7),l.Rb(),l.Rb(),l.Sb(8,"div"),l.Sb(9,"span",10),l.Dc(10),l.ec(11,"number"),l.Rb(),l.Rb(),l.Rb(),l.Rb()),2&t){var i=e.$implicit;l.Ab(4),l.Ec(l.gc(5,3,i.cantidad_seleccionada,"2.")),l.Ab(3),l.Fc(" ",i.des," "),l.Ab(3),l.Fc(" ",l.gc(11,6,i.precio_total,".2"),"")}}function it(t,e){if(1&t&&(l.Sb(0,"div"),l.Sb(1,"div",4),l.Sb(2,"span",5),l.Dc(3),l.Rb(),l.Rb(),l.Bc(4,et,12,9,"div",6),l.Nb(5,"br"),l.Rb()),2&t){var i=e.$implicit;l.Ab(3),l.Ec(i.des),l.Ab(1),l.jc("ngForOf",i.items)}}var ot,nt,rt=((ot=function(){function t(){_classCallCheck(this,t),this.sumaTotal=0}return _createClass(t,[{key:"ngOnInit",value:function(){}},{key:"getTotal",value:function(){var t=this;this.sumaTotal=0,this._listResumen.map((function(e){t.sumaTotal+=e.items.map((function(t){return t.precio_total})).reduce((function(t,e){return t+e}),0)}))}},{key:"listResumen",set:function(t){t&&(this._listResumen=t,this.getTotal())}}]),t}()).\u0275fac=function(t){return new(t||ot)},ot.\u0275cmp=l.Gb({type:ot,selectors:[["app-com-resumen-all-pedidos"]],inputs:{listResumen:"listResumen"},decls:8,vars:5,consts:[[4,"ngFor","ngForOf"],[1,"text-right"],[1,"fw-600","fs-18"],[1,"text-secondary"],[1,"mb-2"],[1,"fw-600"],["class","border-bottom",4,"ngFor","ngForOf"],[1,"border-bottom"],[1,"d-flex","w-100","justify-content-between","fs-13"],[1,"pr-1"],[1,"pr-2"]],template:function(t,e){1&t&&(l.Sb(0,"div"),l.Bc(1,it,6,2,"div",0),l.Sb(2,"div",1),l.Sb(3,"p",2),l.Sb(4,"span",3),l.Dc(5,"Total:"),l.Rb(),l.Dc(6),l.ec(7,"number"),l.Rb(),l.Rb(),l.Rb()),2&t&&(l.Ab(1),l.jc("ngForOf",e._listResumen),l.Ab(5),l.Fc(" ",l.gc(7,2,e.sumaTotal,"0.2"),""))},directives:[n.l],pipes:[n.e],styles:[""]}),ot),at=i("Qm4N"),st=i("3sZV"),ct=i("VhxH"),dt=((nt=function(){function t(){_classCallCheck(this,t),this.directionsService=new google.maps.DirectionsService,this.origin={},this.destination={}}return _createClass(t,[{key:"calculateRoute",value:function(t,e){var i=e.c_minimo,o=e.c_km;this.origin={lat:t.latitude,lng:t.longitude},this.destination={lat:e.latitude,lng:e.longitude};var n={origin:this.origin,destination:this.destination,travelMode:google.maps.TravelMode.DRIVING},r=0;return this.directionsService.route(n,(function(t,n){"OK"===n&&(r=t.routes[0].legs[0].distance.value,(r=parseInt((r/1e3).toFixed(),0))>1&&(i=(r-1)*o+i,e.c_servicio=i))})),setTimeout((function(){return e.c_servicio=i,i}),500),e.c_servicio=i,i}},{key:"calcDistancia",value:function(t,e){var i={lat:e.latitude,lon:e.longitude};return Object(ct.insideCircle)({lat:t.latitude,lon:t.longitude},i,75)}},{key:"reglaKm",value:function(){}},{key:"calcDistanciaDosPunto",value:function(t,e){return Object(ct.distanceTo)(t,e)}}]),t}()).\u0275fac=function(t){return new(t||nt)},nt.\u0275prov=l.Ib({token:nt,factory:nt.\u0275fac,providedIn:"root"}),nt);function lt(t,e){if(1&t){var i=l.Tb();l.Sb(0,"map-marker",3,4),l.Zb("mapClick",(function(){l.vc(i);var t=l.tc(1),e=l.dc();return e.openInfo(t,e.markerComercio)})),l.Rb()}if(2&t){var o=l.dc();l.jc("position",o.markerComercio.position)("title",o.markerComercio.title)("options",o.markerComercio.options)}}function ut(t,e){if(1&t){var i=l.Tb();l.Sb(0,"map-marker",5,6),l.Zb("mapClick",(function(){l.vc(i);var t=e.$implicit,o=l.tc(1);return l.dc().openInfo(o,t)})),l.Rb()}if(2&t){var o=e.$implicit,n=l.dc();l.jc("position",o.position)("label",o.label)("title",o.title)("options",n.markerOptionsRepartidor)}}function pt(t,e){if(1&t){var i=l.Tb();l.Sb(0,"map-marker",5,7),l.Zb("mapClick",(function(){l.vc(i);var t=e.index;return l.dc().openPedido(t)})),l.Rb()}if(2&t){var o=e.$implicit;l.jc("position",o.position)("label",o.label)("title",o.title)("options",o.options)}}var ft,ht=((ft=function(){function t(e,i,o,n){_classCallCheck(this,t),this.calcCoordenadaService=e,this.comercioService=i,this.socketService=o,this.listenService=n,this.infowindow=new google.maps.InfoWindow,this.pedidoOpen=new l.o,this.zoom=15,this.options={zoomControl:!0,scrollwheel:!0,disableDoubleClickZoom:!0},this.markerOptionsRepartidor={draggable:!1,icon:"./assets/images/delivery-man.png"},this.markers=[],this.infoContent="",this.markerComercio={},this.markersPedidos=[],this.markersRepartidores=[],this.isPropioRepartidores=!1,this.destroy$=new y.Subject}return _createClass(t,[{key:"ngOnInit",value:function(){this.comercioService.getSedeInfo(),this.dataComercio=this.comercioService.sedeInfo,this.isPropioRepartidores=1===this.dataComercio.pwa_delivery_servicio_propio,this.center={lat:this.dataComercio.latitude,lng:this.dataComercio.longitude},this.addMarkerComercio(),this.isPropioRepartidores&&this.loadRepartidoresComercio(),this.listenSockets()}},{key:"ngOnDestroy",value:function(){this.destroy$.next(!0),this.destroy$.unsubscribe()}},{key:"ngOnChanges",value:function(t){this.listaPedidos&&this.addMarkerPedidos()}},{key:"addMarkerComercio",value:function(){this.markerComercio={position:{lat:this.center.lat,lng:this.center.lng},label:{color:"#212121",fontWeight:"600",text:this.dataComercio.nombre},title:"Comercio",info:this.dataComercio.nombre,options:{draggable:!1,icon:"./assets/images/marker-4.png"}}}},{key:"listenSockets",value:function(){var t=this;this.socketService.onRepartidorNotificaUbicacion().pipe(Object(R.takeUntil)(this.destroy$)).subscribe((function(e){t.markersRepartidores.filter((function(t){return t.idrepartidor===e.idrepartidor}))[0].position={lat:e.coordenadas.latitude,lng:e.coordenadas.longitude}})),this.listenService.notificaPedidoNuevo$.pipe(Object(R.takeUntil)(this.destroy$)).subscribe((function(e){e&&t.addMarkerPedidos()})),this.listenService.pedidoModificado$.pipe(Object(R.takeUntil)(this.destroy$)).subscribe((function(e){if(e){var i=t.buscarPedidoEnMarcadores(e.idpedido),o={animation:e.idrepartidor?google.maps.Animation.DROP:google.maps.Animation.BOUNCE,draggable:!1,icon:"./assets/images/"+(e.idrepartidor?"marker-1.png":"marker-0.png")};e.pwa_delivery_status&&"4"===e.pwa_delivery_status.toString()&&(o={animation:0,draggable:!1,icon:"./assets/images/marker-3.png"}),i.options=o}}))}},{key:"loadRepartidoresComercio",value:function(){var t=this;this.comercioService.loadRepartidoresComercio().subscribe((function(e){t.listRepartidores=e,t.addMarkerRepartidor()}))}},{key:"addMarkerRepartidor",value:function(){var t=this;this.markersRepartidores=[],this.listRepartidores.map((function(e){t.markersRepartidores.push({visible:!e.visible||e.visible,idrepartidor:e.idrepartidor,position:{lat:e.position_now.latitude,lng:e.position_now.longitude},label:{fontWeight:"600",text:e.nombre},title:"Repartidor",info:e.nombre+" "+e.apellido,options:{animation:0}})}))}},{key:"openInfo",value:function(t,e){this.infowindow.setContent("<p>"+e.title+"</p>"+e.info),this.infowindow.open(this.map._googleMap,t._marker)}},{key:"buscarPedidoEnMarcadores",value:function(t){return this.markersPedidos.filter((function(e){return e.idpedido===t}))[0]}},{key:"addMarkerPedidos",value:function(){var t=this;this.dataComercio||(this.comercioService.getSedeInfo(),this.dataComercio=this.comercioService.sedeInfo);var e=0===this.dataComercio.pwa_delivery_servicio_propio;this.listaRepartidoresRed=[];var i={};this.markersPedidos=[],this.listaPedidos.map((function(o,n){var r=o.json_datos_delivery.p_header.arrDatosDelivery,a=o.idrepartidor?"marker-1.png":"marker-0.png",s="Pedido "+o.idpedido;"4"===o.pwa_delivery_status.toString()&&(a="marker-3.png",s=o.idpedido.toString()),t.markersPedidos.push({idpedido:o.idpedido,position:{lat:r.direccionEnvioSelected.latitude,lng:r.direccionEnvioSelected.longitude},label:{color:"#0d47a1",fontWeight:"600",text:s},title:"Pedido",info:o.idpedido,options:{animation:o.idrepartidor?0:google.maps.Animation.BOUNCE,draggable:!1,icon:"./assets/images/"+a}}),e&&"4"!==o.pwa_delivery_status&&o.idrepartidor&&(i={idrepartidor:o.idrepartidor,idpedido:o.idpedido,nombre:o.nom_repartidor,apellido:o.ap_repartidor,position_now:o.position_now_repartidor},t.listaRepartidoresRed.push(i))})),e&&(this.listRepartidores=this.listaRepartidoresRed,this.addMarkerRepartidor())}},{key:"openPedido",value:function(t){this.pedidoOpen.emit(this.listaPedidos[t])}}]),t}()).\u0275fac=function(t){return new(t||ft)(l.Mb(dt),l.Mb(f.a),l.Mb(v.a),l.Mb(tt.a))},ft.\u0275cmp=l.Gb({type:ft,selectors:[["app-mapa-ordenes"]],viewQuery:function(t,e){var i;1&t&&l.Ic(st.a,!0),2&t&&l.sc(i=l.ac())&&(e.map=i.first)},inputs:{listaPedidos:"listaPedidos",listaRepartidoresRed:"listaRepartidoresRed"},outputs:{pedidoOpen:"pedidoOpen"},features:[l.yb],decls:4,vars:6,consts:[["height","100%","width","100%",3,"zoom","center","options"],[3,"position","title","options","mapClick",4,"ngIf"],[3,"position","label","title","options","mapClick",4,"ngFor","ngForOf"],[3,"position","title","options","mapClick"],["markerElemComercio",""],[3,"position","label","title","options","mapClick"],["markerElemRepartidor",""],["markerElem",""]],template:function(t,e){1&t&&(l.Sb(0,"google-map",0),l.Bc(1,lt,2,3,"map-marker",1),l.Bc(2,ut,2,4,"map-marker",2),l.Bc(3,pt,2,4,"map-marker",2),l.Rb()),2&t&&(l.jc("zoom",e.zoom)("center",e.center)("options",e.options),l.Ab(1),l.jc("ngIf",e.markerComercio),l.Ab(1),l.jc("ngForOf",e.markersRepartidores),l.Ab(1),l.jc("ngForOf",e.markersPedidos))},directives:[st.a,n.m,n.l,st.c],styles:[""]}),ft),bt=i("+0xr");function mt(t,e){if(1&t){var i=l.Tb();l.Sb(0,"div",5),l.Sb(1,"span",12),l.Sb(2,"i",13),l.Zb("click",(function(){return l.vc(i),l.dc(),l.tc(2).toggle()})),l.Rb(),l.Dc(3),l.ec(4,"number"),l.Rb(),l.Rb()}if(2&t){var o=l.dc();l.Ab(3),l.Fc(" Resumen de pedidos (",l.gc(4,1,o.cantidadOrdenes,"2."),")")}}var gt=function(t){return{active:t}};function vt(t,e){if(1&t){var i=l.Tb();l.Sb(0,"span",14),l.Zb("click",(function(){l.vc(i);var t=e.$implicit;return l.dc().filterList(t)})),l.Dc(1),l.Rb()}if(2&t){var o=e.$implicit;l.jc("ngClass",l.oc(2,gt,o.checked)),l.Ab(1),l.Ec(o.descripcion)}}function yt(t,e){1&t&&(l.Sb(0,"p",32),l.Dc(1,"APP"),l.Rb())}function Rt(t,e){if(1&t&&(l.Qb(0),l.Nb(1,"i",33),l.Sb(2,"p",12),l.Dc(3,"Pedido Programado"),l.Rb(),l.Sb(4,"p",34),l.Dc(5),l.Rb(),l.Pb()),2&t){var i=l.dc().$implicit;l.Ab(5),l.Gc(" ",i.json_datos_delivery.p_header.arrDatosDelivery.tiempoEntregaProgamado.descripcion," - ",i.json_datos_delivery.p_header.arrDatosDelivery.tiempoEntregaProgamado.hora," ")}}function St(t,e){1&t&&(l.Qb(0),l.Nb(1,"i",37),l.Sb(2,"span"),l.Dc(3,"Cliente Recoge"),l.Rb(),l.Pb())}function _t(t,e){1&t&&(l.Qb(0),l.Dc(1," Asignado "),l.Pb())}function Ct(t,e){1&t&&(l.Qb(0),l.Dc(1," No asignado "),l.Pb())}function kt(t,e){1&t&&(l.Sb(0,"span"),l.Dc(1,"Repartidor no Asignado"),l.Rb())}function Pt(t,e){if(1&t&&(l.Bc(0,Ct,2,0,"ng-container",24),l.Bc(1,kt,2,0,"ng-template",null,25,l.Cc)),2&t){var i=l.tc(2),o=l.dc(5);l.jc("ngIf",o.isComercioPropioRepartidor)("ngIfElse",i)}}function wt(t,e){if(1&t&&(l.Bc(0,_t,2,0,"ng-container",24),l.Bc(1,Pt,3,2,"ng-template",null,25,l.Cc)),2&t){var i=l.tc(2),o=l.dc(2).$implicit;l.jc("ngIf",o.isTieneRepartidor)("ngIfElse",i)}}function Dt(t,e){if(1&t&&(l.Sb(0,"p",35),l.Dc(1),l.ec(2,"number"),l.Rb(),l.Sb(3,"p",34),l.Bc(4,St,4,0,"ng-container",24),l.Bc(5,wt,3,2,"ng-template",null,36,l.Cc),l.Rb()),2&t){var i=l.tc(6),o=l.dc(),n=o.index,r=o.$implicit;l.Ab(1),l.Ec(l.gc(2,3,n+1,"2.")),l.Ab(3),l.jc("ngIf",r.isClientePasaRecoger)("ngIfElse",i)}}var It=function(t,e,i){return{"badge-success":t,"badge-warning":e,"badge-danger":i}};function At(t,e){if(1&t&&(l.Sb(0,"p",38),l.Dc(1),l.Rb()),2&t){var i=l.dc().$implicit;l.jc("ngClass",l.qc(3,It,"v"===i.color,"a"===i.color,"r"===i.color)),l.Ab(1),l.Gc(" ",i.tiempo," ",i.labelMinTiempo," ")}}var Ot=function(t,e){return{"quitar-orden":t,fadeInUp:e}},xt=function(t,e,i,o){return{verde:t,amarillo:e,rojo:i,programado:o}};function Tt(t,e){if(1&t){var i=l.Tb();l.Sb(0,"div",17),l.Sb(1,"div",18),l.Zb("click",(function(){l.vc(i);var t=e.$implicit;return l.dc(2).openDialogOrden(t)})),l.Sb(2,"div",19),l.Sb(3,"div",20),l.Sb(4,"p",21),l.Dc(5),l.Rb(),l.Bc(6,yt,2,0,"p",22),l.Rb(),l.Sb(7,"div",23),l.Bc(8,Rt,6,2,"ng-container",24),l.Bc(9,Dt,7,6,"ng-template",null,25,l.Cc),l.Rb(),l.Sb(11,"div",26),l.Bc(12,At,2,7,"p",27),l.Sb(13,"p",28),l.Dc(14),l.Rb(),l.Rb(),l.Rb(),l.Sb(15,"div",29),l.Sb(16,"div"),l.Sb(17,"p",30),l.Dc(18,"Cliente: "),l.Sb(19,"strong"),l.Dc(20),l.Rb(),l.Rb(),l.Sb(21,"span",30),l.Dc(22),l.Rb(),l.Rb(),l.Rb(),l.Rb(),l.Sb(23,"div"),l.Nb(24,"app-com-resumen-pedido",31),l.Rb(),l.Rb()}if(2&t){var o=e.$implicit,n=l.tc(10);l.jc("ngClass",l.pc(11,Ot,o.quitar,o.new)),l.Ab(2),l.jc("ngClass",l.rc(14,xt,"v"===o.color,"a"===o.color,"r"===o.color,"p"===o.color)),l.Ab(3),l.Fc("#",o.idpedido,""),l.Ab(1),l.jc("ngIf",1===(null==o||null==o.json_datos_delivery||null==o.json_datos_delivery.p_header?null:o.json_datos_delivery.p_header.isCliente)),l.Ab(2),l.jc("ngIf",o.flag_pedido_programado)("ngIfElse",n),l.Ab(4),l.jc("ngIf",o.tiempo),l.Ab(2),l.Ec(o.estadoTitle),l.Ab(6),l.Ec(o.json_datos_delivery.p_header.arrDatosDelivery.nombre),l.Ab(2),l.Ec(o.json_datos_delivery.p_header.arrDatosDelivery.direccion),l.Ab(2),l.jc("elPedido",o.json_datos_delivery.p_body)}}var Et=function(){return{horizontalOrder:!0,updateLayout:!0,transitionDuration:"0"}};function jt(t,e){if(1&t&&(l.Sb(0,"div",5),l.Sb(1,"ngx-masonry",15),l.Bc(2,Tt,25,19,"div",16),l.Rb(),l.Rb()),2&t){var i=l.dc();l.Ab(1),l.jc("options",l.nc(2,Et)),l.Ab(1),l.jc("ngForOf",i.listOrdenes)}}function Mt(t,e){1&t&&(l.Qb(0),l.Nb(1,"i",37),l.Sb(2,"span"),l.Dc(3,"Cliente Recoge"),l.Rb(),l.Pb())}function Bt(t,e){1&t&&(l.Qb(0),l.Dc(1," Asignado "),l.Pb())}function Ft(t,e){1&t&&(l.Qb(0),l.Dc(1," No asignado "),l.Pb())}function Lt(t,e){1&t&&(l.Sb(0,"span"),l.Dc(1,"Buscando Repartidor..."),l.Rb())}function Nt(t,e){if(1&t&&(l.Bc(0,Ft,2,0,"ng-container",24),l.Bc(1,Lt,2,0,"ng-template",null,25,l.Cc)),2&t){var i=l.tc(2),o=l.dc(4);l.jc("ngIf",o.isComercioPropioRepartidor)("ngIfElse",i)}}function zt(t,e){if(1&t&&(l.Bc(0,Bt,2,0,"ng-container",24),l.Bc(1,Nt,3,2,"ng-template",null,25,l.Cc)),2&t){var i=l.tc(2),o=l.dc().$implicit;l.jc("ngIf",o.isTieneRepartidor)("ngIfElse",i)}}function Wt(t,e){if(1&t){var i=l.Tb();l.Sb(0,"div",63),l.Sb(1,"div",18),l.Zb("click",(function(){l.vc(i);var t=e.$implicit;return l.dc(2).openDialogOrden(t)})),l.Sb(2,"div",64),l.Sb(3,"div",20),l.Sb(4,"p",35),l.Dc(5),l.ec(6,"number"),l.Rb(),l.Sb(7,"p",21),l.Dc(8),l.Rb(),l.Rb(),l.Sb(9,"div",26),l.Sb(10,"p",38),l.Dc(11),l.Rb(),l.Sb(12,"p",28),l.Dc(13),l.Rb(),l.Sb(14,"p",34),l.Bc(15,Mt,4,0,"ng-container",24),l.Bc(16,zt,3,2,"ng-template",null,36,l.Cc),l.Rb(),l.Rb(),l.Rb(),l.Sb(18,"div",65),l.Sb(19,"div"),l.Sb(20,"p",30),l.Dc(21,"Cliente: "),l.Sb(22,"strong"),l.Dc(23),l.Rb(),l.Rb(),l.Sb(24,"span",30),l.Dc(25),l.Rb(),l.Rb(),l.Rb(),l.Rb(),l.Rb()}if(2&t){var o=e.$implicit,n=e.index,r=l.tc(17);l.jc("ngClass",l.pc(14,Ot,o.quitar,o.new)),l.Ab(5),l.Ec(l.gc(6,11,n+1,"2.")),l.Ab(3),l.Fc("#",o.idpedido,""),l.Ab(2),l.jc("ngClass",l.qc(17,It,"v"===o.color,"a"===o.color,"r"===o.color)),l.Ab(1),l.Gc(" ",o.tiempo," ",o.labelMinTiempo," "),l.Ab(2),l.Ec(o.estadoTitle),l.Ab(2),l.jc("ngIf",o.isClientePasaRecoger)("ngIfElse",r),l.Ab(8),l.Ec(o.json_datos_delivery.p_header.arrDatosDelivery.nombre),l.Ab(2),l.Ec(o.json_datos_delivery.p_header.arrDatosDelivery.direccion)}}function $t(t,e){1&t&&(l.Sb(0,"th",67),l.Dc(1,"Repartidor"),l.Rb())}function Qt(t,e){if(1&t&&(l.Sb(0,"td",68),l.Sb(1,"p",12),l.Dc(2),l.ec(3,"titlecase"),l.ec(4,"titlecase"),l.Rb(),l.Sb(5,"p",69),l.Sb(6,"span",70),l.Dc(7,"Pedidos: "),l.Rb(),l.Dc(8),l.ec(9,"number"),l.Rb(),l.Rb()),2&t){var i=e.$implicit;l.Ab(2),l.Gc(" ",l.fc(3,3,i.nom_repartidor)," ",l.fc(4,5,i.ap_repartidor),""),l.Ab(6),l.Fc("",l.gc(9,7,i.num_pedidos,"2.")," ")}}function qt(t,e){1&t&&(l.Sb(0,"th",67),l.Dc(1,"Importe"),l.Rb())}var Ht=function(t,e,i){return{"badge-primary":t,"badge-info":e,"badge-secondary":i}};function Gt(t,e){if(1&t&&(l.Sb(0,"div",72),l.Sb(1,"p",69),l.Sb(2,"span",73),l.Dc(3),l.ec(4,"titlecase"),l.Rb(),l.Sb(5,"span",74),l.Dc(6),l.ec(7,"number"),l.Rb(),l.Rb(),l.Sb(8,"p",69),l.Sb(9,"span",12),l.Dc(10,"Importe: "),l.Rb(),l.Sb(11,"span",69),l.Dc(12),l.ec(13,"number"),l.Rb(),l.Rb(),l.Rb()),2&t){var i=e.$implicit;l.Ab(2),l.jc("ngClass",l.qc(12,Ht,3===i.idtipo_pago,2===i.idtipo_pago,1===i.idtipo_pago)),l.Ab(1),l.Fc(" ",l.fc(4,4,i.descripcion)," : "),l.Ab(3),l.Ec(l.gc(7,6,i.num_pedidos,"2.")),l.Ab(6),l.Fc("",l.gc(13,9,i.importe,".2")," ")}}function Zt(t,e){if(1&t&&(l.Sb(0,"td",68),l.Bc(1,Gt,14,16,"div",71),l.Rb()),2&t){var i=e.$implicit;l.Ab(1),l.jc("ngForOf",i.metodoPago)}}function Ut(t,e){1&t&&l.Nb(0,"tr",75)}function Vt(t,e){1&t&&l.Nb(0,"tr",76)}function Xt(t,e){if(1&t&&(l.Qb(0),l.Sb(1,"table",52),l.Qb(2,58),l.Bc(3,$t,2,0,"th",54),l.Bc(4,Qt,10,10,"td",55),l.Pb(),l.Qb(5,60),l.Bc(6,qt,2,0,"th",54),l.Bc(7,Zt,2,1,"td",55),l.Pb(),l.Bc(8,Ut,1,0,"tr",61),l.Bc(9,Vt,1,0,"tr",66),l.Rb(),l.Pb()),2&t){var i=l.dc(2);l.Ab(1),l.jc("dataSource",i.listRepartidoresInformativo),l.Ab(7),l.jc("matHeaderRowDef",i.displayedColumnsRepartidor),l.Ab(1),l.jc("matRowDefColumns",i.displayedColumnsRepartidor)}}function Jt(t,e){1&t&&(l.Sb(0,"th",67),l.Dc(1,"Metodo"),l.Rb())}function Kt(t,e){if(1&t&&(l.Sb(0,"td",68),l.Sb(1,"p",78),l.Dc(2),l.ec(3,"titlecase"),l.Rb(),l.Sb(4,"p",69),l.Sb(5,"span",70),l.Dc(6,"Pedidos: "),l.Rb(),l.Dc(7),l.ec(8,"number"),l.Rb(),l.Rb()),2&t){var i=e.$implicit;l.Ab(1),l.jc("ngClass",l.qc(8,Ht,5===i.idtipo_pago,2===i.idtipo_pago,1===i.idtipo_pago)),l.Ab(1),l.Fc(" ",l.fc(3,3,i.descripcion)," : "),l.Ab(5),l.Fc("",l.gc(8,5,i.num_pedidos,"2.")," ")}}function Yt(t,e){1&t&&(l.Sb(0,"th",67),l.Dc(1,"Importe"),l.Rb())}function te(t,e){if(1&t&&(l.Sb(0,"td",68),l.Sb(1,"p",69),l.Dc(2),l.ec(3,"number"),l.Rb(),l.Rb()),2&t){var i=e.$implicit;l.Ab(2),l.Fc("",l.gc(3,1,i.importe,".2")," ")}}function ee(t,e){1&t&&l.Nb(0,"tr",75)}function ie(t,e){1&t&&l.Nb(0,"tr",76)}function oe(t,e){if(1&t&&(l.Sb(0,"table",52),l.Qb(1,77),l.Bc(2,Jt,2,0,"th",54),l.Bc(3,Kt,9,12,"td",55),l.Pb(),l.Qb(4,60),l.Bc(5,Yt,2,0,"th",54),l.Bc(6,te,4,4,"td",55),l.Pb(),l.Bc(7,ee,1,0,"tr",61),l.Bc(8,ie,1,0,"tr",66),l.Rb()),2&t){var i=l.dc(2);l.jc("dataSource",i.listMetodoPagoInformativo),l.Ab(7),l.jc("matHeaderRowDef",i.displayedColumnsMetodoPago),l.Ab(1),l.jc("matRowDefColumns",i.displayedColumnsMetodoPago)}}function ne(t,e){1&t&&(l.Sb(0,"th",67),l.Dc(1," # "),l.Rb())}function re(t,e){if(1&t&&(l.Sb(0,"td",68),l.Dc(1),l.Rb()),2&t){var i=e.$implicit;l.Ab(1),l.Fc(" ",i.n," ")}}function ae(t,e){1&t&&(l.Sb(0,"th",67),l.Dc(1," Pedido "),l.Rb())}function se(t,e){if(1&t&&(l.Sb(0,"td",68),l.Sb(1,"p",79),l.Dc(2),l.Rb(),l.Sb(3,"p",69),l.Dc(4),l.Rb(),l.Rb()),2&t){var i=e.$implicit;l.Ab(2),l.Fc(" #",i.idpedido," "),l.Ab(2),l.Fc("",i.estado," ")}}function ce(t,e){1&t&&(l.Sb(0,"th",67),l.Dc(1," Cliente "),l.Rb())}function de(t,e){if(1&t&&(l.Sb(0,"td",68),l.Sb(1,"p",80),l.Dc(2),l.ec(3,"titlecase"),l.Rb(),l.Sb(4,"p",69),l.Dc(5),l.Rb(),l.Rb()),2&t){var i=e.$implicit;l.Ab(2),l.Ec(l.fc(3,2,i.cliente)),l.Ab(3),l.Fc(" ",i.direccion," ")}}function le(t,e){1&t&&(l.Sb(0,"th",67),l.Dc(1," Repartidor "),l.Rb())}function ue(t,e){if(1&t&&(l.Sb(0,"td",68),l.Sb(1,"span",69),l.Dc(2),l.ec(3,"titlecase"),l.Rb(),l.Rb()),2&t){var i=e.$implicit;l.Ab(2),l.Ec(l.fc(3,1,i.repartidor))}}function pe(t,e){1&t&&(l.Sb(0,"th",67),l.Dc(1," Tiempo "),l.Rb())}function fe(t,e){if(1&t&&(l.Sb(0,"td",68),l.Sb(1,"span",81),l.Dc(2),l.Rb(),l.Rb()),2&t){var i=e.$implicit;l.Ab(1),l.jc("ngClass",l.qc(2,It,"v"===i.color,"a"===i.color,"r"===i.color)),l.Ab(1),l.Fc("",i.tiempo," ")}}function he(t,e){1&t&&(l.Sb(0,"th",67),l.Dc(1," importe "),l.Rb())}function be(t,e){if(1&t&&(l.Sb(0,"td",68),l.Sb(1,"span",82),l.Dc(2),l.ec(3,"number"),l.Rb(),l.Sb(4,"span",81),l.Dc(5),l.Rb(),l.Rb()),2&t){var i=e.$implicit;l.Ab(2),l.Fc("",l.gc(3,3,i.importe,"0.2")," "),l.Ab(2),l.jc("ngClass",l.qc(6,Ht,3===i.metodoPago.idtipo_pago,2===i.metodoPago.idtipo_pago,1===i.metodoPago.idtipo_pago)),l.Ab(1),l.Fc("",i.metodoPago.descripcion," ")}}function me(t,e){1&t&&l.Nb(0,"tr",75)}function ge(t,e){if(1&t){var i=l.Tb();l.Sb(0,"tr",83),l.Zb("click",(function(){l.vc(i);var t=e.$implicit;return l.dc(2).openDialogOrdenFromInformativo(t)})),l.Rb()}}var ve=function(t){return{cerrar:t}},ye=function(t){return{"fa-arrow-right":t}},Re=function(t){return{ampliar:t}},Se=function(t){return{"d-none":t}};function _e(t,e){if(1&t){var i=l.Tb();l.Sb(0,"div",39),l.Sb(1,"button",40),l.Zb("click",(function(){l.vc(i);var t=l.dc();return t.cardListaToggle=!t.cardListaToggle})),l.Nb(2,"i",41),l.Rb(),l.Sb(3,"div",42),l.Sb(4,"div",43),l.Sb(5,"ngx-masonry",15),l.Bc(6,Wt,26,21,"div",44),l.Rb(),l.Rb(),l.Sb(7,"div",45),l.Sb(8,"app-mapa-ordenes",46),l.Zb("pedidoOpen",(function(t){return l.vc(i),l.dc().openDialogOrden(t)})),l.Rb(),l.Sb(9,"div",47),l.Sb(10,"div",48),l.Sb(11,"div",49),l.Bc(12,Xt,10,3,"ng-container",24),l.Bc(13,oe,9,3,"ng-template",null,50,l.Cc),l.Rb(),l.Sb(15,"div",51),l.Sb(16,"table",52),l.Qb(17,53),l.Bc(18,ne,2,0,"th",54),l.Bc(19,re,2,1,"td",55),l.Pb(),l.Qb(20,56),l.Bc(21,ae,2,0,"th",54),l.Bc(22,se,5,2,"td",55),l.Pb(),l.Qb(23,57),l.Bc(24,ce,2,0,"th",54),l.Bc(25,de,6,4,"td",55),l.Pb(),l.Qb(26,58),l.Bc(27,le,2,0,"th",54),l.Bc(28,ue,4,3,"td",55),l.Pb(),l.Qb(29,59),l.Bc(30,pe,2,0,"th",54),l.Bc(31,fe,3,6,"td",55),l.Pb(),l.Qb(32,60),l.Bc(33,he,2,0,"th",54),l.Bc(34,be,6,10,"td",55),l.Pb(),l.Bc(35,me,1,0,"tr",61),l.Bc(36,ge,1,0,"tr",62),l.Rb(),l.Rb(),l.Rb(),l.Rb(),l.Rb(),l.Rb(),l.Rb()}if(2&t){var o=l.tc(14),n=l.dc();l.Ab(1),l.jc("ngClass",l.oc(13,ve,n.cardListaToggle)),l.Ab(1),l.jc("ngClass",l.oc(15,ye,n.cardListaToggle)),l.Ab(2),l.jc("ngClass",l.oc(17,ve,n.cardListaToggle)),l.Ab(1),l.jc("options",l.nc(19,Et)),l.Ab(1),l.jc("ngForOf",n.listOrdenes),l.Ab(2),l.jc("listaPedidos",n.listOrdenes),l.Ab(1),l.jc("ngClass",l.oc(20,Re,n.cardListaToggle)),l.Ab(2),l.jc("ngClass",l.oc(22,Se,!n.isComercioPropioRepartidor&&0===n.listMetodoPagoInformativo.length)),l.Ab(1),l.jc("ngIf",n.isComercioPropioRepartidor)("ngIfElse",o),l.Ab(4),l.jc("dataSource",n.listResumenInformativo),l.Ab(19),l.jc("matHeaderRowDef",n.displayedColumns),l.Ab(1),l.jc("matRowDefColumns",n.displayedColumns)}}var Ce,ke,Pe,we=((Pe=function(){function t(e,i,o,n,r,a,s,c){_classCallCheck(this,t),this.comercioService=e,this.pedidoComercioService=i,this.pedidoRepartidorService=o,this.utilService=n,this.dialog=r,this.socketService=a,this.activatedRoute=s,this.listenService=c,this.listRepartidoresInformativo=[],this.listMetodoPagoInformativo=[],this.cantidadOrdenes=0,this.timepoMax=10,this.timepoMedio=this.timepoMax/2,this.showPanelRigth=!1,this.showVistaLista=!0,this.destroy$=new y.Subject,this.listBtnToolbar=[],this.isComercioPropioRepartidor=!1,this.displayedColumns=["n","pedido","direccion","repartidor","tiempo","importe"],this.displayedColumnsRepartidor=["repartidor","importe"],this.displayedColumnsMetodoPago=["Metodo","importe"],this.cardListaToggle=!1}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.activatedRoute.params.subscribe((function(e){t.showVistaLista="lista"===e.id})),this.listBtnToolbar.push({descripcion:"Pendientes",checked:!0,filtro:"'P', 'A'"}),this.listBtnToolbar.push({descripcion:" Listos ",checked:!1,filtro:"'D'"}),this.listBtnToolbar.push({descripcion:" Entregados ",checked:!1,filtro:"'R', 'E'"}),this.optionChekListSelected=this.listBtnToolbar[0],this.listenSocket(),this.comercioService.getSedeInfo(),this.isComercioPropioRepartidor=1===this.comercioService.sedeInfo.pwa_delivery_servicio_propio}},{key:"ngOnDestroy",value:function(){clearInterval(this.timerRun),this.destroy$.next(!0),this.destroy$.unsubscribe()}},{key:"listenSocket",value:function(){var t=this;this.socketService.isSocketOpen$.subscribe((function(e){e&&(t.listOrdenes=[],t.xloadOrdenesPendientes(t.optionChekListSelected.filtro))})),this.socketService.onGetNuevoPedido().pipe(Object(R.takeUntil)(this.destroy$)).subscribe((function(e){console.log("nuevo pedido",e),t.comercioService.loadOrdenenById(e.idpedido).subscribe((function(e){e.new=!0,t.listOrdenes.push(e),t.darFormatoOrden(),t.listenService.setNotificaNuevoPedido(e),t.pedidoRepartidorService.playAudioNewPedido(),t.masonry.reloadItems(),t.masonry.layout(),t.resumenInformativo()}))})),this.socketService.onGetPedidoAceptadoByReparidor().pipe(Object(R.takeUntil)(this.destroy$)).subscribe((function(e){var i=t.findListaOrdenById(e.idpedido);i.nom_repartidor=e.nombre,i.ap_repartidor=e.apellido,i.idrepartidor=e.idrepartidor,i.isTieneRepartidor=!0,i.telefono_repartidor=e.telefono,e.position_now&&(i.position_now_repartidor=e.position_now),t.listenService.setNotificaNuevoPedido(i),t.resumenInformativo()})),this.socketService.onRepartidorNotificaFinPedido().pipe(Object(R.takeUntil)(this.destroy$)).subscribe((function(e){var i=t.findListaOrdenById(e.idpedido);i&&(i.pwa_delivery_status=4,i.estadoTitle=t.pedidoComercioService.getEstadoPedido("E").estadoTitle,i.quitar=!0,t.listenService.setPedidoModificado(null),t.listenService.setPedidoModificado(e),t.quitarOrden(i),t.resumenInformativo())}))}},{key:"xloadOrdenesPendientes",value:function(t){var e=this;this.comercioService.loadOrdenesPendientes(t).subscribe((function(t){console.log(t),e.listOrdenes=t,e.cantidadOrdenes=e.listOrdenes.length,e.darFormatoOrden(),e.initTimerOrdenes(),e.resumenInformativo()}))}},{key:"darFormatoOrden",value:function(){var t=this;console.log("aaa"),this.listOrdenes.filter((function(t){return!t.con_formato})).map((function(e){e.json_datos_delivery="object"==typeof e.json_datos_delivery?e.json_datos_delivery:JSON.parse(e.json_datos_delivery),e.estadoTitle=t.pedidoComercioService.getEstadoPedido(e.pwa_estado).estadoTitle,e.json_datos_delivery.p_subtotales=t.pedidoComercioService.darFormatoSubTotales(e.json_datos_delivery.p_subtotales,e.json_datos_delivery.p_header.arrDatosDelivery.costoTotalDelivery),e.visible=!0,e.isTieneRepartidor=!!e.idrepartidor,e.isClientePasaRecoger=e.json_datos_delivery.p_header.arrDatosDelivery.pasoRecoger,e.nom_repartidor=e.isClientePasaRecoger?"Cliente Recoge":e.nom_repartidor,e.con_formato=!0,e.flag_pedido_programado=e.flag_pedido_programado?e.flag_pedido_programado:0;var i=e.tiempo?e.tiempo:0;return e.color=i>=t.timepoMax?"r":i>=t.timepoMedio?"a":"v",e.color=1===e.flag_pedido_programado?"p":e.color,e}))}},{key:"initTimerOrdenes",value:function(){var t=this;this.calcTimer(),this.timerRun=setInterval((function(){t.calcTimer()}),1e3)}},{key:"calcTimer",value:function(){var t=this,e=0;this.listOrdenes.map((function(i){if(1!==i.flag_pedido_programado)"4"!==i.pwa_delivery_status.toString()?(i.labelMinTiempo="",i.tiempo=t.utilService.xTiempoTranscurridos_2(i.hora),e=i.tiempo.split(":")[1],i.color=e>=t.timepoMax?"r":e>=t.timepoMedio?"a":"v",i.color=1===i.flag_pedido_programado?"p":i.color):i.labelMinTiempo="Min";else{var o=new Date(i.fecha_hora);o.getTime()>Date.now()||(i.flag_pedido_programado=0,i.hora=o.getHours()+":"+o.getMinutes()+":00")}}))}},{key:"openDialogOrden",value:function(t){var e=this,i=new a.e;i.disableClose=!0,i.hasBackdrop=!0,i.width="700px",i.panelClass=["my-dialog-orden-detalle","my-dialog-scrool"],i.data={laOrden:t},this.dialog.open(z.a,i).afterClosed().subscribe((function(t){t&&(e.quitarOrden(t),e.resumenInformativo())}))}},{key:"quitarOrden",value:function(t){var e=this;"Entregados"!==this.optionChekListSelected.descripcion&&setTimeout((function(){e.listOrdenes=e.listOrdenes.filter((function(t){return!t.quitar})),e.masonry.reloadItems(),e.masonry.layout()}),500)}},{key:"filterList",value:function(t){this.listBtnToolbar.map((function(t){return t.checked=!1})),t.checked=!0,this.optionChekListSelected=t,this.filtrarOrdenes(t)}},{key:"filtrarOrdenes",value:function(t){this.xloadOrdenesPendientes(t.filtro)}},{key:"resumenOrdenesPendientes",value:function(){var t=this;this.listResumenAll=[],this.listOrdenes.map((function(e){e.json_datos_delivery.p_body.tipoconsumo.map((function(e){e.secciones.map((function(e){var i=t.listResumenAll.filter((function(t){return t.idseccion===e.idseccion}))[0];i||((i=JSON.parse(JSON.stringify(e))).items=[],t.listResumenAll.push(i)),e.items.map((function(t){var e=i.items.filter((function(e){return e.iditem===t.iditem}))[0];e?(e.cantidad_seleccionada+=t.cantidad_seleccionada,e.precio_total+=t.precio_total):(e=JSON.parse(JSON.stringify(t)),i.items.push(e))}))}))}))})),this.showPanelRigth=!0}},{key:"resumenInformativo",value:function(){var t=this,e={},i={},o={};this.listResumenInformativo=[],this.listRepartidoresInformativo=[],this.listMetodoPagoInformativo=[],this.listOrdenes.map((function(n,r){e={n:r+1,idpedido:n.idpedido,correlativo_dia:n.correlativo_dia,cliente:n.json_datos_delivery.p_header.arrDatosDelivery.nombre,direccion:n.json_datos_delivery.p_header.arrDatosDelivery.direccionEnvioSelected.direccion,ciudad:n.json_datos_delivery.p_header.arrDatosDelivery.direccionEnvioSelected.ciudad||"",fecha:n.fecha,hora:n.hora,tiempo:n.tiempo?n.tiempo+" Min":"",repartidor:n.nom_repartidor,estado:n.estadoTitle,color:n.color,metodoPago:n.json_datos_delivery.p_header.arrDatosDelivery.metodoPago,importe:"0"===n.total?n.total_r:n.total},t.listResumenInformativo.push(e),i={idrepartidor:n.idrepartidor,idpedido:n.idpedido,num_pedidos:1,nom_repartidor:n.nom_repartidor,ap_repartidor:n.ap_repartidor,metodoPago:[{num_pedidos:1,idtipo_pago:n.json_datos_delivery.p_header.arrDatosDelivery.metodoPago.idtipo_pago,descripcion:n.json_datos_delivery.p_header.arrDatosDelivery.metodoPago.descripcion,importe:"0"===n.total?parseFloat(n.total_r):parseFloat(n.total)}],importe:"0"===n.total?parseFloat(n.total_r):parseFloat(n.total)},t.resumenInformativoRepartidores(i),!t.isComercioPropioRepartidor&&n.metodoPagoRegistro&&(o={num_pedidos:1,idtipo_pago:n.metodoPagoRegistro[0].idtipo_pago,descripcion:n.metodoPagoRegistro[0].descripcion,importe:"0"===n.total?parseFloat(n.total_r):parseFloat(n.total)},t.resumenInformativoMetodosPago(o))}))}},{key:"resumenInformativoRepartidores",value:function(t){var e=this.listRepartidoresInformativo.filter((function(e){return e.idrepartidor===t.idrepartidor}))[0];if(e){e.num_pedidos+=1,e.importe+=t.importe;var i=e.metodoPago.filter((function(e){return e.idtipo_pago===t.metodoPago[0].idtipo_pago}))[0];i?(i.num_pedidos+=1,i.importe+=t.metodoPago[0].importe):e.metodoPago.push(t.metodoPago[0])}else this.listRepartidoresInformativo.push(t)}},{key:"resumenInformativoMetodosPago",value:function(t){var e=this.listMetodoPagoInformativo.filter((function(e){return e.idtipo_pago===t.idtipo_pago}))[0];e?(e.num_pedidos+=1,e.importe+=t.importe):this.listMetodoPagoInformativo.push(t)}},{key:"openDialogOrdenFromInformativo",value:function(t){this.openDialogOrden(this.findListaOrdenById(t.idpedido))}},{key:"findListaOrdenById",value:function(t){return this.listOrdenes.filter((function(e){return e.idpedido===t}))[0]}}]),t}()).\u0275fac=function(t){return new(t||Pe)(l.Mb(f.a),l.Mb(W.a),l.Mb(Y),l.Mb(N.a),l.Mb(a.b),l.Mb(v.a),l.Mb(r.a),l.Mb(tt.a))},Pe.\u0275cmp=l.Gb({type:Pe,selectors:[["app-ordenes"]],viewQuery:function(t,e){var i;1&t&&l.Ic(q,!0),2&t&&l.sc(i=l.ac())&&(e.masonry=i.first)},decls:16,vars:6,consts:[[1,"example-container"],["mode","over","position","end",1,"example-sidenav",3,"opened","closedStart"],["drawer",""],[2,"max-width","350px"],["class","p-3",4,"ngIf"],[1,"p-3"],[3,"listResumen"],[1,"animated","fadeInDown","xh-body-odenen"],[1,"card-encabezado","p-3","text-white","fs-13","d-flex","justify-content-between"],["class","btn-link-2 pr-2",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"btn-link-2",3,"click"],["class","animated fadeIn",4,"ngIf"],[1,"fw-600"],[1,"fa","fa-arrow-left","pr-2",3,"click"],[1,"btn-link-2","pr-2",3,"ngClass","click"],[3,"options"],["ngxMasonryItem","","class","card-orden animated",3,"ngClass",4,"ngFor","ngForOf"],["ngxMasonryItem","",1,"card-orden","animated",3,"ngClass"],["matRipple","",3,"click"],[1,"c-header","fs-13","p-3","border-bottom",3,"ngClass"],[1,"text-left"],[1,"fw-600","fs-15"],["style","font-size: 14px !important;","class","badge badge-success",4,"ngIf"],[1,"text-center"],[4,"ngIf","ngIfElse"],["elseTemplate",""],[1,"text-right"],["class","fw-600 badge","style","font-size: 14px !important;",3,"ngClass",4,"ngIf"],[1,"fs-12"],[1,"c-body","border-bottom","p-3","fs-12"],[1,"d-inline-block","text-truncate","w-100"],[3,"elPedido"],[1,"badge","badge-success",2,"font-size","14px !important"],[1,"fa","fa-clock-o","fa-2x"],[1,"fs-11"],[1,"fs-20","fw-600"],["elseConRepartidor",""],[1,"fa","fa-user","p-1"],[1,"fw-600","badge",2,"font-size","14px !important",3,"ngClass"],[1,"animated","fadeIn"],["matRipple","","type","button",1,"btn","btn-secondary","btn-card-lista",3,"ngClass","click"],[1,"fa","fa-arrow-left",3,"ngClass"],[1,"d-flex","content-body-mapa"],[1,"xw-220","border-right","p-3","overflow-auto","card-lista",3,"ngClass"],["ngxMasonryItem","","class","card-orden xw-50 animated",3,"ngClass",4,"ngFor","ngForOf"],[1,"w-100","h-100"],[3,"listaPedidos","pedidoOpen"],[1,"card-resumen",3,"ngClass"],[1,"d-flex","bg-white","w-100"],[1,"border-right","p-2",2,"min-width","320px",3,"ngClass"],["elseMetodoPago",""],[1,"w-100","p-2"],["mat-table","",1,"table-model-1","w-100",3,"dataSource"],["matColumnDef","n"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","pedido"],["matColumnDef","direccion"],["matColumnDef","repartidor"],["matColumnDef","tiempo"],["matColumnDef","importe"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","","class","xCursor",3,"click",4,"matRowDef","matRowDefColumns"],["ngxMasonryItem","",1,"card-orden","xw-50","animated",3,"ngClass"],[1,"c-header","fs-13","p-3","border-bottom"],[1,"c-body","border-bottom","p-3","fs-11"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],[1,"text-secondary"],[1,"fw-100"],["class","mb-1",4,"ngFor","ngForOf"],[1,"mb-1"],[1,"fw-600","badge",3,"ngClass"],[1,"text-secondary","pl-1"],["mat-header-row",""],["mat-row",""],["matColumnDef","Metodo"],[1,"fw-600","badge",2,"font-size","13px !important",3,"ngClass"],[1,"fw-600","fs-14","text-secondary"],[1,"fw-100","text-secondary"],[1,"badge",3,"ngClass"],[1,"text-secondary","fw-600"],["mat-row","",1,"xCursor",3,"click"]],template:function(t,e){1&t&&(l.Sb(0,"mat-drawer-container",0),l.Sb(1,"mat-drawer",1,2),l.Zb("closedStart",(function(){return e.showPanelRigth=!1})),l.Sb(3,"div",3),l.Bc(4,mt,5,4,"div",4),l.Sb(5,"div",5),l.Nb(6,"app-com-resumen-all-pedidos",6),l.Rb(),l.Rb(),l.Rb(),l.Sb(7,"div",7),l.Sb(8,"div",8),l.Sb(9,"div"),l.Bc(10,vt,2,4,"span",9),l.Rb(),l.Sb(11,"div"),l.Sb(12,"span",10),l.Zb("click",(function(){return e.resumenOrdenesPendientes()})),l.Dc(13,"Resumen"),l.Rb(),l.Rb(),l.Rb(),l.Bc(14,jt,3,3,"div",4),l.Bc(15,_e,37,24,"div",11),l.Rb(),l.Rb()),2&t&&(l.Ab(1),l.jc("opened",e.showPanelRigth),l.Ab(3),l.jc("ngIf",e.listResumenAll),l.Ab(2),l.jc("listResumen",e.listResumenAll),l.Ab(4),l.jc("ngForOf",e.listBtnToolbar),l.Ab(4),l.jc("ngIf",e.showVistaLista),l.Ab(1),l.jc("ngIf",!e.showVistaLista))},directives:[S.b,S.a,n.m,rt,n.l,n.k,q,H,_.i,at.a,ht,bt.j,bt.c,bt.e,bt.b,bt.g,bt.i,bt.d,bt.a,bt.f,bt.h],pipes:[n.e,n.u],styles:[".xh-body-odenen[_ngcontent-%COMP%]{height:-webkit-calc(100vh - 58px);height:calc(100vh - 58px)}.content-body-mapa[_ngcontent-%COMP%]{height:-webkit-calc(100vh - 110px);height:calc(100vh - 110px);overflow:auto}.masonry-item[_ngcontent-%COMP%]{width:200px;background:#20b2aa}.card-orden[_ngcontent-%COMP%], .masonry-item[_ngcontent-%COMP%]{margin-right:10px;margin-bottom:10px}.card-orden[_ngcontent-%COMP%]{border-radius:5px;border:1px solid #bdbdbd;width:310px;background:#eee;-webkit-filter:drop-shadow(1px 1px 2px #444);filter:drop-shadow(1px 1px 2px #444);-webkit-transition:all .3s ease-in;transition:all .3s ease-in}.card-orden.xw-50[_ngcontent-%COMP%]{width:220px}.card-encabezado[_ngcontent-%COMP%]{background-color:#37474f}.xw-220[_ngcontent-%COMP%]{min-width:270px}.card-orden.quitar-orden[_ngcontent-%COMP%]{margin-left:-200px;opacity:0}.c-header[_ngcontent-%COMP%]{-webkit-transition:all .3s;transition:all .3s;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;border-radius:5px 5px 0 0;background:#e0e0e0}.c-header.verde[_ngcontent-%COMP%]{background:#90ee90}.c-header.amarillo[_ngcontent-%COMP%]{background:khaki}.c-header.rojo[_ngcontent-%COMP%]{background:#f08080}.c-header.programado[_ngcontent-%COMP%]{background:#80deea}.c-etiqueta-tiempo.verde[_ngcontent-%COMP%]{background:#90ee90}.c-etiqueta-tiempo.amarillo[_ngcontent-%COMP%]{background:khaki}.c-etiqueta-tiempo.rojo[_ngcontent-%COMP%]{background:#f08080}.c-body[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .c-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.card-resumen[_ngcontent-%COMP%]{width:-webkit-calc(100% - 270px);width:calc(100% - 270px);position:fixed;bottom:0;border-top:2px solid #37474f;max-height:250px;overflow:auto;-webkit-transition:all .2s ease-in;transition:all .2s ease-in}.card-resumen.ampliar[_ngcontent-%COMP%]{width:100%}.card-lista[_ngcontent-%COMP%]{margin-left:0;background-color:#455a64;-webkit-transition:all .2s ease-in;transition:all .2s ease-in}.card-lista.cerrar[_ngcontent-%COMP%]{margin-left:-270px}.btn-card-lista[_ngcontent-%COMP%]{position:fixed;left:230px;z-index:1;-webkit-transition:all .2s ease-in;transition:all .2s ease-in}.btn-card-lista.cerrar[_ngcontent-%COMP%]{left:0}"]}),Pe),De=((ke=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"ngOnInit",value:function(){}}]),t}()).\u0275fac=function(t){return new(t||ke)},ke.\u0275cmp=l.Gb({type:ke,selectors:[["app-seguimiento"]],decls:2,vars:0,template:function(t,e){1&t&&(l.Sb(0,"p"),l.Dc(1,"seguimiento works!"),l.Rb())},styles:[""]}),ke),Ie=((Ce=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"ngOnInit",value:function(){}}]),t}()).\u0275fac=function(t){return new(t||Ce)},Ce.\u0275cmp=l.Gb({type:Ce,selectors:[["app-dashboard"]],decls:2,vars:0,template:function(t,e){1&t&&(l.Sb(0,"p"),l.Dc(1,"dashboard works!"),l.Rb())},styles:[""]}),Ce),Ae=je,Oe=je,xe=je,Te=Me,Ee=Be;function je(t){for(var e=new Array(t),i=-1;++i<t;)e[i]=0;return e}function Me(t,e){for(var i=t.length;i<e;)t[i++]=0;return t}function Be(t,e){if(e>32)throw new Error("invalid array width!");return t}function Fe(t){this.length=t,this.subarrays=1,this.width=8,this.masks={0:0},this[0]=Ae(t)}"undefined"!=typeof Uint8Array&&(Ae=function(t){return new Uint8Array(t)},Oe=function(t){return new Uint16Array(t)},xe=function(t){return new Uint32Array(t)},Te=function(t,e){if(t.length>=e)return t;var i=new t.constructor(e);return i.set(t),i},Ee=function(t,e){var i;switch(e){case 16:i=Oe(t.length);break;case 32:i=xe(t.length);break;default:throw new Error("invalid array width!")}return i.set(t),i}),Fe.prototype.lengthen=function(t){var e,i;for(e=0,i=this.subarrays;e<i;++e)this[e]=Te(this[e],t);this.length=t},Fe.prototype.add=function(){var t,e,i,o,n;for(o=0,n=this.subarrays;o<n;++o)if(i=(~(t=this.masks[o])&t+1)>>>0,!((e=this.width-32*o)>=32)||i)return e<32&&i&1<<e&&(this[o]=Ee(this[o],e<<=1),this.width=32*o+e),this.masks[o]|=i,{offset:o,one:i};return this[this.subarrays]=Ae(this.length),this.masks[this.subarrays]=1,this.width+=8,{offset:this.subarrays++,one:1}},Fe.prototype.copy=function(t,e){var i,o;for(i=0,o=this.subarrays;i<o;++i)this[i][t]=this[i][e]},Fe.prototype.truncate=function(t){var e,i;for(e=0,i=this.subarrays;e<i;++e)for(var o=this.length-1;o>=t;o--)this[e][o]=0;this.length=t},Fe.prototype.zero=function(t){var e,i;for(e=0,i=this.subarrays;e<i;++e)if(this[e][t])return!1;return!0},Fe.prototype.zeroExcept=function(t,e,i){var o,n;for(o=0,n=this.subarrays;o<n;++o)if(o===e?this[o][t]&i:this[o][t])return!1;return!0},Fe.prototype.zeroExceptMask=function(t,e){var i,o;for(i=0,o=this.subarrays;i<o;++i)if(this[i][t]&e[i])return!1;return!0},Fe.prototype.only=function(t,e,i){var o,n;for(o=0,n=this.subarrays;o<n;++o)if(this[o][t]!=(o===e?i:0))return!1;return!0},Fe.prototype.onlyExcept=function(t,e,i,o,n){var r,a,s;for(a=0,s=this.subarrays;a<s;++a)if(r=this[a][t],a===e&&(r&=i),r!=(a===o?n:0))return!1;return!0};var Le={array8:je,array16:je,array32:je,arrayLengthen:Me,arrayWiden:Be,bitarray:Fe},Ne=function(t,e){return function(i){var o=i.length;return[t.left(i,e,0,o),t.right(i,e,0,o)]}},ze=function(t,e){var i=e[0],o=e[1];return function(e){var n=e.length;return[t.left(e,i,0,n),t.left(e,o,0,n)]}},We=function(t){return[0,t.length]},$e=function(t){return t},Qe=function(){return null},qe=function(){return 0};function He(t){function e(t,e,o){for(var n=o-e,r=1+(n>>>1);--r>0;)i(t,r,n,e);return t}function i(e,i,o,n){for(var r,a=e[--n+i],s=t(a);(r=i<<1)<=o&&(r<o&&t(e[n+r])>t(e[n+r+1])&&r++,!(s<=t(e[n+r])));)e[n+i]=e[n+r],i=r;e[n+i]=a}return e.sort=function(t,e,o){for(var n,r=o-e;--r>0;)n=t[e],t[e]=t[e+r],t[e+r]=n,i(t,1,r,e);return t},e}var Ge=He($e);Ge.by=He;var Ze=Ge;function Ue(t){var e=Ze.by(t);return function(i,o,n,r){var a,s,c,d=new Array(r=Math.min(n-o,r));for(s=0;s<r;++s)d[s]=i[o++];if(e(d,0,r),o<n){a=t(d[0]);do{t(c=i[o])>a&&(d[0]=c,a=t(e(d,0,r)[0]))}while(++o<n)}return d}}var Ve=Ue($e);Ve.by=Ue;var Xe=Ve;function Je(t){function e(e,i,o,n){for(;o<n;){var r=o+n>>>1;i<t(e[r])?n=r:o=r+1}return o}return e.right=e,e.left=function(e,i,o,n){for(;o<n;){var r=o+n>>>1;t(e[r])<i?o=r+1:n=r}return o},e}var Ke=Je($e);Ke.by=Je;var Ye=Ke,ti=function(t,e,i){for(var o=0,n=e.length,r=i?JSON.parse(JSON.stringify(t)):new Array(n);o<n;++o)r[o]=t[e[o]];return r},ei=function(t){return t+1},ii=function(t){return t-1},oi=function(t){return function(e,i){return e+ +t(i)}},ni=function(t){return function(e,i){return e-t(i)}},ri=function(t,e){var i=t[e];return"function"==typeof i?i.call(t):i},ai=/\[([\w\d]+)\]/g,si=function(t,e){return function(t,e,i,o,n){for(n in o=(i=i.split(".")).splice(-1,1),i)e=e[i[n]]=e[i[n]]||{};return t(e,o)}(ri,t,e.replace(ai,".$1"))};di.heap=Ze,di.heapselect=Xe,di.bisect=Ye,di.permute=ti;var ci=di;function di(){var t,e={add:c,remove:d,dimension:p,groupAll:f,size:h,all:b,allFiltered:m,onChange:g,isElementFiltered:u},i=[],o=0,n=[],r=[],a=[],s=[];function c(n){var a=o,s=n.length;return s&&(i=i.concat(n),t.lengthen(o+=s),r.forEach((function(t){t(n,a,s)})),v("dataAdded")),e}function d(e){for(var r,s=new Array(o),c=[],d="function"==typeof e,l=0,u=0;l<o;++l)r=l,(d?e(i[r],r):t.zero(r))?(c.push(l),s[l]=-1):s[l]=u++;n.forEach((function(t){t(-1,-1,[],c,!0)})),a.forEach((function(t){t(s)}));for(var p=0,f=0;p<o;++p)-1!==s[p]&&(p!==f&&(t.copy(f,p),i[f]=i[p]),++f);i.length=o=f,t.truncate(f),v("dataRemoved")}function l(e){var i,o,n,r,a=Array(t.subarrays);for(i=0;i<t.subarrays;i++)a[i]=-1;for(o=0,n=e.length;o<n;o++)a[(r=e[o].id())>>7]&=~(1<<(63&r));return a}function u(e,i){var o=l(i||[]);return t.zeroExceptMask(e,o)}function p(e,s){if("string"==typeof e){var c=e;e=function(t){return si(t,c)}}var d,l,u,p,f,h,b,m,g,y,R,S,_,C,k={filter:function(t){return null==t?z():Array.isArray(t)?N(t):"function"==typeof t?W(t):L(t)},filterExact:L,filterRange:N,filterFunction:W,filterAll:z,currentFilter:function(){return S},hasCurrentFilter:function(){return _},top:function(e,o){var n,r=[],a=x,c=0;for(o&&o>0&&(c=o);--a>=O&&e>0;)t.zero(n=h[a])&&(c>0?--c:(r.push(i[n]),--e));if(s)for(a=0;a<P.length&&e>0;a++)t.zero(n=P[a])&&(c>0?--c:(r.push(i[n]),--e));return r},bottom:function(e,o){var n,r,a=[],c=0;if(o&&o>0&&(c=o),s)for(n=0;n<P.length&&e>0;n++)t.zero(r=P[n])&&(c>0?--c:(a.push(i[r]),--e));for(n=O;n<x&&e>0;)t.zero(r=h[n])&&(c>0?--c:(a.push(i[r]),--e)),n++;return a},group:Q,groupAll:function(){var t=Q(Qe),e=t.all;return delete t.all,delete t.top,delete t.order,delete t.orderNatural,delete t.size,t.value=function(){return e()[0].value},t},dispose:q,remove:q,accessor:e,id:function(){return p}},P=[],w=function(t){return ui(t).sort((function(t,e){var i=b[t],o=b[e];return i<o?-1:i>o?1:t-e}))},D=We,I=[],A=[],O=0,x=0,T=0;r.unshift(j),r.push(M),a.push(B);var E=t.add();function j(i,n,r){var a,c;if(s){T=0,$=0,C=[];for(var l=0;l<i.length;l++)for($=0,C=e(i[l]);$<C.length;$++)T++;b=[],a=ui(i.length),c=li(T,1);for(var p=ui(T),v=0,S=0;S<i.length;S++)if((C=e(i[S])).length)for(a[S]=C.length,$=0;$<C.length;$++)b.push(C[$]),p[v]=S,v++;else a[S]=0,P.push(S+n);var _=w(T);b=ti(b,_),m=ti(p,_)}else b=i.map(e),m=w(r),b=ti(b,m);var k,I,A,E=D(b),j=E[0],M=E[1];if(s)if(r=T,R)for(k=0;k<r;++k)R(b[k],k)||(0==--a[m[k]]&&(t[u][m[k]+n]|=d),c[k]=1);else{for(I=0;I<j;++I)0==--a[m[I]]&&(t[u][m[I]+n]|=d),c[I]=1;for(A=M;A<r;++A)0==--a[m[A]]&&(t[u][m[A]+n]|=d),c[A]=1}else if(R)for(k=0;k<r;++k)R(b[k],k)||(t[u][m[k]+n]|=d);else{for(I=0;I<j;++I)t[u][m[I]+n]|=d;for(A=M;A<r;++A)t[u][m[A]+n]|=d}if(!n)return f=b,h=m,g=a,y=c,O=j,void(x=M);var B,F=f,L=h,N=y,z=0;if(l=0,s&&(B=n,n=F.length,r=T),f=new Array(s?n+r:o),h=s?new Array(n+r):li(o,o),s&&(y=li(n+r,1)),s){var W=g.length;g=Le.arrayLengthen(g,o);for(var $=0;$+W<o;$++)g[$+W]=a[$]}for(var Q=0;l<n&&z<r;++Q)F[l]<b[z]?(f[Q]=F[l],s&&(y[Q]=N[l]),h[Q]=L[l++]):(f[Q]=b[z],s&&(y[Q]=c[z]),h[Q]=m[z++]+(s?B:n));for(;l<n;++l,++Q)f[Q]=F[l],s&&(y[Q]=N[l]),h[Q]=L[l];for(;z<r;++z,++Q)f[Q]=b[z],s&&(y[Q]=c[z]),h[Q]=m[z]+(s?B:n);E=D(f),O=E[0],x=E[1]}function M(t,e,i){I.forEach((function(t){t(b,m,e,i)})),b=m=null}function B(t){if(s){for(var e=0,i=0;e<P.length;e++)-1!==t[P[e]]&&(P[i]=t[P[e]],i++);for(P.length=i,e=0,i=0;e<o;e++)-1!==t[e]&&(i!==e&&(g[i]=g[e]),i++);g=g.slice(0,i)}for(var n,r=f.length,a=0,c=0;a<r;++a)-1!==t[n=h[a]]&&(a!==c&&(f[c]=f[a]),h[c]=t[n],s&&(y[c]=y[a]),++c);for(f.length=c,s&&(y=y.slice(0,c));c<r;)h[c++]=0;var d=D(f);O=d[0],x=d[1]}function F(e){var i=e[0],o=e[1];if(R)return R=null,$((function(t,e){return i<=e&&e<o}),0===e[0]&&e[1]===f.length),O=i,x=o,k;var r,a,c,l=[],p=[],b=[],m=[];if(i<O)for(r=i,a=Math.min(O,o);r<a;++r)l.push(h[r]),b.push(r);else if(i>O)for(r=O,a=Math.min(i,x);r<a;++r)p.push(h[r]),m.push(r);if(o>x)for(r=Math.max(i,x),a=o;r<a;++r)l.push(h[r]),b.push(r);else if(o<x)for(r=Math.max(O,o),a=x;r<a;++r)p.push(h[r]),m.push(r);if(s){var S=[],_=[];for(r=0;r<l.length;r++)g[l[r]]++,y[b[r]]=0,1===g[l[r]]&&(t[u][l[r]]^=d,S.push(l[r]));for(r=0;r<p.length;r++)g[p[r]]--,y[m[r]]=1,0===g[p[r]]&&(t[u][p[r]]^=d,_.push(p[r]));if(l=S,p=_,D===We)for(r=0;r<P.length;r++)t[u][c=P[r]]&d&&(t[u][c]^=d,l.push(c));else for(r=0;r<P.length;r++)t[u][c=P[r]]&d||(t[u][c]^=d,p.push(c))}else{for(r=0;r<l.length;r++)t[u][l[r]]^=d;for(r=0;r<p.length;r++)t[u][p[r]]^=d}return O=i,x=o,n.forEach((function(t){t(d,u,l,p)})),v("filtered"),k}function L(t){return S=t,_=!0,F((D=Ne(Ye,t))(f))}function N(t){return S=t,_=!0,F((D=ze(Ye,t))(f))}function z(){return S=void 0,_=!1,F((D=We)(f))}function W(t){S=t,_=!0,R=t,D=We,$(t,!1);var e=D(f);return O=e[0],x=e[1],k}function $(e,i){var o,r,a,c=[],p=[],b=[],m=[],R=f.length;if(!s)for(o=0;o<R;++o)!(t[u][r=h[o]]&d)^!!(a=e(f[o],o))&&(a?c.push(r):p.push(r));if(s)for(o=0;o<R;++o)e(f[o],o)?(c.push(h[o]),b.push(o)):(p.push(h[o]),m.push(o));if(s){var S=[],_=[];for(o=0;o<c.length;o++)1===y[b[o]]&&(g[c[o]]++,y[b[o]]=0,1===g[c[o]]&&(t[u][c[o]]^=d,S.push(c[o])));for(o=0;o<p.length;o++)0===y[m[o]]&&(g[p[o]]--,y[m[o]]=1,0===g[p[o]]&&(t[u][p[o]]^=d,_.push(p[o])));if(c=S,p=_,i)for(o=0;o<P.length;o++)t[u][r=P[o]]&d&&(t[u][r]^=d,c.push(r));else for(o=0;o<P.length;o++)t[u][r=P[o]]&d||(t[u][r]^=d,p.push(r))}else{for(o=0;o<c.length;o++)t[u][c[o]]&d&&(t[u][c[o]]&=l);for(o=0;o<p.length;o++)t[u][p[o]]&d||(t[u][p[o]]|=d)}n.forEach((function(t){t(d,u,c,p)})),v("filtered")}function Q(e){var r={top:F,all:B,reduce:L,reduceCount:N,reduceSum:z,order:W,orderNatural:$,size:Q,dispose:q,remove:q};A.push(r);var c,p,b,m,g,v,y,R,S=8,_=pi(S),C=0,k=Qe,P=Qe,w=!0,D=e===Qe;function O(r,a,d,h){s&&(R=d,d=f.length-r.length,h=r.length);var b,m,I,A,O,x,B=c,F=s?[]:li(C,_),L=g,N=v,z=y,W=C,$=0,Q=0;for(w&&(L=z=Qe),w&&(N=z=Qe),c=new Array(C),C=0,p=s?W?p:[]:W>1?Le.arrayLengthen(p,o):li(o,_),W&&(I=(m=B[0]).key);Q<h&&!((A=e(r[Q]))>=A);)++Q;for(;Q<h;){for(m&&I<=A?(O=m,x=I,F[$]=C,(m=B[++$])&&(I=m.key)):(O={key:A,value:z()},x=A),c[C]=O;A<=x&&(b=a[Q]+(s?R:d),s?p[b]?p[b].push(C):p[b]=[C]:p[b]=C,O.value=L(O.value,i[b],!0),t.zeroExcept(b,u,l)||(O.value=N(O.value,i[b],!1)),!(++Q>=h));)A=e(r[Q]);H()}for(;$<W;)c[F[$]=C]=B[$++],H();if(s)for(var q=0;q<o;q++)p[q]||(p[q]=[]);if(C>$)if(s)for($=0;$<R;++$)for(q=0;q<p[$].length;q++)p[$][q]=F[p[$][q]];else for($=0;$<d;++$)p[$]=F[p[$]];function H(){s?C++:++C===_&&(F=Le.arrayWiden(F,S<<=1),p=Le.arrayWiden(p,S),_=pi(S))}b=n.indexOf(k),C>1||s?(k=T,P=j):(!C&&D&&(C=1,c=[{key:null,value:z()}]),1===C?(k=E,P=M):(k=Qe,P=Qe),p=null),n[b]=k}function x(t){if(C>1||s){var e,i,r,a=C,d=c,l=li(a,a);if(s){for(e=0,r=0;e<o;++e)if(-1!==t[e]){for(p[r]=p[e],i=0;i<p[r].length;i++)l[p[r][i]]=1;++r}}else for(e=0,r=0;e<o;++e)-1!==t[e]&&(l[p[r]=p[e]]=1,++r);for(c=[],C=0,e=0;e<a;++e)l[e]&&(l[e]=C++,c.push(d[e]));if(C>1||s)if(s)for(e=0;e<r;++e)for(i=0;i<p[e].length;++i)p[e][i]=l[p[e][i]];else for(e=0;e<r;++e)p[e]=l[p[e]];else p=null;n[n.indexOf(k)]=C>1||s?(P=j,k=T):1===C?(P=M,k=E):P=k=Qe}else if(1===C){if(D)return;for(var u=0;u<o;++u)if(-1!==t[u])return;c=[],C=0,n[n.indexOf(k)]=k=P=Qe}}function T(e,o,n,r,a){var f,h,b,m,y;if(!(e===d&&o===u||w))if(s){for(f=0,m=n.length;f<m;++f)if(t.zeroExcept(b=n[f],u,l))for(h=0;h<p[b].length;h++)(y=c[p[b][h]]).value=g(y.value,i[b],!1,h);for(f=0,m=r.length;f<m;++f)if(t.onlyExcept(b=r[f],u,l,o,e))for(h=0;h<p[b].length;h++)(y=c[p[b][h]]).value=v(y.value,i[b],a,h)}else{for(f=0,m=n.length;f<m;++f)t.zeroExcept(b=n[f],u,l)&&((y=c[p[b]]).value=g(y.value,i[b],!1));for(f=0,m=r.length;f<m;++f)t.onlyExcept(b=r[f],u,l,o,e)&&((y=c[p[b]]).value=v(y.value,i[b],a))}}function E(e,o,n,r,a){if(!(e===d&&o===u||w)){var s,p,f,h=c[0];for(s=0,f=n.length;s<f;++s)t.zeroExcept(p=n[s],u,l)&&(h.value=g(h.value,i[p],!1));for(s=0,f=r.length;s<f;++s)t.onlyExcept(p=r[s],u,l,o,e)&&(h.value=v(h.value,i[p],a))}}function j(){var e,n,r;for(e=0;e<C;++e)c[e].value=y();if(s){for(e=0;e<o;++e)for(n=0;n<p[e].length;n++)(r=c[p[e][n]]).value=g(r.value,i[e],!0,n);for(e=0;e<o;++e)if(!t.zeroExcept(e,u,l))for(n=0;n<p[e].length;n++)(r=c[p[e][n]]).value=v(r.value,i[e],!1,n)}else{for(e=0;e<o;++e)(r=c[p[e]]).value=g(r.value,i[e],!0);for(e=0;e<o;++e)t.zeroExcept(e,u,l)||((r=c[p[e]]).value=v(r.value,i[e],!1))}}function M(){var e,n=c[0];for(n.value=y(),e=0;e<o;++e)n.value=g(n.value,i[e],!0);for(e=0;e<o;++e)t.zeroExcept(e,u,l)||(n.value=v(n.value,i[e],!1))}function B(){return w&&(P(),w=!1),c}function F(t){var e=b(B(),0,c.length,t);return m.sort(e,0,e.length)}function L(t,e,i){return g=t,v=e,y=i,w=!0,r}function N(){return L(ei,ii,qe)}function z(t){return L(oi(t),ni(t),qe)}function W(t){function e(e){return t(e.value)}return b=Xe.by(e),m=Ze.by(e),r}function $(){return W($e)}function Q(){return C}function q(){var t=n.indexOf(k);return t>=0&&n.splice(t,1),(t=I.indexOf(O))>=0&&I.splice(t,1),(t=a.indexOf(x))>=0&&a.splice(t,1),(t=A.indexOf(r))>=0&&A.splice(t,1),r}return arguments.length<1&&(e=$e),n.push(k),I.push(O),a.push(x),O(f,h,0,o),N().orderNatural()}function q(){A.forEach((function(t){t.dispose()}));var e=r.indexOf(j);return e>=0&&r.splice(e,1),(e=r.indexOf(M))>=0&&r.splice(e,1),(e=a.indexOf(B))>=0&&a.splice(e,1),t.masks[u]&=l,z()}return l=~(d=E.one),p=(u=E.offset)<<7|Math.log(d)/Math.log(2),j(i,0,o),M(0,0,o),k}function f(){var e,a,s,c,d={reduce:f,reduceCount:h,reduceSum:function(t){return f(oi(t),ni(t),qe)},value:function(){return l&&(function(){var n;for(e=c(),n=0;n<o;++n)e=a(e,i[n],!0),t.zero(n)||(e=s(e,i[n],!1))}(),l=!1),e},dispose:b,remove:b},l=!0;function u(n,r){var c;if(!l)for(c=r;c<o;++c)e=a(e,i[c],!0),t.zero(c)||(e=s(e,i[c],!1))}function p(o,n,r,c,d){var u,p,f;if(!l){for(u=0,f=r.length;u<f;++u)t.zero(p=r[u])&&(e=a(e,i[p],d));for(u=0,f=c.length;u<f;++u)t.only(p=c[u],n,o)&&(e=s(e,i[p],d))}}function f(t,e,i){return a=t,s=e,c=i,l=!0,d}function h(){return f(ei,ii,qe)}function b(){var t=n.indexOf(p);return t>=0&&n.splice(t,1),(t=r.indexOf(u))>=0&&r.splice(t,1),d}return n.push(p),r.push(u),u(0,0),h()}function h(){return o}function b(){return i}function m(e){var n=[],r=0,a=l(e||[]);for(r=0;r<o;r++)t.zeroExceptMask(r,a)&&n.push(i[r]);return n}function g(t){if("function"==typeof t)return s.push(t),function(){s.splice(s.indexOf(t),1)};console.warn("onChange callback parameter must be a function!")}function v(t){for(var e=0;e<s.length;e++)s[e](t)}return t=new Le.bitarray(0),arguments.length?c(arguments[0]):e}function li(t,e){return(e<257?Le.array8:e<65537?Le.array16:Le.array32)(t)}function ui(t){for(var e=li(t,t),i=-1;++i<t;)e[i]=i;return e}function pi(t){return 8===t?256:16===t?65536:4294967296}var fi=i("M9IT"),hi=["paginatorPedido"];function bi(t,e){if(1&t&&(l.Sb(0,"tr"),l.Sb(1,"td",35),l.Dc(2),l.Rb(),l.Sb(3,"td"),l.Dc(4),l.ec(5,"number"),l.Rb(),l.Rb()),2&t){var i=e.$implicit;l.Ab(2),l.Ec(i.value.descripcion),l.Ab(2),l.Ec(l.gc(5,2,i.value.count,"2."))}}function mi(t,e){if(1&t&&(l.Sb(0,"tr"),l.Sb(1,"td",35),l.Dc(2),l.ec(3,"number"),l.Rb(),l.Sb(4,"td",36),l.Dc(5),l.ec(6,"number"),l.Rb(),l.Rb()),2&t){var i=e.$implicit;l.Ab(2),l.Gc("",i.value.descripcion," (",l.gc(3,3,i.value.count,"2."),") "),l.Ab(3),l.Ec(l.gc(6,6,i.value.importe,".2"))}}function gi(t,e){1&t&&(l.Sb(0,"th",37),l.Dc(1,"Repartidor"),l.Rb())}function vi(t,e){if(1&t&&(l.Sb(0,"td",38),l.Sb(1,"p",39),l.Dc(2),l.ec(3,"titlecase"),l.Rb(),l.Sb(4,"p",8),l.Sb(5,"span",40),l.Dc(6,"Telefono: "),l.Rb(),l.Dc(7),l.Rb(),l.Sb(8,"p",8),l.Sb(9,"span",40),l.Dc(10,"Calificacion: "),l.Rb(),l.Dc(11),l.Rb(),l.Rb()),2&t){var i=e.$implicit;l.Ab(2),l.Fc(" ",l.fc(3,3,i.value.nom_repartidor),""),l.Ab(5),l.Fc("",i.value.telefono," "),l.Ab(4),l.Fc("",i.value.calificacion," ")}}function yi(t,e){1&t&&(l.Sb(0,"th",37),l.Dc(1,"N\xb0 Pedidos"),l.Rb())}function Ri(t,e){if(1&t&&(l.Sb(0,"td",38),l.Dc(1),l.ec(2,"number"),l.Rb()),2&t){var i=e.$implicit;l.Ab(1),l.Fc(" ",l.gc(2,1,i.value.count,"2.")," ")}}function Si(t,e){1&t&&(l.Sb(0,"th",37),l.Dc(1,"Imp. Total"),l.Rb())}function _i(t,e){if(1&t&&(l.Sb(0,"td",38),l.Dc(1),l.ec(2,"number"),l.Rb()),2&t){var i=e.$implicit;l.Ab(1),l.Fc(" ",l.gc(2,1,i.value.importe,".2")," ")}}function Ci(t,e){1&t&&(l.Sb(0,"th",37),l.Dc(1,"Metodo Pago"),l.Rb())}var ki=function(t,e,i){return{"badge-primary":t,"badge-info":e,"badge-secondary":i}};function Pi(t,e){if(1&t&&(l.Sb(0,"div",42),l.Sb(1,"p",8),l.Sb(2,"span",43),l.Dc(3),l.ec(4,"titlecase"),l.Rb(),l.Sb(5,"span",44),l.Dc(6),l.ec(7,"number"),l.Rb(),l.Rb(),l.Sb(8,"p",8),l.Sb(9,"span",39),l.Dc(10,"Importe: "),l.Rb(),l.Sb(11,"span",8),l.Dc(12),l.ec(13,"number"),l.Rb(),l.Rb(),l.Rb()),2&t){var i=e.$implicit;l.Ab(2),l.jc("ngClass",l.qc(12,ki,3===i.idtipo_pago,2===i.idtipo_pago,1===i.idtipo_pago)),l.Ab(1),l.Fc(" ",l.fc(4,4,i.descripcion)," : "),l.Ab(3),l.Ec(l.gc(7,6,i.num_pedidos,"2.")),l.Ab(6),l.Fc("",l.gc(13,9,i.importe,".2")," ")}}function wi(t,e){if(1&t&&(l.Sb(0,"td",38),l.Bc(1,Pi,14,16,"div",41),l.Rb()),2&t){var i=e.$implicit;l.Ab(1),l.jc("ngForOf",i.value.metodoPago)}}function Di(t,e){1&t&&l.Nb(0,"tr",45)}function Ii(t,e){1&t&&l.Nb(0,"tr",46)}function Ai(t,e){1&t&&(l.Sb(0,"th",37),l.Dc(1,"Cliente"),l.Rb())}function Oi(t,e){if(1&t&&(l.Sb(0,"td",38),l.Sb(1,"p",39),l.Dc(2),l.ec(3,"titlecase"),l.Rb(),l.Sb(4,"p",8),l.Sb(5,"span",40),l.Dc(6,"Pedido: "),l.Rb(),l.Dc(7),l.Rb(),l.Rb()),2&t){var i=e.$implicit;l.Ab(2),l.Fc(" ",l.fc(3,2,i.nom_cliente),""),l.Ab(5),l.Fc(" #",i.idpedido," ")}}function xi(t,e){1&t&&(l.Sb(0,"th",37),l.Dc(1,"Tarjeta"),l.Rb())}function Ti(t,e){if(1&t&&(l.Sb(0,"td",38),l.Dc(1),l.Rb()),2&t){var i=e.$implicit;l.Ab(1),l.Fc(" ",i.data_pago_pwa.brand," ")}}function Ei(t,e){1&t&&(l.Sb(0,"th",51),l.Dc(1,"Imp. Total"),l.Rb())}function ji(t,e){if(1&t&&(l.Sb(0,"td",52),l.Dc(1),l.ec(2,"number"),l.Rb()),2&t){var i=e.$implicit;l.Ab(1),l.Fc(" ",l.gc(2,1,i.importe,".2")," ")}}function Mi(t,e){1&t&&l.Nb(0,"tr",45)}function Bi(t,e){1&t&&l.Nb(0,"tr",46)}function Fi(t,e){if(1&t&&(l.Sb(0,"table",21),l.Qb(1,47),l.Bc(2,Ai,2,0,"th",23),l.Bc(3,Oi,8,4,"td",24),l.Pb(),l.Qb(4,48),l.Bc(5,xi,2,0,"th",23),l.Bc(6,Ti,2,1,"td",24),l.Pb(),l.Qb(7,26),l.Bc(8,Ei,2,0,"th",49),l.Bc(9,ji,3,4,"td",50),l.Pb(),l.Bc(10,Mi,1,0,"tr",28),l.Bc(11,Bi,1,0,"tr",29),l.Rb()),2&t){var i=l.dc();l.jc("dataSource",i.dataPedidoPagadoTarjeta),l.Ab(10),l.jc("matHeaderRowDef",i.displayedColumnsPagoTarjeta),l.Ab(1),l.jc("matRowDefColumns",i.displayedColumnsPagoTarjeta)}}function Li(t,e){1&t&&(l.Sb(0,"th",37),l.Dc(1,"#"),l.Rb())}function Ni(t,e){if(1&t&&(l.Sb(0,"td",38),l.Dc(1),l.ec(2,"number"),l.Rb()),2&t){var i=e.$implicit;l.Ab(1),l.Fc(" ",l.gc(2,1,i.n,"2.")," ")}}function zi(t,e){1&t&&(l.Sb(0,"th",37),l.Dc(1,"Producto"),l.Rb())}function Wi(t,e){if(1&t&&(l.Sb(0,"td",38),l.Dc(1),l.Rb()),2&t){var i=e.$implicit;l.Ab(1),l.Fc(" ",i.des," ")}}function $i(t,e){1&t&&(l.Sb(0,"th",37),l.Dc(1,"Seccion"),l.Rb())}function Qi(t,e){if(1&t&&(l.Sb(0,"td",38),l.Dc(1),l.Rb()),2&t){var i=e.$implicit;l.Ab(1),l.Fc(" ",i.seccion," ")}}function qi(t,e){1&t&&(l.Sb(0,"th",51),l.Dc(1,"Precio"),l.Rb())}function Hi(t,e){if(1&t&&(l.Sb(0,"td",52),l.Dc(1),l.ec(2,"number"),l.Rb()),2&t){var i=e.$implicit;l.Ab(1),l.Fc(" ",l.gc(2,1,i.precio_unitario,".2")," ")}}function Gi(t,e){1&t&&(l.Sb(0,"th",51),l.Dc(1,"Cantidad"),l.Rb())}function Zi(t,e){if(1&t&&(l.Sb(0,"td",52),l.Sb(1,"span",39),l.Dc(2),l.ec(3,"number"),l.Rb(),l.Rb()),2&t){var i=e.$implicit;l.Ab(2),l.Ec(l.gc(3,1,i.cantidad_seleccionada,"2."))}}function Ui(t,e){1&t&&(l.Sb(0,"th",51),l.Dc(1,"Imp. Total"),l.Rb())}function Vi(t,e){if(1&t&&(l.Sb(0,"td",52),l.Sb(1,"span",39),l.Dc(2),l.ec(3,"number"),l.Rb(),l.Rb()),2&t){var i=e.$implicit;l.Ab(2),l.Ec(l.gc(3,1,i.precio_total,".2"))}}function Xi(t,e){1&t&&l.Nb(0,"tr",45)}function Ji(t,e){1&t&&l.Nb(0,"tr",46)}function Ki(t,e){if(1&t&&(l.Sb(0,"table",21),l.Qb(1,53),l.Bc(2,Li,2,0,"th",23),l.Bc(3,Ni,3,4,"td",24),l.Pb(),l.Qb(4,54),l.Bc(5,zi,2,0,"th",23),l.Bc(6,Wi,2,1,"td",24),l.Pb(),l.Qb(7,55),l.Bc(8,$i,2,0,"th",23),l.Bc(9,Qi,2,1,"td",24),l.Pb(),l.Qb(10,56),l.Bc(11,qi,2,0,"th",49),l.Bc(12,Hi,3,4,"td",50),l.Pb(),l.Qb(13,57),l.Bc(14,Gi,2,0,"th",49),l.Bc(15,Zi,4,4,"td",50),l.Pb(),l.Qb(16,26),l.Bc(17,Ui,2,0,"th",49),l.Bc(18,Vi,4,4,"td",50),l.Pb(),l.Bc(19,Xi,1,0,"tr",28),l.Bc(20,Ji,1,0,"tr",29),l.Rb()),2&t){var i=l.dc();l.jc("dataSource",i.dataResumenAll),l.Ab(19),l.jc("matHeaderRowDef",i.displayedColumnsTopProducto),l.Ab(1),l.jc("matRowDefColumns",i.displayedColumnsTopProducto)}}function Yi(t,e){1&t&&(l.Sb(0,"th",37),l.Dc(1,"#"),l.Rb())}function to(t,e){if(1&t&&(l.Sb(0,"td",38),l.Dc(1),l.ec(2,"number"),l.Rb()),2&t){var i=e.$implicit;l.Ab(1),l.Fc(" ",l.gc(2,1,i.n,"2.")," ")}}function eo(t,e){1&t&&(l.Sb(0,"th",37),l.Dc(1,"Producto"),l.Rb())}function io(t,e){if(1&t&&(l.Sb(0,"td",38),l.Sb(1,"p",39),l.Dc(2),l.Rb(),l.Sb(3,"p",60),l.Dc(4),l.Rb(),l.Sb(5,"p",60),l.Dc(6),l.Rb(),l.Rb()),2&t){var i=e.$implicit;l.Ab(2),l.Fc(" #",i.idpedido,""),l.Ab(2),l.Fc(" ",i.fecha," "),l.Ab(2),l.Fc(" ",i.hora,"")}}function oo(t,e){1&t&&(l.Sb(0,"th",37),l.Dc(1,"Cliente"),l.Rb())}function no(t,e){if(1&t&&(l.Sb(0,"td",38),l.Sb(1,"p"),l.Dc(2),l.ec(3,"titlecase"),l.Rb(),l.Sb(4,"p",60),l.Dc(5),l.Rb(),l.Sb(6,"p",60),l.Dc(7),l.Rb(),l.Rb()),2&t){var i=e.$implicit;l.Ab(2),l.Fc(" ",l.fc(3,3,i.referencia),""),l.Ab(3),l.Fc(" ",i.json_datos_delivery.p_header.arrDatosDelivery.direccion,""),l.Ab(2),l.Fc(" ",i.json_datos_delivery.p_header.arrDatosDelivery.telefono,"")}}function ro(t,e){1&t&&(l.Sb(0,"th",51),l.Dc(1,"Repartidor"),l.Rb())}function ao(t,e){1&t&&(l.Qb(0),l.Dc(1," Cliente Recoge "),l.Pb())}function so(t,e){if(1&t&&(l.Dc(0),l.ec(1,"titlecase")),2&t){var i=l.dc().$implicit;l.Fc(" ",l.fc(1,1,i.nom_repartidor)," ")}}function co(t,e){if(1&t&&(l.Sb(0,"td",38),l.Bc(1,ao,2,0,"ng-container",61),l.Bc(2,so,2,3,"ng-template",null,62,l.Cc),l.Rb()),2&t){var i=e.$implicit,o=l.tc(3);l.Ab(1),l.jc("ngIf",i.json_datos_delivery.p_header.arrDatosDelivery.pasoRecoger)("ngIfElse",o)}}function lo(t,e){1&t&&(l.Sb(0,"th",51),l.Dc(1,"Metodo Pago"),l.Rb())}function uo(t,e){if(1&t&&(l.Sb(0,"td",38),l.Sb(1,"span",43),l.Dc(2),l.ec(3,"titlecase"),l.Rb(),l.Rb()),2&t){var i=e.$implicit;l.Ab(1),l.jc("ngClass",l.qc(4,ki,3===i.json_datos_delivery.p_header.arrDatosDelivery.metodoPago.idtipo_pago,2===i.json_datos_delivery.p_header.arrDatosDelivery.metodoPago.idtipo_pago,1===i.json_datos_delivery.p_header.arrDatosDelivery.metodoPago.idtipo_pago)),l.Ab(1),l.Fc(" ",l.fc(3,2,i.json_datos_delivery.p_header.arrDatosDelivery.metodoPago.descripcion)," : ")}}function po(t,e){1&t&&(l.Sb(0,"th",51),l.Dc(1,"Imp. Total"),l.Rb())}function fo(t,e){if(1&t&&(l.Sb(0,"td",52),l.Sb(1,"span",39),l.Dc(2),l.ec(3,"number"),l.Rb(),l.Rb()),2&t){var i=e.$implicit;l.Ab(2),l.Ec(l.gc(3,1,i.total_r,".2"))}}function ho(t,e){1&t&&l.Nb(0,"tr",45)}function bo(t,e){1&t&&l.Nb(0,"tr",46)}function mo(t,e){if(1&t&&(l.Sb(0,"table",21),l.Qb(1,53),l.Bc(2,Yi,2,0,"th",23),l.Bc(3,to,3,4,"td",24),l.Pb(),l.Qb(4,58),l.Bc(5,eo,2,0,"th",23),l.Bc(6,io,7,3,"td",24),l.Pb(),l.Qb(7,47),l.Bc(8,oo,2,0,"th",23),l.Bc(9,no,8,5,"td",24),l.Pb(),l.Qb(10,22),l.Bc(11,ro,2,0,"th",49),l.Bc(12,co,4,2,"td",24),l.Pb(),l.Qb(13,59),l.Bc(14,lo,2,0,"th",49),l.Bc(15,uo,4,8,"td",24),l.Pb(),l.Qb(16,26),l.Bc(17,po,2,0,"th",49),l.Bc(18,fo,4,4,"td",50),l.Pb(),l.Bc(19,ho,1,0,"tr",28),l.Bc(20,bo,1,0,"tr",29),l.Rb()),2&t){var i=l.dc();l.jc("dataSource",i.dataPedidosAll),l.Ab(19),l.jc("matHeaderRowDef",i.displayedColumnsAllPedidos),l.Ab(1),l.jc("matRowDefColumns",i.displayedColumnsAllPedidos)}}var go,vo,yo=function(){return[5,10,20]},Ro=((go=function(){function t(e){_classCallCheck(this,t),this.comercioService=e,this.dataResumenAll=new bt.k(this.listResumenAll),this.dataPedidosAll=new bt.k,this.dataPedidoPagadoTarjeta=[],this.displayedColumnsReparidores=["repartidor","num_pedidos","importe","metodo"],this.displayedColumnsPagoTarjeta=["cliente","tarjeta","importe"],this.displayedColumnsTopProducto=["n","producto","seccion","precio","cantidad","importe"],this.displayedColumnsAllPedidos=["n","pedido","cliente","repartidor","metodo_pago","importe"]}return _createClass(t,[{key:"ngOnInit",value:function(){this.loadData(),this.dataResumenAll.paginator=this.paginator}},{key:"loadData",value:function(){var t=this;this.comercioService.loadDataCierreCaja().subscribe((function(e){console.log(e),t.dataCierre=e.map((function(t,e){return t.json_datos_delivery=JSON.parse(t.json_datos_delivery),t.n=e+1,t})),t.numTotalPedidos=t.dataCierre.length,t.dataPedidosAll.data=t.dataCierre,t.dataPedidosAll.paginator=t.paginatorPedido,t.dataFilter=ci(t.dataCierre),t.peditosXEstado(),t.pedidoXTipoPago(),t.pedidoXRepartidor(),t.topProductos(),t.tiempoAtencion()}))}},{key:"tiempoAtencion",value:function(){var t=this.dataFilter.dimension((function(t){return parseFloat(t.tiempo_atencion)})).group().all();this.timepoPromedioEntrega=t.map((function(t){return t.key})).reduce((function(t,e){return t+e}),0),this.timepoPromedioEntrega=Math.round(this.timepoPromedioEntrega/t.length),t.sort((function(t,e){return t.key-e.key})),this.tiempoMinEntrega=t[0].key,this.tiempoMaxEntrega=t[t.length-1].key,console.log("tiempoAtencion",t)}},{key:"topProductos",value:function(){var t=this;this.listResumenAll=[],this.dataCierre.map((function(e){e.json_datos_delivery.p_body.tipoconsumo.map((function(e){e.secciones.map((function(e){e.items.map((function(e){var i=t.listResumenAll.filter((function(t){return t.iditem===e.iditem}))[0];i?(i.cantidad_seleccionada+=e.cantidad_seleccionada,i.precio_total+=e.precio_total):(i=JSON.parse(JSON.stringify(e)),t.listResumenAll.push(i))}))}))}))})),this.listResumenAll=this.listResumenAll.sort((function(t,e){return e.cantidad_seleccionada-t.cantidad_seleccionada})).map((function(t,e){return t.n=e+1,t})),console.log("listResumenAll",this.listResumenAll),this.dataResumenAll.data=this.listResumenAll,this.dataResumenAll.paginator=this.paginator}},{key:"pedidoXRepartidor",value:function(){var t=this,e=this.dataFilter.dimension((function(t){return t.idrepartidor}));this.listPedidoXRepartidor=e.group().reduce((function(e,i,o){if(i.idrepartidor){e.count+=1,e.nom_repartidor=i.nom_repartidor+" "+i.ap_repartidor,e.calificacion=i.calificacion,e.telefono=i.telefono_repartidor;var n="0"===i.total?parseFloat(i.total_r):parseFloat(i.total);return t.arrMetodosPagoReparidor(i.json_datos_delivery.p_header.arrDatosDelivery.metodoPago,e.metodoPago,n),e.importe+=n,e}}),(function(e,i,o){if(i.idrepartidor){e.count-=1,e.nom_repartidor=i.nom_repartidor+" "+i.ap_repartidor,e.calificacion=i.calificacion,e.telefono=i.telefono_repartidor;var n="0"===i.total?parseFloat(i.total_r):parseFloat(i.total);return t.arrMetodosPagoReparidor(i.json_datos_delivery.p_header.arrDatosDelivery.metodoPago,e.metodoPago,n),e.importe+=n,e}}),(function(){return{count:0,nom_repartidor:"",telefono:"",importe:0,calificacion:0,metodoPago:[]}})).all(),this.listPedidoXRepartidor=this.listPedidoXRepartidor.filter((function(t){return t.value})),console.log("listPedidoXRepartidor",this.listPedidoXRepartidor)}},{key:"arrMetodosPagoReparidor",value:function(t,e,i){var o=e.filter((function(e){return e.idtipo_pago===t.idtipo_pago}))[0];o?(o.num_pedidos+=1,o.importe+=i):(t.num_pedidos=1,t.importe=i,e.push(t))}},{key:"pedidoXTipoPago",value:function(){var t,e=this;this.dataPedidoPagadoTarjeta=[],this.importeTotalEnCaja=0;try{t=this.dataFilter.dimension((function(t){return null==t?void 0:t.metodoPagoRegistro[0].idtipo_pago}))}catch(i){return}this.dataPedidoXTipoPago=t.group().reduce((function(t,i,o){if(i.metodoPagoRegistro)return t.count+=1,t.importe+=parseFloat(i.metodoPagoRegistro[0].importe),e.importeTotalEnCaja+=parseFloat(i.metodoPagoRegistro[0].importe),t.descripcion=i.metodoPagoRegistro[0].descripcion,4===i.metodoPagoRegistro[0].idtipo_pago&&(i.metodoPagoRegistro[0].nom_cliente=i.json_datos_delivery.p_header.arrDatosDelivery.nombre,i.metodoPagoRegistro[0].idpedido=i.idpedido,e.dataPedidoPagadoTarjeta.push(i.metodoPagoRegistro[0])),t}),(function(t,i,o){if(i.metodoPagoRegistro)return t.count-=1,t.importe-=parseFloat(i.metodoPagoRegistro[0].importe),e.importeTotalEnCaja-=parseFloat(i.metodoPagoRegistro[0].importe),t.descripcion=i.metodoPagoRegistro[0].descripcion,t}),(function(){return{count:0,descripcion:"",importe:0}})).all(),this.dataPedidoXTipoPago=this.dataPedidoXTipoPago.filter((function(t){return t.value})),console.log("ddPedidoXTipoPago",this.dataPedidoXTipoPago),console.log("dataPedidoPagadoTarjeta",this.dataPedidoPagadoTarjeta)}},{key:"peditosXEstado",value:function(){var t=this.dataFilter.dimension((function(t){return t.pwa_estado}));this.pedidosXEstado=t.group().reduce((function(t,e,i){switch(t.count+=1,e.pwa_estado){case"P":t.descripcion="PENDIENTE";break;case"A":t.descripcion="ACEPTADO";break;case"D":t.descripcion="LISTO";break;case"R":t.descripcion="CON EL REPARTIDOR";break;case"E":t.descripcion="ENTREGADO"}return t}),(function(t,e,i){switch(t.count-=1,e.pwa_estado){case"P":t.descripcion="PENDIENTE";break;case"A":t.descripcion="ACEPTADO";break;case"D":t.descripcion="LISTO";break;case"R":t.descripcion="CON EL REPARTIDOR";break;case"E":t.descripcion="ENTREGADO"}return t}),(function(){return{count:0,descripcion:""}})).all(),console.log("pedidosXEstado",this.pedidosXEstado)}}]),t}()).\u0275fac=function(t){return new(t||go)(l.Mb(f.a))},go.\u0275cmp=l.Gb({type:go,selectors:[["app-cuadre-caja"]],viewQuery:function(t,e){var i;1&t&&(l.zc(fi.a,!0),l.zc(hi,!0)),2&t&&(l.sc(i=l.ac())&&(e.paginator=i.first),l.sc(i=l.ac())&&(e.paginatorPedido=i.first))},decls:93,vars:31,consts:[[1,"animated","fadeIn","page-body"],[1,"p-3","border-bottom","row"],[1,"col-md-6"],[1,"fw-100","fs-18","m-1"],[1,"col-md-6","text-right"],["mat-stroked-button","","color","primary"],[1,"row","p-3","m-0"],[1,"col-md-4","text-center","card-pedido"],[1,"text-secondary"],[1,"text-center","border-top","p-2","mt-2"],[1,"w-100","fs-12"],[4,"ngFor","ngForOf"],[1,"fs-12"],[1,"d-flex","justify-content-between"],[1,"text-center"],[1,"text-success","m-0"],[1,"fs-12","m-0"],[1,"text-danger","m-0"],[1,"row","m-0","p-3"],[1,"col-md-6","card-pedido"],[1,"fw-600","fs-15"],["mat-table","",1,"table-model-1","w-100",3,"dataSource"],["matColumnDef","repartidor"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","num_pedidos"],["matColumnDef","importe"],["matColumnDef","metodo"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","table-model-1 w-100","mat-table","",3,"dataSource",4,"ngIf"],[1,"col-12","card-pedido"],[1,"fw-600","fs-18"],["showFirstLastButtons","",3,"pageSizeOptions","hidePageSize"],["paginatorPedido",""],["align","left"],["align","right"],["mat-header-cell",""],["mat-cell",""],[1,"fw-600"],[1,"fw-100"],["class","mb-1",4,"ngFor","ngForOf"],[1,"mb-1"],[1,"fw-600","badge",3,"ngClass"],[1,"text-secondary","pl-1"],["mat-header-row",""],["mat-row",""],["matColumnDef","cliente"],["matColumnDef","tarjeta"],["mat-header-cell","","class","text-right",4,"matHeaderCellDef"],["mat-cell","","align","right",4,"matCellDef"],["mat-header-cell","",1,"text-right"],["mat-cell","","align","right"],["matColumnDef","n"],["matColumnDef","producto"],["matColumnDef","seccion"],["matColumnDef","precio"],["matColumnDef","cantidad"],["matColumnDef","pedido"],["matColumnDef","metodo_pago"],[1,"fw-100","text-secondary"],[4,"ngIf","ngIfElse"],["elseTemplate",""]],template:function(t,e){1&t&&(l.Sb(0,"div",0),l.Sb(1,"div",1),l.Sb(2,"div",2),l.Sb(3,"p",3),l.Dc(4,"Resumen del dia"),l.Rb(),l.Rb(),l.Sb(5,"div",4),l.Sb(6,"button",5),l.Dc(7,"Cerrar turno."),l.Rb(),l.Rb(),l.Rb(),l.Sb(8,"div",6),l.Sb(9,"div",7),l.Sb(10,"h3",8),l.Dc(11),l.Rb(),l.Sb(12,"span"),l.Dc(13,"Pedidos"),l.Rb(),l.Sb(14,"div",9),l.Sb(15,"table",10),l.Sb(16,"tbody"),l.Bc(17,bi,6,5,"tr",11),l.Rb(),l.Rb(),l.Rb(),l.Rb(),l.Sb(18,"div",7),l.Sb(19,"h3",8),l.Dc(20),l.ec(21,"number"),l.Rb(),l.Sb(22,"span"),l.Dc(23,"Registro en Caja"),l.Rb(),l.Sb(24,"div",9),l.Sb(25,"table",10),l.Sb(26,"tbody"),l.Bc(27,mi,7,9,"tr",11),l.Rb(),l.Rb(),l.Rb(),l.Rb(),l.Sb(28,"div",7),l.Sb(29,"h3",8),l.Dc(30),l.ec(31,"number"),l.Sb(32,"span",12),l.Dc(33,"min"),l.Rb(),l.Rb(),l.Sb(34,"span"),l.Dc(35,"Tiempo promedio de entrega"),l.Rb(),l.Sb(36,"div",9),l.Sb(37,"div",13),l.Sb(38,"div",14),l.Sb(39,"p",15),l.Dc(40),l.ec(41,"number"),l.Rb(),l.Sb(42,"p",16),l.Dc(43," Tiempo Minimo"),l.Rb(),l.Rb(),l.Sb(44,"div",14),l.Sb(45,"p",17),l.Dc(46),l.ec(47,"number"),l.Rb(),l.Sb(48,"p",16),l.Dc(49," Tiempo Maximo"),l.Rb(),l.Rb(),l.Rb(),l.Rb(),l.Rb(),l.Rb(),l.Nb(50,"hr"),l.Sb(51,"div",18),l.Sb(52,"div",19),l.Sb(53,"div"),l.Sb(54,"span",20),l.Dc(55,"Pedidos por repartidor."),l.Rb(),l.Rb(),l.Sb(56,"table",21),l.Qb(57,22),l.Bc(58,gi,2,0,"th",23),l.Bc(59,vi,12,5,"td",24),l.Pb(),l.Qb(60,25),l.Bc(61,yi,2,0,"th",23),l.Bc(62,Ri,3,4,"td",24),l.Pb(),l.Qb(63,26),l.Bc(64,Si,2,0,"th",23),l.Bc(65,_i,3,4,"td",24),l.Pb(),l.Qb(66,27),l.Bc(67,Ci,2,0,"th",23),l.Bc(68,wi,2,1,"td",24),l.Pb(),l.Bc(69,Di,1,0,"tr",28),l.Bc(70,Ii,1,0,"tr",29),l.Rb(),l.Rb(),l.Sb(71,"div",19),l.Sb(72,"div"),l.Sb(73,"span",20),l.Dc(74,"Pago con tarjeta desde la aplicaci\xf3n."),l.Rb(),l.Rb(),l.Bc(75,Fi,12,3,"table",30),l.Rb(),l.Rb(),l.Nb(76,"hr"),l.Sb(77,"div",18),l.Sb(78,"div",31),l.Sb(79,"div"),l.Sb(80,"span",32),l.Dc(81,"Top de productos."),l.Rb(),l.Rb(),l.Bc(82,Ki,21,3,"table",30),l.Nb(83,"mat-paginator",33),l.Rb(),l.Rb(),l.Nb(84,"hr"),l.Sb(85,"div",18),l.Sb(86,"div",31),l.Sb(87,"div"),l.Sb(88,"span",32),l.Dc(89,"Todos los pedidos."),l.Rb(),l.Rb(),l.Bc(90,mo,21,3,"table",30),l.Nb(91,"mat-paginator",33,34),l.Rb(),l.Rb(),l.Rb()),2&t&&(l.Ab(11),l.Ec(e.numTotalPedidos),l.Ab(6),l.jc("ngForOf",e.pedidosXEstado),l.Ab(3),l.Ec(l.gc(21,17,e.importeTotalEnCaja,".2")),l.Ab(7),l.jc("ngForOf",e.dataPedidoXTipoPago),l.Ab(3),l.Fc("",l.gc(31,20,e.timepoPromedioEntrega,"2.0")," "),l.Ab(10),l.Ec(l.gc(41,23,e.tiempoMinEntrega,"2.")),l.Ab(6),l.Ec(l.gc(47,26,e.tiempoMaxEntrega,"2.")),l.Ab(10),l.jc("dataSource",e.listPedidoXRepartidor),l.Ab(13),l.jc("matHeaderRowDef",e.displayedColumnsReparidores),l.Ab(1),l.jc("matRowDefColumns",e.displayedColumnsReparidores),l.Ab(5),l.jc("ngIf",e.dataPedidoPagadoTarjeta),l.Ab(7),l.jc("ngIf",e.listResumenAll),l.Ab(1),l.jc("pageSizeOptions",l.nc(29,yo))("hidePageSize",!0),l.Ab(7),l.jc("ngIf",e.listResumenAll),l.Ab(1),l.jc("pageSizeOptions",l.nc(30,yo))("hidePageSize",!0))},directives:[h.a,n.l,bt.j,bt.c,bt.e,bt.b,bt.g,bt.i,n.m,fi.a,bt.d,bt.a,n.k,bt.f,bt.h],pipes:[n.e,n.u],styles:[".page-body[_ngcontent-%COMP%]{background:#eee}.card-pedido[_ngcontent-%COMP%]{border-radius:15px;padding:15px;background-color:#fff;border:8px solid #eee}.card-pedido-head[_ngcontent-%COMP%]{-webkit-box-align:center;-webkit-align-items:center;align-items:center;margin-bottom:3px}.card-pedido-body[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}"]}),go),So=i("3Pt+"),_o=i("kmnG"),Co=i("qFsG"),ko=((vo=function(){function t(e,i){_classCallCheck(this,t),this.dialogRef=i,this.repartidor=e.repartidor||{},this.sufijo=e.sufijo,e.repartidor&&(this.repartidor.usuario=this.repartidor.usuario.replace(this.sufijo,""))}return _createClass(t,[{key:"ngOnInit",value:function(){}},{key:"cerrarDlg",value:function(){this.repartidor.usuario=this.sufijo+this.repartidor.usuario,this.dialogRef.close(this.repartidor)}}]),t}()).\u0275fac=function(t){return new(t||vo)(l.Mb(a.a),l.Mb(a.g))},vo.\u0275cmp=l.Gb({type:vo,selectors:[["app-dialog-add-repartidor"]],decls:24,vars:9,consts:[["form","ngForm"],[1,"w-50"],["matInput","","placeholder","Nombre","type","text","name","nombre","required","",3,"ngModel","ngModelChange"],["matInput","","placeholder","Apellido","type","text","name","apellido","required","",3,"ngModel","ngModelChange"],["matInput","","placeholder","DNI","type","number","name","dni","required","",3,"ngModel","ngModelChange"],["matInput","","placeholder","Telefono","type","number","name","telefono","required","",3,"ngModel","ngModelChange"],["matPrefix",""],["matInput","","placeholder","Usuario","type","text","name","usuario","required","",3,"ngModel","ngModelChange"],["matInput","","placeholder","Clave","type","password","name","pass","required","",3,"ngModel","ngModelChange"],["mat-flat-button","","color","primary",3,"disabled","click"],["mat-flat-button","","color","accent",1,"ml-3",3,"mat-dialog-close"]],template:function(t,e){if(1&t&&(l.Sb(0,"form",null,0),l.Sb(2,"h6"),l.Dc(3,"Repartidor"),l.Rb(),l.Nb(4,"hr"),l.Sb(5,"mat-form-field",1),l.Sb(6,"input",2),l.Zb("ngModelChange",(function(t){return e.repartidor.nombre=t})),l.Rb(),l.Rb(),l.Sb(7,"mat-form-field",1),l.Sb(8,"input",3),l.Zb("ngModelChange",(function(t){return e.repartidor.apellido=t})),l.Rb(),l.Rb(),l.Sb(9,"mat-form-field",1),l.Sb(10,"input",4),l.Zb("ngModelChange",(function(t){return e.repartidor.dni=t})),l.Rb(),l.Rb(),l.Sb(11,"mat-form-field",1),l.Sb(12,"input",5),l.Zb("ngModelChange",(function(t){return e.repartidor.telefono=t})),l.Rb(),l.Rb(),l.Sb(13,"mat-form-field",1),l.Sb(14,"span",6),l.Dc(15),l.Rb(),l.Sb(16,"input",7),l.Zb("ngModelChange",(function(t){return e.repartidor.usuario=t})),l.Rb(),l.Rb(),l.Sb(17,"mat-form-field",1),l.Sb(18,"input",8),l.Zb("ngModelChange",(function(t){return e.repartidor.pass=t})),l.Rb(),l.Rb(),l.Nb(19,"hr"),l.Sb(20,"button",9),l.Zb("click",(function(){return e.cerrarDlg()})),l.Dc(21,"Guardar"),l.Rb(),l.Sb(22,"button",10),l.Dc(23,"Cerrar"),l.Rb(),l.Rb()),2&t){var i=l.tc(1);l.Ab(6),l.jc("ngModel",e.repartidor.nombre),l.Ab(2),l.jc("ngModel",e.repartidor.apellido),l.Ab(2),l.jc("ngModel",e.repartidor.dni),l.Ab(2),l.jc("ngModel",e.repartidor.telefono),l.Ab(3),l.Fc("",e.sufijo," \xa0"),l.Ab(1),l.jc("ngModel",e.repartidor.usuario),l.Ab(2),l.jc("ngModel",e.repartidor.pass),l.Ab(2),l.jc("disabled",!i.valid),l.Ab(2),l.jc("mat-dialog-close",!1)}},directives:[So.s,So.l,So.m,_o.b,Co.a,So.b,So.q,So.k,So.n,So.o,_o.f,h.a,a.d],styles:[""]}),vo),Po=i("W2jQ");function wo(t,e){1&t&&(l.Sb(0,"th",23),l.Dc(1,"#"),l.Rb())}function Do(t,e){if(1&t&&(l.Sb(0,"td",24),l.Dc(1),l.ec(2,"number"),l.Rb()),2&t){var i=e.index;l.Ab(1),l.Fc(" ",l.gc(2,1,i+1,"2.")," ")}}function Io(t,e){1&t&&(l.Sb(0,"th",23),l.Dc(1,"Nombres"),l.Rb())}function Ao(t,e){if(1&t&&(l.Sb(0,"td",24),l.Dc(1),l.Rb()),2&t){var i=e.$implicit;l.Ab(1),l.Gc(" ",i.nombre," ",i.apellido," ")}}function Oo(t,e){1&t&&(l.Sb(0,"th",23),l.Dc(1,"DNI"),l.Rb())}function xo(t,e){if(1&t&&(l.Sb(0,"td",24),l.Dc(1),l.Rb()),2&t){var i=e.$implicit;l.Ab(1),l.Fc(" ",i.dni," ")}}function To(t,e){1&t&&(l.Sb(0,"th",23),l.Dc(1,"Telefono"),l.Rb())}function Eo(t,e){if(1&t&&(l.Sb(0,"td",24),l.Dc(1),l.Rb()),2&t){var i=e.$implicit;l.Ab(1),l.Fc(" ",i.telefono," ")}}function jo(t,e){1&t&&(l.Sb(0,"th",23),l.Dc(1,"ciudad"),l.Rb())}function Mo(t,e){if(1&t&&(l.Sb(0,"td",24),l.Dc(1),l.Rb()),2&t){var i=e.$implicit;l.Ab(1),l.Fc(" ",i.ciudad," ")}}function Bo(t,e){1&t&&(l.Sb(0,"th",23),l.Dc(1,"F. Registro"),l.Rb())}function Fo(t,e){if(1&t&&(l.Sb(0,"td",24),l.Dc(1),l.Rb()),2&t){var i=e.$implicit;l.Ab(1),l.Fc(" ",i.f_registro," ")}}function Lo(t,e){1&t&&(l.Sb(0,"th",23),l.Dc(1,"Usuario"),l.Rb())}function No(t,e){if(1&t&&(l.Sb(0,"td",24),l.Dc(1),l.Rb()),2&t){var i=e.$implicit;l.Ab(1),l.Fc(" ",i.usuario," ")}}function zo(t,e){1&t&&l.Nb(0,"th",23)}function Wo(t,e){if(1&t){var i=l.Tb();l.Sb(0,"td",25),l.Sb(1,"i",26),l.Zb("click",(function(){l.vc(i);var t=e.$implicit;return l.dc(2).openDialogRepartidor(t)})),l.Rb(),l.Sb(2,"i",27),l.Zb("click",(function(){l.vc(i);var t=e.$implicit;return l.dc(2).borrarRepartidor(t)})),l.Rb(),l.Rb()}}function $o(t,e){1&t&&l.Nb(0,"tr",28)}function Qo(t,e){1&t&&l.Nb(0,"tr",29)}function qo(t,e){if(1&t&&(l.Sb(0,"table",9),l.Qb(1,10),l.Bc(2,wo,2,0,"th",11),l.Bc(3,Do,3,4,"td",12),l.Pb(),l.Qb(4,13),l.Bc(5,Io,2,0,"th",11),l.Bc(6,Ao,2,2,"td",12),l.Pb(),l.Qb(7,14),l.Bc(8,Oo,2,0,"th",11),l.Bc(9,xo,2,1,"td",12),l.Pb(),l.Qb(10,15),l.Bc(11,To,2,0,"th",11),l.Bc(12,Eo,2,1,"td",12),l.Pb(),l.Qb(13,16),l.Bc(14,jo,2,0,"th",11),l.Bc(15,Mo,2,1,"td",12),l.Pb(),l.Qb(16,17),l.Bc(17,Bo,2,0,"th",11),l.Bc(18,Fo,2,1,"td",12),l.Pb(),l.Qb(19,18),l.Bc(20,Lo,2,0,"th",11),l.Bc(21,No,2,1,"td",12),l.Pb(),l.Qb(22,19),l.Bc(23,zo,1,0,"th",11),l.Bc(24,Wo,3,0,"td",20),l.Pb(),l.Bc(25,$o,1,0,"tr",21),l.Bc(26,Qo,1,0,"tr",22),l.Rb()),2&t){var i=l.dc();l.jc("dataSource",i.listRepartidores),l.Ab(25),l.jc("matHeaderRowDef",i.displayedColumnsReparidores),l.Ab(1),l.jc("matRowDefColumns",i.displayedColumnsReparidores)}}var Ho,Go,Zo,Uo=[{path:"",component:L,data:{titulo:"Inicio"},children:[{path:"",redirectTo:"ordenes/lista"},{path:"ordenes/:id",component:we,data:{titulo:"Ordenes"}},{path:"seguimiento",component:De,data:{titulo:"Seguimiento"}},{path:"dashboard",component:Ie,data:{titulo:"Dashboard"}},{path:"resumen-dia",component:Ro,data:{titulo:"Resumen del Dia"}},{path:"repartidores",component:(Ho=function(){function t(e,i,o,n){_classCallCheck(this,t),this.crudService=e,this.dialog=i,this.comercioService=o,this.infoTokenService=n,this.listRepartidores=new bt.k,this.displayedColumnsReparidores=["n","nombre","dni","telefono","ciudad","f_registro","usuario","op"]}return _createClass(t,[{key:"ngOnInit",value:function(){this.infoTokenService.getInfoUs(),this.loadRepartidores(),console.log("comercioService",this.comercioService.getSedeInfo())}},{key:"loadRepartidores",value:function(){var t=this;this.crudService.getAll("comercio","get-mis-repartidores",!1,!1,!0).subscribe((function(e){console.log(e),t.listRepartidores.data=e.data}))}},{key:"openDialogRepartidor",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=new a.e;i.disableClose=!0,i.hasBackdrop=!0,i.width="400px",i.panelClass=["my-dialog-orden-detalle","my-dialog-scrool"],i.data={repartidor:e,ciudad:this.comercioService.sedeInfo.ciudad,sufijo:this.comercioService.sedeInfo.sufijo},this.dialog.open(ko,i).afterClosed().subscribe((function(e){e&&!1!==e&&(e.idsede=t.infoTokenService.infoUsToken.usuario.idsede,t.crudService.postFree({repartidor:e},"comercio","set-registrar-repartidor",!0).subscribe((function(i){e.idrepartidor||t.loadRepartidores()})))}))}},{key:"borrarRepartidor",value:function(t){var e=this,i=new a.e;i.disableClose=!0,i.hasBackdrop=!0,i.data={idMjs:2},this.dialog.open(Po.a,i).afterClosed().subscribe((function(i){i&&e.crudService.postFree({idrepartidor:t.idrepartidor},"comercio","borrar-mi-repartidor",!0).subscribe((function(t){e.loadRepartidores()}))}))}}]),t}(),Ho.\u0275fac=function(t){return new(t||Ho)(l.Mb(s.a),l.Mb(a.b),l.Mb(f.a),l.Mb(c.a))},Ho.\u0275cmp=l.Gb({type:Ho,selectors:[["app-mis-repartidores"]],decls:14,vars:1,consts:[[1,"animated","fadeIn"],[1,"w-100","m-0","p-3"],[1,"card-pedido","w-100"],[1,"d-flex","justify-content-between","align-items-center"],[1,"fw-600","fs-18"],[1,"text-secondary","m-0","fs-13"],["mat-fab","","color","primary",3,"click"],[1,"fa","fa-plus"],["class","table-model-1 w-100","mat-table","",3,"dataSource",4,"ngIf"],["mat-table","",1,"table-model-1","w-100",3,"dataSource"],["matColumnDef","n"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","nombre"],["matColumnDef","dni"],["matColumnDef","telefono"],["matColumnDef","ciudad"],["matColumnDef","f_registro"],["matColumnDef","usuario"],["matColumnDef","op"],["mat-cell","","class","xCursor",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-cell","",1,"xCursor"],[1,"fa","fa-pencil","pr-3",3,"click"],[1,"fa","fa-times","text-danger",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(t,e){1&t&&(l.Sb(0,"div",0),l.Sb(1,"div",1),l.Sb(2,"div",2),l.Sb(3,"div",3),l.Sb(4,"div"),l.Sb(5,"span",4),l.Dc(6,"Mis Repartidores"),l.Rb(),l.Sb(7,"p",5),l.Dc(8,"Si tu comercio tiene repartidores propios, crea los usuarios aqui."),l.Rb(),l.Rb(),l.Sb(9,"div"),l.Sb(10,"button",6),l.Zb("click",(function(){return e.openDialogRepartidor()})),l.Nb(11,"i",7),l.Rb(),l.Rb(),l.Rb(),l.Nb(12,"hr"),l.Bc(13,qo,27,3,"table",8),l.Rb(),l.Rb(),l.Rb()),2&t&&(l.Ab(13),l.jc("ngIf",e.listRepartidores))},directives:[h.a,n.m,bt.j,bt.c,bt.e,bt.b,bt.g,bt.i,bt.d,bt.a,bt.f,bt.h],pipes:[n.e],styles:[""]}),Ho),data:{titulo:"Repartidores"}}]}],Vo=((Go=function t(){_classCallCheck(this,t)}).\u0275mod=l.Kb({type:Go}),Go.\u0275inj=l.Jb({factory:function(t){return new(t||Go)},imports:[[r.d.forChild(Uo)],r.d]}),Go),Xo=i("pKmL"),Jo=i("lSLK"),Ko=i("rsRi"),Yo=((Zo=function t(){_classCallCheck(this,t)}).\u0275mod=l.Kb({type:Zo}),Zo.\u0275inj=l.Jb({factory:function(t){return new(t||Zo)},imports:[[n.c,Vo,Xo.a,Jo.a,Ko.a,G]]}),Zo)},CUlp:function(t,e,i){var o,n;"undefined"!=typeof window&&window,void 0===(n="function"==typeof(o=function(){"use strict";function t(){}var e=t.prototype;return e.on=function(t,e){if(t&&e){var i=this._events=this._events||{},o=i[t]=i[t]||[];return-1==o.indexOf(e)&&o.push(e),this}},e.once=function(t,e){if(t&&e){this.on(t,e);var i=this._onceEvents=this._onceEvents||{};return(i[t]=i[t]||{})[e]=!0,this}},e.off=function(t,e){var i=this._events&&this._events[t];if(i&&i.length){var o=i.indexOf(e);return-1!=o&&i.splice(o,1),this}},e.emitEvent=function(t,e){var i=this._events&&this._events[t];if(i&&i.length){i=i.slice(0),e=e||[];for(var o=this._onceEvents&&this._onceEvents[t],n=0;n<i.length;n++){var r=i[n];o&&o[r]&&(this.off(t,r),delete o[r]),r.apply(this,e)}return this}},e.allOff=function(){delete this._events,delete this._onceEvents},t})?o.call(e,i,e,t):o)||(t.exports=n)},Hy43:function(t,e,i){var o,n;!function(r,a){"use strict";o=[i("CUlp"),i("QK1G"),i("YVj6"),i("KK1e")],void 0===(n=(function(t,e,i,o){return function(t,e,i,o,n){var r=t.console,a=t.jQuery,s=function(){},c=0,d={};function l(t,e){var i=o.getQueryElement(t);if(i){this.element=i,a&&(this.$element=a(this.element)),this.options=o.extend({},this.constructor.defaults),this.option(e);var n=++c;this.element.outlayerGUID=n,d[n]=this,this._create(),this._getOption("initLayout")&&this.layout()}else r&&r.error("Bad element for "+this.constructor.namespace+": "+(i||t))}l.namespace="outlayer",l.Item=n,l.defaults={containerStyle:{position:"relative"},initLayout:!0,originLeft:!0,originTop:!0,resize:!0,resizeContainer:!0,transitionDuration:"0.4s",hiddenStyle:{opacity:0,transform:"scale(0.001)"},visibleStyle:{opacity:1,transform:"scale(1)"}};var u=l.prototype;function p(t){function e(){t.apply(this,arguments)}return(e.prototype=Object.create(t.prototype)).constructor=e,e}o.extend(u,e.prototype),u.option=function(t){o.extend(this.options,t)},u._getOption=function(t){var e=this.constructor.compatOptions[t];return e&&void 0!==this.options[e]?this.options[e]:this.options[t]},l.compatOptions={initLayout:"isInitLayout",horizontal:"isHorizontal",layoutInstant:"isLayoutInstant",originLeft:"isOriginLeft",originTop:"isOriginTop",resize:"isResizeBound",resizeContainer:"isResizingContainer"},u._create=function(){this.reloadItems(),this.stamps=[],this.stamp(this.options.stamp),o.extend(this.element.style,this.options.containerStyle),this._getOption("resize")&&this.bindResize()},u.reloadItems=function(){this.items=this._itemize(this.element.children)},u._itemize=function(t){for(var e=this._filterFindItemElements(t),i=this.constructor.Item,o=[],n=0;n<e.length;n++){var r=new i(e[n],this);o.push(r)}return o},u._filterFindItemElements=function(t){return o.filterFindElements(t,this.options.itemSelector)},u.getItemElements=function(){return this.items.map((function(t){return t.element}))},u.layout=function(){this._resetLayout(),this._manageStamps();var t=this._getOption("layoutInstant");this.layoutItems(this.items,void 0!==t?t:!this._isLayoutInited),this._isLayoutInited=!0},u._init=u.layout,u._resetLayout=function(){this.getSize()},u.getSize=function(){this.size=i(this.element)},u._getMeasurement=function(t,e){var o,n=this.options[t];n?("string"==typeof n?o=this.element.querySelector(n):n instanceof HTMLElement&&(o=n),this[t]=o?i(o)[e]:n):this[t]=0},u.layoutItems=function(t,e){t=this._getItemsForLayout(t),this._layoutItems(t,e),this._postLayout()},u._getItemsForLayout=function(t){return t.filter((function(t){return!t.isIgnored}))},u._layoutItems=function(t,e){if(this._emitCompleteOnItems("layout",t),t&&t.length){var i=[];t.forEach((function(t){var o=this._getItemLayoutPosition(t);o.item=t,o.isInstant=e||t.isLayoutInstant,i.push(o)}),this),this._processLayoutQueue(i)}},u._getItemLayoutPosition=function(){return{x:0,y:0}},u._processLayoutQueue=function(t){this.updateStagger(),t.forEach((function(t,e){this._positionItem(t.item,t.x,t.y,t.isInstant,e)}),this)},u.updateStagger=function(){var t=this.options.stagger;if(null!=t)return this.stagger=function(t){if("number"==typeof t)return t;var e=t.match(/(^\d*\.?\d*)(\w*)/),i=e&&e[1],o=e&&e[2];return i.length?(i=parseFloat(i))*(f[o]||1):0}(t),this.stagger;this.stagger=0},u._positionItem=function(t,e,i,o,n){o?t.goTo(e,i):(t.stagger(n*this.stagger),t.moveTo(e,i))},u._postLayout=function(){this.resizeContainer()},u.resizeContainer=function(){if(this._getOption("resizeContainer")){var t=this._getContainerSize();t&&(this._setContainerMeasure(t.width,!0),this._setContainerMeasure(t.height,!1))}},u._getContainerSize=s,u._setContainerMeasure=function(t,e){if(void 0!==t){var i=this.size;i.isBorderBox&&(t+=e?i.paddingLeft+i.paddingRight+i.borderLeftWidth+i.borderRightWidth:i.paddingBottom+i.paddingTop+i.borderTopWidth+i.borderBottomWidth),t=Math.max(t,0),this.element.style[e?"width":"height"]=t+"px"}},u._emitCompleteOnItems=function(t,e){var i=this;function o(){i.dispatchEvent(t+"Complete",null,[e])}var n=e.length;if(e&&n){var r=0;e.forEach((function(e){e.once(t,a)}))}else o();function a(){++r==n&&o()}},u.dispatchEvent=function(t,e,i){var o=e?[e].concat(i):i;if(this.emitEvent(t,o),a)if(this.$element=this.$element||a(this.element),e){var n=a.Event(e);n.type=t,this.$element.trigger(n,i)}else this.$element.trigger(t,i)},u.ignore=function(t){var e=this.getItem(t);e&&(e.isIgnored=!0)},u.unignore=function(t){var e=this.getItem(t);e&&delete e.isIgnored},u.stamp=function(t){(t=this._find(t))&&(this.stamps=this.stamps.concat(t),t.forEach(this.ignore,this))},u.unstamp=function(t){(t=this._find(t))&&t.forEach((function(t){o.removeFrom(this.stamps,t),this.unignore(t)}),this)},u._find=function(t){if(t)return"string"==typeof t&&(t=this.element.querySelectorAll(t)),o.makeArray(t)},u._manageStamps=function(){this.stamps&&this.stamps.length&&(this._getBoundingRect(),this.stamps.forEach(this._manageStamp,this))},u._getBoundingRect=function(){var t=this.element.getBoundingClientRect(),e=this.size;this._boundingRect={left:t.left+e.paddingLeft+e.borderLeftWidth,top:t.top+e.paddingTop+e.borderTopWidth,right:t.right-(e.paddingRight+e.borderRightWidth),bottom:t.bottom-(e.paddingBottom+e.borderBottomWidth)}},u._manageStamp=s,u._getElementOffset=function(t){var e=t.getBoundingClientRect(),o=this._boundingRect,n=i(t);return{left:e.left-o.left-n.marginLeft,top:e.top-o.top-n.marginTop,right:o.right-e.right-n.marginRight,bottom:o.bottom-e.bottom-n.marginBottom}},u.handleEvent=o.handleEvent,u.bindResize=function(){t.addEventListener("resize",this),this.isResizeBound=!0},u.unbindResize=function(){t.removeEventListener("resize",this),this.isResizeBound=!1},u.onresize=function(){this.resize()},o.debounceMethod(l,"onresize",100),u.resize=function(){this.isResizeBound&&this.needsResizeLayout()&&this.layout()},u.needsResizeLayout=function(){var t=i(this.element);return this.size&&t&&t.innerWidth!==this.size.innerWidth},u.addItems=function(t){var e=this._itemize(t);return e.length&&(this.items=this.items.concat(e)),e},u.appended=function(t){var e=this.addItems(t);e.length&&(this.layoutItems(e,!0),this.reveal(e))},u.prepended=function(t){var e=this._itemize(t);if(e.length){var i=this.items.slice(0);this.items=e.concat(i),this._resetLayout(),this._manageStamps(),this.layoutItems(e,!0),this.reveal(e),this.layoutItems(i)}},u.reveal=function(t){if(this._emitCompleteOnItems("reveal",t),t&&t.length){var e=this.updateStagger();t.forEach((function(t,i){t.stagger(i*e),t.reveal()}))}},u.hide=function(t){if(this._emitCompleteOnItems("hide",t),t&&t.length){var e=this.updateStagger();t.forEach((function(t,i){t.stagger(i*e),t.hide()}))}},u.revealItemElements=function(t){var e=this.getItems(t);this.reveal(e)},u.hideItemElements=function(t){var e=this.getItems(t);this.hide(e)},u.getItem=function(t){for(var e=0;e<this.items.length;e++){var i=this.items[e];if(i.element==t)return i}},u.getItems=function(t){t=o.makeArray(t);var e=[];return t.forEach((function(t){var i=this.getItem(t);i&&e.push(i)}),this),e},u.remove=function(t){var e=this.getItems(t);this._emitCompleteOnItems("remove",e),e&&e.length&&e.forEach((function(t){t.remove(),o.removeFrom(this.items,t)}),this)},u.destroy=function(){var t=this.element.style;t.height="",t.position="",t.width="",this.items.forEach((function(t){t.destroy()})),this.unbindResize(),delete d[this.element.outlayerGUID],delete this.element.outlayerGUID,a&&a.removeData(this.element,this.constructor.namespace)},l.data=function(t){var e=(t=o.getQueryElement(t))&&t.outlayerGUID;return e&&d[e]},l.create=function(t,e){var i=p(l);return i.defaults=o.extend({},l.defaults),o.extend(i.defaults,e),i.compatOptions=o.extend({},l.compatOptions),i.namespace=t,i.data=l.data,i.Item=p(n),o.htmlInit(i,t),a&&a.bridget&&a.bridget(t,i),i};var f={ms:1,s:1e3};return l.Item=n,l}(r,t,e,i,o)}).apply(e,o))||(t.exports=n)}(window)},IW2O:function(t,e,i){"use strict";var o,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=i("Y4kR"),a=i("cSoz");e.takeUntil=function(t){return function(e){return e.lift(new s(t))}};var s=function(){function t(t){this.notifier=t}return t.prototype.call=function(t,e){var i=new c(t),o=a.subscribeToResult(i,this.notifier);return o&&!i.seenValue?(i.add(o),e.subscribe(i)):i},t}(),c=function(t){function e(e){var i=t.call(this,e)||this;return i.seenValue=!1,i}return n(e,t),e.prototype.notifyNext=function(t,e,i,o,n){this.seenValue=!0,this.complete()},e.prototype.notifyComplete=function(){},e}(r.OuterSubscriber)},KK1e:function(t,e,i){var o,n,r;window,n=[i("CUlp"),i("QK1G")],void 0===(r="function"==typeof(o=function(t,e){"use strict";var i=document.documentElement.style,o="string"==typeof i.transition?"transition":"WebkitTransition",n="string"==typeof i.transform?"transform":"WebkitTransform",r={WebkitTransition:"webkitTransitionEnd",transition:"transitionend"}[o],a={transform:n,transition:o,transitionDuration:o+"Duration",transitionProperty:o+"Property",transitionDelay:o+"Delay"};function s(t,e){t&&(this.element=t,this.layout=e,this.position={x:0,y:0},this._create())}var c=s.prototype=Object.create(t.prototype);c.constructor=s,c._create=function(){this._transn={ingProperties:{},clean:{},onEnd:{}},this.css({position:"absolute"})},c.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},c.getSize=function(){this.size=e(this.element)},c.css=function(t){var e=this.element.style;for(var i in t)e[a[i]||i]=t[i]},c.getPosition=function(){var t=getComputedStyle(this.element),e=this.layout._getOption("originLeft"),i=this.layout._getOption("originTop"),o=t[e?"left":"right"],n=t[i?"top":"bottom"],r=parseFloat(o),a=parseFloat(n),s=this.layout.size;-1!=o.indexOf("%")&&(r=r/100*s.width),-1!=n.indexOf("%")&&(a=a/100*s.height),r=isNaN(r)?0:r,a=isNaN(a)?0:a,a-=i?s.paddingTop:s.paddingBottom,this.position.x=r-=e?s.paddingLeft:s.paddingRight,this.position.y=a},c.layoutPosition=function(){var t=this.layout.size,e={},i=this.layout._getOption("originLeft"),o=this.layout._getOption("originTop"),n=i?"right":"left";e[i?"left":"right"]=this.getXValue(this.position.x+t[i?"paddingLeft":"paddingRight"]),e[n]="";var r=o?"bottom":"top";e[o?"top":"bottom"]=this.getYValue(this.position.y+t[o?"paddingTop":"paddingBottom"]),e[r]="",this.css(e),this.emitEvent("layout",[this])},c.getXValue=function(t){var e=this.layout._getOption("horizontal");return this.layout.options.percentPosition&&!e?t/this.layout.size.width*100+"%":t+"px"},c.getYValue=function(t){var e=this.layout._getOption("horizontal");return this.layout.options.percentPosition&&e?t/this.layout.size.height*100+"%":t+"px"},c._transitionTo=function(t,e){this.getPosition();var i=this.position.x,o=this.position.y,n=t==this.position.x&&e==this.position.y;if(this.setPosition(t,e),!n||this.isTransitioning){var r={};r.transform=this.getTranslate(t-i,e-o),this.transition({to:r,onTransitionEnd:{transform:this.layoutPosition},isCleaning:!0})}else this.layoutPosition()},c.getTranslate=function(t,e){return"translate3d("+(t=this.layout._getOption("originLeft")?t:-t)+"px, "+(e=this.layout._getOption("originTop")?e:-e)+"px, 0)"},c.goTo=function(t,e){this.setPosition(t,e),this.layoutPosition()},c.moveTo=c._transitionTo,c.setPosition=function(t,e){this.position.x=parseFloat(t),this.position.y=parseFloat(e)},c._nonTransition=function(t){for(var e in this.css(t.to),t.isCleaning&&this._removeStyles(t.to),t.onTransitionEnd)t.onTransitionEnd[e].call(this)},c.transition=function(t){if(parseFloat(this.layout.options.transitionDuration)){var e=this._transn;for(var i in t.onTransitionEnd)e.onEnd[i]=t.onTransitionEnd[i];for(i in t.to)e.ingProperties[i]=!0,t.isCleaning&&(e.clean[i]=!0);t.from&&this.css(t.from),this.enableTransition(t.to),this.css(t.to),this.isTransitioning=!0}else this._nonTransition(t)};var d="opacity,"+n.replace(/([A-Z])/g,(function(t){return"-"+t.toLowerCase()}));c.enableTransition=function(){if(!this.isTransitioning){var t=this.layout.options.transitionDuration;this.css({transitionProperty:d,transitionDuration:t="number"==typeof t?t+"ms":t,transitionDelay:this.staggerDelay||0}),this.element.addEventListener(r,this,!1)}},c.onwebkitTransitionEnd=function(t){this.ontransitionend(t)},c.onotransitionend=function(t){this.ontransitionend(t)};var l={"-webkit-transform":"transform"};c.ontransitionend=function(t){if(t.target===this.element){var e=this._transn,i=l[t.propertyName]||t.propertyName;delete e.ingProperties[i],function(t){for(var e in t)return!1;return!0}(e.ingProperties)&&this.disableTransition(),i in e.clean&&(this.element.style[t.propertyName]="",delete e.clean[i]),i in e.onEnd&&(e.onEnd[i].call(this),delete e.onEnd[i]),this.emitEvent("transitionEnd",[this])}},c.disableTransition=function(){this.removeTransitionStyles(),this.element.removeEventListener(r,this,!1),this.isTransitioning=!1},c._removeStyles=function(t){var e={};for(var i in t)e[i]="";this.css(e)};var u={transitionProperty:"",transitionDuration:"",transitionDelay:""};return c.removeTransitionStyles=function(){this.css(u)},c.stagger=function(t){t=isNaN(t)?0:t,this.staggerDelay=t+"ms"},c.removeElem=function(){this.element.parentNode.removeChild(this.element),this.css({display:""}),this.emitEvent("remove",[this])},c.remove=function(){o&&parseFloat(this.layout.options.transitionDuration)?(this.once("transitionEnd",(function(){this.removeElem()})),this.hide()):this.removeElem()},c.reveal=function(){delete this.isHidden,this.css({display:""});var t=this.layout.options,e={};e[this.getHideRevealTransitionEndProperty("visibleStyle")]=this.onRevealTransitionEnd,this.transition({from:t.hiddenStyle,to:t.visibleStyle,isCleaning:!0,onTransitionEnd:e})},c.onRevealTransitionEnd=function(){this.isHidden||this.emitEvent("reveal")},c.getHideRevealTransitionEndProperty=function(t){var e=this.layout.options[t];if(e.opacity)return"opacity";for(var i in e)return i},c.hide=function(){this.isHidden=!0,this.css({display:""});var t=this.layout.options,e={};e[this.getHideRevealTransitionEndProperty("hiddenStyle")]=this.onHideTransitionEnd,this.transition({from:t.visibleStyle,to:t.hiddenStyle,isCleaning:!0,onTransitionEnd:e})},c.onHideTransitionEnd=function(){this.isHidden&&(this.css({display:"none"}),this.emitEvent("hide"))},c.destroy=function(){this.css({position:"",left:"",right:"",top:"",bottom:"",transition:"",transform:""})},s})?o.apply(e,n):o)||(t.exports=r)},OAkW:function(t,e,i){"use strict";e.subscribeToArray=function(t){return function(e){for(var i=0,o=t.length;i<o&&!e.closed;i++)e.next(t[i]);e.complete()}}},QK1G:function(t,e,i){var o,n;window,void 0===(n="function"==typeof(o=function(){"use strict";function t(t){var e=parseFloat(t);return-1==t.indexOf("%")&&!isNaN(e)&&e}var e="undefined"==typeof console?function(){}:function(t){console.error(t)},i=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"],o=i.length;function n(t){var i=getComputedStyle(t);return i||e("Style returned "+i+". Are you running this code in a hidden iframe on Firefox? See https://bit.ly/getsizebug1"),i}var r,a=!1;return function e(s){if(function(){if(!a){a=!0;var i=document.createElement("div");i.style.width="200px",i.style.padding="1px 2px 3px 4px",i.style.borderStyle="solid",i.style.borderWidth="1px 2px 3px 4px",i.style.boxSizing="border-box";var o=document.body||document.documentElement;o.appendChild(i);var s=n(i);r=200==Math.round(t(s.width)),e.isBoxSizeOuter=r,o.removeChild(i)}}(),"string"==typeof s&&(s=document.querySelector(s)),s&&"object"==typeof s&&s.nodeType){var c=n(s);if("none"==c.display)return function(){for(var t={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},e=0;e<o;e++)t[i[e]]=0;return t}();var d={};d.width=s.offsetWidth,d.height=s.offsetHeight;for(var l=d.isBorderBox="border-box"==c.boxSizing,u=0;u<o;u++){var p=i[u],f=parseFloat(c[p]);d[p]=isNaN(f)?0:f}var h=d.paddingLeft+d.paddingRight,b=d.paddingTop+d.paddingBottom,m=d.marginLeft+d.marginRight,g=d.marginTop+d.marginBottom,v=d.borderLeftWidth+d.borderRightWidth,y=d.borderTopWidth+d.borderBottomWidth,R=l&&r,S=t(c.width);!1!==S&&(d.width=S+(R?0:h+v));var _=t(c.height);return!1!==_&&(d.height=_+(R?0:b+y)),d.innerWidth=d.width-(h+v),d.innerHeight=d.height-(b+y),d.outerWidth=d.width+m,d.outerHeight=d.height+g,d}}})?o.call(e,i,e,t):o)||(t.exports=n)},VKeD:function(t,e,i){"use strict";function o(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}e.getSymbolIterator=o,e.iterator=o(),e.$$iterator=e.iterator},Vi6O:function(t,e,i){"use strict";var o,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});e.InnerSubscriber=function(t){function e(e,i,o){var n=t.call(this)||this;return n.parent=e,n.outerValue=i,n.outerIndex=o,n.index=0,n}return n(e,t),e.prototype._next=function(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)},e.prototype._error=function(t){this.parent.notifyError(t,this),this.unsubscribe()},e.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},e}(i("FWf1").Subscriber)},Y4kR:function(t,e,i){"use strict";var o,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});e.OuterSubscriber=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.notifyNext=function(t,e,i,o,n){this.destination.next(e)},e.prototype.notifyError=function(t,e){this.destination.error(t)},e.prototype.notifyComplete=function(t){this.destination.complete()},e}(i("FWf1").Subscriber)},YVj6:function(t,e,i){var o,n;!function(r,a){o=[i("x0Ue")],void 0===(n=(function(t){return function(t,e){"use strict";var i={extend:function(t,e){for(var i in e)t[i]=e[i];return t},modulo:function(t,e){return(t%e+e)%e}},o=Array.prototype.slice;i.makeArray=function(t){return Array.isArray(t)?t:null==t?[]:"object"==typeof t&&"number"==typeof t.length?o.call(t):[t]},i.removeFrom=function(t,e){var i=t.indexOf(e);-1!=i&&t.splice(i,1)},i.getParent=function(t,i){for(;t.parentNode&&t!=document.body;)if(e(t=t.parentNode,i))return t},i.getQueryElement=function(t){return"string"==typeof t?document.querySelector(t):t},i.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},i.filterFindElements=function(t,o){t=i.makeArray(t);var n=[];return t.forEach((function(t){if(t instanceof HTMLElement)if(o){e(t,o)&&n.push(t);for(var i=t.querySelectorAll(o),r=0;r<i.length;r++)n.push(i[r])}else n.push(t)})),n},i.debounceMethod=function(t,e,i){i=i||100;var o=t.prototype[e],n=e+"Timeout";t.prototype[e]=function(){var t=this[n];clearTimeout(t);var e=arguments,r=this;this[n]=setTimeout((function(){o.apply(r,e),delete r[n]}),i)}},i.docReady=function(t){var e=document.readyState;"complete"==e||"interactive"==e?setTimeout(t):document.addEventListener("DOMContentLoaded",t)},i.toDashed=function(t){return t.replace(/(.)([A-Z])/g,(function(t,e,i){return e+"-"+i})).toLowerCase()};var n=t.console;return i.htmlInit=function(e,o){i.docReady((function(){var r=i.toDashed(o),a="data-"+r,s=document.querySelectorAll("["+a+"]"),c=document.querySelectorAll(".js-"+r),d=i.makeArray(s).concat(i.makeArray(c)),l=a+"-options",u=t.jQuery;d.forEach((function(t){var i,r=t.getAttribute(a)||t.getAttribute(l);try{i=r&&JSON.parse(r)}catch(c){return void(n&&n.error("Error parsing "+a+" on "+t.className+": "+c))}var s=new e(t,i);u&&u.data(t,o,s)}))}))},i}(r,t)}).apply(e,o))||(t.exports=n)}(window)},Z5tI:function(t,e,i){"use strict";var o=i("MkmW");e.subscribeToPromise=function(t){return function(e){return t.then((function(t){e.closed||(e.next(t),e.complete())}),(function(t){return e.error(t)})).then(null,o.hostReportError),e}}},cSoz:function(t,e,i){"use strict";var o=i("Vi6O"),n=i("6qA3"),r=i("Q1FS");e.subscribeToResult=function(t,e,i,a,s){if(void 0===s&&(s=new o.InnerSubscriber(t,i,a)),!s.closed)return e instanceof r.Observable?e.subscribe(s):n.subscribeTo(e)(s)}},hNNL:function(t,e,i){var o,n,r;window,n=[i("Hy43"),i("QK1G")],void 0===(r="function"==typeof(o=function(t,e){"use strict";var i=t.create("masonry");i.compatOptions.fitWidth="isFitWidth";var o=i.prototype;return o._resetLayout=function(){this.getSize(),this._getMeasurement("columnWidth","outerWidth"),this._getMeasurement("gutter","outerWidth"),this.measureColumns(),this.colYs=[];for(var t=0;t<this.cols;t++)this.colYs.push(0);this.maxY=0,this.horizontalColIndex=0},o.measureColumns=function(){if(this.getContainerWidth(),!this.columnWidth){var t=this.items[0],i=t&&t.element;this.columnWidth=i&&e(i).outerWidth||this.containerWidth}var o=this.columnWidth+=this.gutter,n=this.containerWidth+this.gutter,r=n/o,a=o-n%o;r=Math[a&&a<1?"round":"floor"](r),this.cols=Math.max(r,1)},o.getContainerWidth=function(){var t=this._getOption("fitWidth"),i=e(t?this.element.parentNode:this.element);this.containerWidth=i&&i.innerWidth},o._getItemLayoutPosition=function(t){t.getSize();var e=t.size.outerWidth%this.columnWidth,i=Math[e&&e<1?"round":"ceil"](t.size.outerWidth/this.columnWidth);i=Math.min(i,this.cols);for(var o=this[this.options.horizontalOrder?"_getHorizontalColPosition":"_getTopColPosition"](i,t),n={x:this.columnWidth*o.col,y:o.y},r=o.y+t.size.outerHeight,a=i+o.col,s=o.col;s<a;s++)this.colYs[s]=r;return n},o._getTopColPosition=function(t){var e=this._getTopColGroup(t),i=Math.min.apply(Math,e);return{col:e.indexOf(i),y:i}},o._getTopColGroup=function(t){if(t<2)return this.colYs;for(var e=[],i=this.cols+1-t,o=0;o<i;o++)e[o]=this._getColGroupY(o,t);return e},o._getColGroupY=function(t,e){if(e<2)return this.colYs[t];var i=this.colYs.slice(t,t+e);return Math.max.apply(Math,i)},o._getHorizontalColPosition=function(t,e){var i=this.horizontalColIndex%this.cols;return i=t>1&&i+t>this.cols?0:i,this.horizontalColIndex=e.size.outerWidth&&e.size.outerHeight?i+t:this.horizontalColIndex,{col:i,y:this._getColGroupY(i,t)}},o._manageStamp=function(t){var i=e(t),o=this._getElementOffset(t),n=this._getOption("originLeft")?o.left:o.right,r=n+i.outerWidth,a=Math.floor(n/this.columnWidth);a=Math.max(0,a);var s=Math.floor(r/this.columnWidth);s-=r%this.columnWidth?0:1,s=Math.min(this.cols-1,s);for(var c=(this._getOption("originTop")?o.top:o.bottom)+i.outerHeight,d=a;d<=s;d++)this.colYs[d]=Math.max(c,this.colYs[d])},o._getContainerSize=function(){this.maxY=Math.max.apply(Math,this.colYs);var t={height:this.maxY};return this._getOption("fitWidth")&&(t.width=this._getContainerFitWidth()),t},o._getContainerFitWidth=function(){for(var t=0,e=this.cols;--e&&0===this.colYs[e];)t++;return(this.cols-t)*this.columnWidth-this.gutter},o.needsResizeLayout=function(){var t=this.containerWidth;return this.getContainerWidth(),t!=this.containerWidth},i})?o.apply(e,n):o)||(t.exports=r)},ozli:function(t,e,i){"use strict";var o=i("zfKp");e.subscribeToObservable=function(t){return function(e){var i=t[o.observable]();if("function"!=typeof i.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return i.subscribe(e)}}},poJ0:function(t,e,i){"use strict";var o=i("VKeD");e.subscribeToIterable=function(t){return function(e){for(var i=t[o.iterator]();;){var n=i.next();if(n.done){e.complete();break}if(e.next(n.value),e.closed)break}return"function"==typeof i.return&&e.add((function(){i.return&&i.return()})),e}}},vX6Q:function(t,e,i){var o,n;!function(r,a){"use strict";o=[i("CUlp")],void 0===(n=(function(t){return function(t,e){var i=t.jQuery,o=t.console;function n(t,e){for(var i in e)t[i]=e[i];return t}var r=Array.prototype.slice;function a(t,e,s){if(!(this instanceof a))return new a(t,e,s);var c,d=t;"string"==typeof t&&(d=document.querySelectorAll(t)),d?(this.elements=(c=d,Array.isArray(c)?c:"object"==typeof c&&"number"==typeof c.length?r.call(c):[c]),this.options=n({},this.options),"function"==typeof e?s=e:n(this.options,e),s&&this.on("always",s),this.getImages(),i&&(this.jqDeferred=new i.Deferred),setTimeout(this.check.bind(this))):o.error("Bad element for imagesLoaded "+(d||t))}(a.prototype=Object.create(e.prototype)).options={},a.prototype.getImages=function(){this.images=[],this.elements.forEach(this.addElementImages,this)},a.prototype.addElementImages=function(t){"IMG"==t.nodeName&&this.addImage(t),!0===this.options.background&&this.addElementBackgroundImages(t);var e=t.nodeType;if(e&&s[e]){for(var i=t.querySelectorAll("img"),o=0;o<i.length;o++)this.addImage(i[o]);if("string"==typeof this.options.background){var n=t.querySelectorAll(this.options.background);for(o=0;o<n.length;o++)this.addElementBackgroundImages(n[o])}}};var s={1:!0,9:!0,11:!0};function c(t){this.img=t}function d(t,e){this.url=t,this.element=e,this.img=new Image}return a.prototype.addElementBackgroundImages=function(t){var e=getComputedStyle(t);if(e)for(var i=/url\((['"])?(.*?)\1\)/gi,o=i.exec(e.backgroundImage);null!==o;){var n=o&&o[2];n&&this.addBackground(n,t),o=i.exec(e.backgroundImage)}},a.prototype.addImage=function(t){var e=new c(t);this.images.push(e)},a.prototype.addBackground=function(t,e){var i=new d(t,e);this.images.push(i)},a.prototype.check=function(){var t=this;function e(e,i,o){setTimeout((function(){t.progress(e,i,o)}))}this.progressedCount=0,this.hasAnyBroken=!1,this.images.length?this.images.forEach((function(t){t.once("progress",e),t.check()})):this.complete()},a.prototype.progress=function(t,e,i){this.progressedCount++,this.hasAnyBroken=this.hasAnyBroken||!t.isLoaded,this.emitEvent("progress",[this,t,e]),this.jqDeferred&&this.jqDeferred.notify&&this.jqDeferred.notify(this,t),this.progressedCount==this.images.length&&this.complete(),this.options.debug&&o&&o.log("progress: "+i,t,e)},a.prototype.complete=function(){var t=this.hasAnyBroken?"fail":"done";this.isComplete=!0,this.emitEvent(t,[this]),this.emitEvent("always",[this]),this.jqDeferred&&this.jqDeferred[this.hasAnyBroken?"reject":"resolve"](this)},(c.prototype=Object.create(e.prototype)).check=function(){this.getIsImageComplete()?this.confirm(0!==this.img.naturalWidth,"naturalWidth"):(this.proxyImage=new Image,this.proxyImage.addEventListener("load",this),this.proxyImage.addEventListener("error",this),this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.proxyImage.src=this.img.src)},c.prototype.getIsImageComplete=function(){return this.img.complete&&this.img.naturalWidth},c.prototype.confirm=function(t,e){this.isLoaded=t,this.emitEvent("progress",[this,this.img,e])},c.prototype.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},c.prototype.onload=function(){this.confirm(!0,"onload"),this.unbindEvents()},c.prototype.onerror=function(){this.confirm(!1,"onerror"),this.unbindEvents()},c.prototype.unbindEvents=function(){this.proxyImage.removeEventListener("load",this),this.proxyImage.removeEventListener("error",this),this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},(d.prototype=Object.create(c.prototype)).check=function(){this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.img.src=this.url,this.getIsImageComplete()&&(this.confirm(0!==this.img.naturalWidth,"naturalWidth"),this.unbindEvents())},d.prototype.unbindEvents=function(){this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},d.prototype.confirm=function(t,e){this.isLoaded=t,this.emitEvent("progress",[this,this.element,e])},a.makeJQueryPlugin=function(e){(e=e||t.jQuery)&&((i=e).fn.imagesLoaded=function(t,e){return new a(this,t,e).jqDeferred.promise(i(this))})},a.makeJQueryPlugin(),a}(r,t)}).apply(e,o))||(t.exports=n)}("undefined"!=typeof window?window:this)},x0Ue:function(t,e,i){var o,n;!function(r,a){"use strict";void 0===(n="function"==typeof(o=a)?o.call(e,i,e,t):o)||(t.exports=n)}(window,(function(){"use strict";var t=function(){var t=window.Element.prototype;if(t.matches)return"matches";if(t.matchesSelector)return"matchesSelector";for(var e=["webkit","moz","ms","o"],i=0;i<e.length;i++){var o=e[i]+"MatchesSelector";if(t[o])return o}}();return function(e,i){return e[t](i)}}))},yRPT:function(t,e,i){"use strict";e.isArrayLike=function(t){return t&&"number"==typeof t.length&&"function"!=typeof t}}}]);
(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"0KJs":function(t,e,o){function i(){var t;try{t=e.storage.debug}catch(o){}return!t&&"undefined"!=typeof process&&"env"in process&&(t=process.env.DEBUG),t}(e=t.exports=o("FXYA")).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},e.formatArgs=function(t){var o=this.useColors;if(t[0]=(o?"%c":"")+this.namespace+(o?" %c":" ")+t[0]+(o?"%c ":" ")+"+"+e.humanize(this.diff),o){var i="color: "+this.color;t.splice(1,0,i,"color: inherit");var n=0,r=0;t[0].replace(/%[a-zA-Z%]/g,(function(t){"%%"!==t&&(n++,"%c"===t&&(r=n))})),t.splice(r,0,i)}},e.save=function(t){try{null==t?e.storage.removeItem("debug"):e.storage.debug=t}catch(o){}},e.load=i,e.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},e.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(t){}}(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.formatters.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},e.enable(i())},"0z79":function(t,e,o){var i=o("AdPF"),n=o("CUme"),r=o("cpc2"),s=o("Yvos"),a=o("x7D4")("engine.io-client:polling-xhr"),c=o("2UHX");function d(){}function l(t){if(n.call(this,t),this.requestTimeout=t.requestTimeout,this.extraHeaders=t.extraHeaders,"undefined"!=typeof location){var e="https:"===location.protocol,o=location.port;o||(o=e?443:80),this.xd="undefined"!=typeof location&&t.hostname!==location.hostname||o!==t.port,this.xs=t.secure!==e}}function p(t){this.method=t.method||"GET",this.uri=t.uri,this.xd=!!t.xd,this.xs=!!t.xs,this.async=!1!==t.async,this.data=void 0!==t.data?t.data:null,this.agent=t.agent,this.isBinary=t.isBinary,this.supportsBinary=t.supportsBinary,this.enablesXDR=t.enablesXDR,this.withCredentials=t.withCredentials,this.requestTimeout=t.requestTimeout,this.pfx=t.pfx,this.key=t.key,this.passphrase=t.passphrase,this.cert=t.cert,this.ca=t.ca,this.ciphers=t.ciphers,this.rejectUnauthorized=t.rejectUnauthorized,this.extraHeaders=t.extraHeaders,this.create()}function u(){for(var t in p.requests)p.requests.hasOwnProperty(t)&&p.requests[t].abort()}t.exports=l,t.exports.Request=p,s(l,n),l.prototype.supportsBinary=!0,l.prototype.request=function(t){return(t=t||{}).uri=this.uri(),t.xd=this.xd,t.xs=this.xs,t.agent=this.agent||!1,t.supportsBinary=this.supportsBinary,t.enablesXDR=this.enablesXDR,t.withCredentials=this.withCredentials,t.pfx=this.pfx,t.key=this.key,t.passphrase=this.passphrase,t.cert=this.cert,t.ca=this.ca,t.ciphers=this.ciphers,t.rejectUnauthorized=this.rejectUnauthorized,t.requestTimeout=this.requestTimeout,t.extraHeaders=this.extraHeaders,new p(t)},l.prototype.doWrite=function(t,e){var o=this.request({method:"POST",data:t,isBinary:"string"!=typeof t&&void 0!==t}),i=this;o.on("success",e),o.on("error",(function(t){i.onError("xhr post error",t)})),this.sendXhr=o},l.prototype.doPoll=function(){a("xhr poll");var t=this.request(),e=this;t.on("data",(function(t){e.onData(t)})),t.on("error",(function(t){e.onError("xhr poll error",t)})),this.pollXhr=t},r(p.prototype),p.prototype.create=function(){var t={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};t.pfx=this.pfx,t.key=this.key,t.passphrase=this.passphrase,t.cert=this.cert,t.ca=this.ca,t.ciphers=this.ciphers,t.rejectUnauthorized=this.rejectUnauthorized;var e=this.xhr=new i(t),o=this;try{a("xhr open %s: %s",this.method,this.uri),e.open(this.method,this.uri,this.async);try{if(this.extraHeaders)for(var n in e.setDisableHeaderCheck&&e.setDisableHeaderCheck(!0),this.extraHeaders)this.extraHeaders.hasOwnProperty(n)&&e.setRequestHeader(n,this.extraHeaders[n])}catch(r){}if("POST"===this.method)try{e.setRequestHeader("Content-type",this.isBinary?"application/octet-stream":"text/plain;charset=UTF-8")}catch(r){}try{e.setRequestHeader("Accept","*/*")}catch(r){}"withCredentials"in e&&(e.withCredentials=this.withCredentials),this.requestTimeout&&(e.timeout=this.requestTimeout),this.hasXDR()?(e.onload=function(){o.onLoad()},e.onerror=function(){o.onError(e.responseText)}):e.onreadystatechange=function(){if(2===e.readyState)try{var t=e.getResponseHeader("Content-Type");(o.supportsBinary&&"application/octet-stream"===t||"application/octet-stream; charset=UTF-8"===t)&&(e.responseType="arraybuffer")}catch(r){}4===e.readyState&&(200===e.status||1223===e.status?o.onLoad():setTimeout((function(){o.onError("number"==typeof e.status?e.status:0)}),0))},a("xhr data %s",this.data),e.send(this.data)}catch(r){return void setTimeout((function(){o.onError(r)}),0)}"undefined"!=typeof document&&(this.index=p.requestsCount++,p.requests[this.index]=this)},p.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},p.prototype.onData=function(t){this.emit("data",t),this.onSuccess()},p.prototype.onError=function(t){this.emit("error",t),this.cleanup(!0)},p.prototype.cleanup=function(t){if(null!=this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=d:this.xhr.onreadystatechange=d,t)try{this.xhr.abort()}catch(e){}"undefined"!=typeof document&&delete p.requests[this.index],this.xhr=null}},p.prototype.onLoad=function(){var t;try{var e;try{e=this.xhr.getResponseHeader("Content-Type")}catch(o){}t=("application/octet-stream"===e||"application/octet-stream; charset=UTF-8"===e)&&this.xhr.response||this.xhr.responseText}catch(o){this.onError(o)}null!=t&&this.onData(t)},p.prototype.hasXDR=function(){return"undefined"!=typeof XDomainRequest&&!this.xs&&this.enablesXDR},p.prototype.abort=function(){this.cleanup()},p.requestsCount=0,p.requests={},"undefined"!=typeof document&&("function"==typeof attachEvent?attachEvent("onunload",u):"function"==typeof addEventListener&&addEventListener("onpagehide"in c?"pagehide":"unload",u,!1))},"14A5":function(t,e){var o=void 0!==o?o:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder&&MozBlobBuilder,i=function(){try{return 2===new Blob(["hi"]).size}catch(t){return!1}}(),n=i&&function(){try{return 2===new Blob([new Uint8Array([1,2])]).size}catch(t){return!1}}(),r=o&&o.prototype.append&&o.prototype.getBlob;function s(t){return t.map((function(t){if(t.buffer instanceof ArrayBuffer){var e=t.buffer;if(t.byteLength!==e.byteLength){var o=new Uint8Array(t.byteLength);o.set(new Uint8Array(e,t.byteOffset,t.byteLength)),e=o.buffer}return e}return t}))}function a(t,e){e=e||{};var i=new o;return s(t).forEach((function(t){i.append(t)})),e.type?i.getBlob(e.type):i.getBlob()}function c(t,e){return new Blob(s(t),e||{})}"undefined"!=typeof Blob&&(a.prototype=Blob.prototype,c.prototype=Blob.prototype),t.exports=i?n?Blob:c:r?a:void 0},"2Dig":function(t,e){t.exports=function(t,e,o){return t.on(e,o),{destroy:function(){t.removeListener(e,o)}}}},"2UHX":function(t,e){t.exports="undefined"!=typeof self?self:"undefined"!=typeof window?window:Function("return this")()},"2pII":function(t,e,o){var i=o("akSB"),n=o("cpc2"),r=o("x7D4")("engine.io-client:socket"),s=o("7jRU"),a=o("Wm4p"),c=o("Uxeu"),d=o("TypT");function l(t,e){if(!(this instanceof l))return new l(t,e);e=e||{},t&&"object"==typeof t&&(e=t,t=null),t?(t=c(t),e.hostname=t.host,e.secure="https"===t.protocol||"wss"===t.protocol,e.port=t.port,t.query&&(e.query=t.query)):e.host&&(e.hostname=c(e.host).host),this.secure=null!=e.secure?e.secure:"undefined"!=typeof location&&"https:"===location.protocol,e.hostname&&!e.port&&(e.port=this.secure?"443":"80"),this.agent=e.agent||!1,this.hostname=e.hostname||("undefined"!=typeof location?location.hostname:"localhost"),this.port=e.port||("undefined"!=typeof location&&location.port?location.port:this.secure?443:80),this.query=e.query||{},"string"==typeof this.query&&(this.query=d.decode(this.query)),this.upgrade=!1!==e.upgrade,this.path=(e.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!e.forceJSONP,this.jsonp=!1!==e.jsonp,this.forceBase64=!!e.forceBase64,this.enablesXDR=!!e.enablesXDR,this.withCredentials=!1!==e.withCredentials,this.timestampParam=e.timestampParam||"t",this.timestampRequests=e.timestampRequests,this.transports=e.transports||["polling","websocket"],this.transportOptions=e.transportOptions||{},this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.policyPort=e.policyPort||843,this.rememberUpgrade=e.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=e.onlyBinaryUpgrades,this.perMessageDeflate=!1!==e.perMessageDeflate&&(e.perMessageDeflate||{}),!0===this.perMessageDeflate&&(this.perMessageDeflate={}),this.perMessageDeflate&&null==this.perMessageDeflate.threshold&&(this.perMessageDeflate.threshold=1024),this.pfx=e.pfx||null,this.key=e.key||null,this.passphrase=e.passphrase||null,this.cert=e.cert||null,this.ca=e.ca||null,this.ciphers=e.ciphers||null,this.rejectUnauthorized=void 0===e.rejectUnauthorized||e.rejectUnauthorized,this.forceNode=!!e.forceNode,this.isReactNative="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase(),("undefined"==typeof self||this.isReactNative)&&(e.extraHeaders&&Object.keys(e.extraHeaders).length>0&&(this.extraHeaders=e.extraHeaders),e.localAddress&&(this.localAddress=e.localAddress)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingIntervalTimer=null,this.pingTimeoutTimer=null,this.open()}t.exports=l,l.priorWebsocketSuccess=!1,n(l.prototype),l.protocol=a.protocol,l.Socket=l,l.Transport=o("Gbct"),l.transports=o("akSB"),l.parser=o("Wm4p"),l.prototype.createTransport=function(t){r('creating transport "%s"',t);var e=function(t){var e={};for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);return e}(this.query);e.EIO=a.protocol,e.transport=t;var o=this.transportOptions[t]||{};return this.id&&(e.sid=this.id),new i[t]({query:e,socket:this,agent:o.agent||this.agent,hostname:o.hostname||this.hostname,port:o.port||this.port,secure:o.secure||this.secure,path:o.path||this.path,forceJSONP:o.forceJSONP||this.forceJSONP,jsonp:o.jsonp||this.jsonp,forceBase64:o.forceBase64||this.forceBase64,enablesXDR:o.enablesXDR||this.enablesXDR,withCredentials:o.withCredentials||this.withCredentials,timestampRequests:o.timestampRequests||this.timestampRequests,timestampParam:o.timestampParam||this.timestampParam,policyPort:o.policyPort||this.policyPort,pfx:o.pfx||this.pfx,key:o.key||this.key,passphrase:o.passphrase||this.passphrase,cert:o.cert||this.cert,ca:o.ca||this.ca,ciphers:o.ciphers||this.ciphers,rejectUnauthorized:o.rejectUnauthorized||this.rejectUnauthorized,perMessageDeflate:o.perMessageDeflate||this.perMessageDeflate,extraHeaders:o.extraHeaders||this.extraHeaders,forceNode:o.forceNode||this.forceNode,localAddress:o.localAddress||this.localAddress,requestTimeout:o.requestTimeout||this.requestTimeout,protocols:o.protocols||void 0,isReactNative:this.isReactNative})},l.prototype.open=function(){var t;if(this.rememberUpgrade&&l.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))t="websocket";else{if(0===this.transports.length){var e=this;return void setTimeout((function(){e.emit("error","No transports available")}),0)}t=this.transports[0]}this.readyState="opening";try{t=this.createTransport(t)}catch(o){return this.transports.shift(),void this.open()}t.open(),this.setTransport(t)},l.prototype.setTransport=function(t){r("setting transport %s",t.name);var e=this;this.transport&&(r("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=t,t.on("drain",(function(){e.onDrain()})).on("packet",(function(t){e.onPacket(t)})).on("error",(function(t){e.onError(t)})).on("close",(function(){e.onClose("transport close")}))},l.prototype.probe=function(t){r('probing transport "%s"',t);var e=this.createTransport(t,{probe:1}),o=!1,i=this;function n(){i.onlyBinaryUpgrades&&(o=o||!this.supportsBinary&&i.transport.supportsBinary),o||(r('probe transport "%s" opened',t),e.send([{type:"ping",data:"probe"}]),e.once("packet",(function(n){if(!o)if("pong"===n.type&&"probe"===n.data){if(r('probe transport "%s" pong',t),i.upgrading=!0,i.emit("upgrading",e),!e)return;l.priorWebsocketSuccess="websocket"===e.name,r('pausing current transport "%s"',i.transport.name),i.transport.pause((function(){o||"closed"!==i.readyState&&(r("changing transport and sending upgrade packet"),u(),i.setTransport(e),e.send([{type:"upgrade"}]),i.emit("upgrade",e),e=null,i.upgrading=!1,i.flush())}))}else{r('probe transport "%s" failed',t);var s=new Error("probe error");s.transport=e.name,i.emit("upgradeError",s)}})))}function s(){o||(o=!0,u(),e.close(),e=null)}function a(o){var n=new Error("probe error: "+o);n.transport=e.name,s(),r('probe transport "%s" failed because of error: %s',t,o),i.emit("upgradeError",n)}function c(){a("transport closed")}function d(){a("socket closed")}function p(t){e&&t.name!==e.name&&(r('"%s" works - aborting "%s"',t.name,e.name),s())}function u(){e.removeListener("open",n),e.removeListener("error",a),e.removeListener("close",c),i.removeListener("close",d),i.removeListener("upgrading",p)}l.priorWebsocketSuccess=!1,e.once("open",n),e.once("error",a),e.once("close",c),this.once("close",d),this.once("upgrading",p),e.open()},l.prototype.onOpen=function(){if(r("socket open"),this.readyState="open",l.priorWebsocketSuccess="websocket"===this.transport.name,this.emit("open"),this.flush(),"open"===this.readyState&&this.upgrade&&this.transport.pause){r("starting upgrade probes");for(var t=0,e=this.upgrades.length;t<e;t++)this.probe(this.upgrades[t])}},l.prototype.onPacket=function(t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(r('socket receive: type "%s", data "%s"',t.type,t.data),this.emit("packet",t),this.emit("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var e=new Error("server error");e.code=t.data,this.onError(e);break;case"message":this.emit("data",t.data),this.emit("message",t.data)}else r('packet received with socket readyState "%s"',this.readyState)},l.prototype.onHandshake=function(t){this.emit("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this.upgrades=this.filterUpgrades(t.upgrades),this.pingInterval=t.pingInterval,this.pingTimeout=t.pingTimeout,this.onOpen(),"closed"!==this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},l.prototype.onHeartbeat=function(t){clearTimeout(this.pingTimeoutTimer);var e=this;e.pingTimeoutTimer=setTimeout((function(){"closed"!==e.readyState&&e.onClose("ping timeout")}),t||e.pingInterval+e.pingTimeout)},l.prototype.setPing=function(){var t=this;clearTimeout(t.pingIntervalTimer),t.pingIntervalTimer=setTimeout((function(){r("writing ping packet - expecting pong within %sms",t.pingTimeout),t.ping(),t.onHeartbeat(t.pingTimeout)}),t.pingInterval)},l.prototype.ping=function(){var t=this;this.sendPacket("ping",(function(){t.emit("ping")}))},l.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emit("drain"):this.flush()},l.prototype.flush=function(){"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(r("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},l.prototype.write=l.prototype.send=function(t,e,o){return this.sendPacket("message",t,e,o),this},l.prototype.sendPacket=function(t,e,o,i){if("function"==typeof e&&(i=e,e=void 0),"function"==typeof o&&(i=o,o=null),"closing"!==this.readyState&&"closed"!==this.readyState){(o=o||{}).compress=!1!==o.compress;var n={type:t,data:e,options:o};this.emit("packetCreate",n),this.writeBuffer.push(n),i&&this.once("flush",i),this.flush()}},l.prototype.close=function(){if("opening"===this.readyState||"open"===this.readyState){this.readyState="closing";var t=this;this.writeBuffer.length?this.once("drain",(function(){this.upgrading?i():e()})):this.upgrading?i():e()}function e(){t.onClose("forced close"),r("socket closing - telling transport to close"),t.transport.close()}function o(){t.removeListener("upgrade",o),t.removeListener("upgradeError",o),e()}function i(){t.once("upgrade",o),t.once("upgradeError",o)}return this},l.prototype.onError=function(t){r("socket error %j",t),l.priorWebsocketSuccess=!1,this.emit("error",t),this.onClose("transport error",t)},l.prototype.onClose=function(t,e){"opening"!==this.readyState&&"open"!==this.readyState&&"closing"!==this.readyState||(r('socket close with reason: "%s"',t),clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",t,e),this.writeBuffer=[],this.prevBufferLen=0)},l.prototype.filterUpgrades=function(t){for(var e=[],o=0,i=t.length;o<i;o++)~s(this.transports,t[o])&&e.push(t[o]);return e}},"2xqC":function(t,e,o){function i(t){if(t)return function(t){for(var e in i.prototype)t[e]=i.prototype[e];return t}(t)}t.exports=i,i.prototype.on=i.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},i.prototype.once=function(t,e){function o(){this.off(t,o),e.apply(this,arguments)}return o.fn=e,this.on(t,o),this},i.prototype.off=i.prototype.removeListener=i.prototype.removeAllListeners=i.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var o,i=this._callbacks["$"+t];if(!i)return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(var n=0;n<i.length;n++)if((o=i[n])===e||o.fn===e){i.splice(n,1);break}return this},i.prototype.emit=function(t){this._callbacks=this._callbacks||{};var e=[].slice.call(arguments,1),o=this._callbacks["$"+t];if(o)for(var i=0,n=(o=o.slice(0)).length;i<n;++i)o[i].apply(this,e);return this},i.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},i.prototype.hasListeners=function(t){return!!this.listeners(t).length}},4:function(t,e){},"5LH7":function(t,e){var o=1e3,i=6e4,n=60*i,r=24*n;function s(t,e,o,i){var n=e>=1.5*o;return Math.round(t/o)+" "+i+(n?"s":"")}t.exports=function(t,e){e=e||{};var a,c,d=typeof t;if("string"===d&&t.length>0)return function(t){if(!((t=String(t)).length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(e){var s=parseFloat(e[1]);switch((e[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*s;case"weeks":case"week":case"w":return 6048e5*s;case"days":case"day":case"d":return s*r;case"hours":case"hour":case"hrs":case"hr":case"h":return s*n;case"minutes":case"minute":case"mins":case"min":case"m":return s*i;case"seconds":case"second":case"secs":case"sec":case"s":return s*o;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return s;default:return}}}}(t);if("number"===d&&isFinite(t))return e.long?(a=t,(c=Math.abs(a))>=r?s(a,c,r,"day"):c>=n?s(a,c,n,"hour"):c>=i?s(a,c,i,"minute"):c>=o?s(a,c,o,"second"):a+" ms"):function(t){var e=Math.abs(t);return e>=r?Math.round(t/r)+"d":e>=n?Math.round(t/n)+"h":e>=i?Math.round(t/i)+"m":e>=o?Math.round(t/o)+"s":t+"ms"}(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))}},"6C75":function(t,e){var o={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==o.call(t)}},"6qA3":function(t,e,o){"use strict";var i=o("OAkW"),n=o("Z5tI"),r=o("poJ0"),s=o("ozli"),a=o("yRPT"),c=o("90cg"),d=o("GMZp"),l=o("VKeD"),p=o("zfKp");e.subscribeTo=function(t){if(t&&"function"==typeof t[p.observable])return s.subscribeToObservable(t);if(a.isArrayLike(t))return i.subscribeToArray(t);if(c.isPromise(t))return n.subscribeToPromise(t);if(t&&"function"==typeof t[l.iterator])return r.subscribeToIterable(t);var e=d.isObject(t)?"an invalid object":"'"+t+"'";throw new TypeError("You provided "+e+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")}},"7RJT":function(t,e,o){"use strict";var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=o("ds6q"),r=o("Mxlh");e.BehaviorSubject=function(t){function e(e){var o=t.call(this)||this;return o._value=e,o}return i(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),e.prototype._subscribe=function(e){var o=t.prototype._subscribe.call(this,e);return o&&!o.closed&&e.next(this._value),o},e.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new r.ObjectUnsubscribedError;return this._value},e.prototype.next=function(e){t.prototype.next.call(this,this._value=e)},e}(n.Subject)},"7jRU":function(t,e){var o=[].indexOf;t.exports=function(t,e){if(o)return t.indexOf(e);for(var i=0;i<t.length;++i)if(t[i]===e)return i;return-1}},"90cg":function(t,e,o){"use strict";e.isPromise=function(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}},AdPF:function(t,e,o){var i=o("yeub"),n=o("2UHX");t.exports=function(t){var e=t.xdomain,o=t.xscheme,r=t.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!e||i))return new XMLHttpRequest}catch(s){}try{if("undefined"!=typeof XDomainRequest&&!o&&r)return new XDomainRequest}catch(s){}if(!e)try{return new(n[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(s){}}},Aplp:function(t,e,o){"use strict";var i,n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),r={},s=0,a=0;function c(t){var e="";do{e=n[t%64]+e,t=Math.floor(t/64)}while(t>0);return e}function d(){var t=c(+new Date);return t!==i?(s=0,i=t):t+"."+c(s++)}for(;a<64;a++)r[n[a]]=a;d.encode=c,d.decode=function(t){var e=0;for(a=0;a<t.length;a++)e=64*e+r[t.charAt(a)];return e},t.exports=d},C2QD:function(t,e){function o(t){this.ms=(t=t||{}).min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}t.exports=o,o.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),o=Math.floor(e*this.jitter*t);t=0==(1&Math.floor(10*e))?t-o:t+o}return 0|Math.min(t,this.max)},o.prototype.reset=function(){this.attempts=0},o.prototype.setMin=function(t){this.ms=t},o.prototype.setMax=function(t){this.max=t},o.prototype.setJitter=function(t){this.jitter=t}},CGVT:function(t,e,o){"use strict";o.r(e),o.d(e,"ComercioModule",(function(){return Ln}));var i=o("ofXK"),n=o("tyNb"),r=o("0IaG"),s=o("+lji"),a=o("zOUh"),c=o("NEqF"),d=o("fXoL"),l=o("Jho9");let p=(()=>{class t{constructor(t,e,o){this.swPush=t,this.crudService=e,this.infoTokenService=o,this.swPush.notificationClicks.subscribe(t=>{window.location.reload()})}getIsTienePermiso(){return"granted"===Notification.permission}suscribirse(){console.log("llego a suscribirse estado this.swPush.isEnabled: ",this.swPush.isEnabled),this.keySuscribtion()}keySuscribtion(){this.swPush.requestSubscription({serverPublicKey:c.g}).then(t=>{this.saveSuscripcion(t)}).catch(console.error)}saveSuscripcion(t){this.crudService.postFree({suscripcion:t,idcliente:this.infoTokenService.infoUsToken.idcliente},"comercio","push-suscripcion",!0).subscribe(t=>console.log(t))}}return t.\u0275fac=function(e){return new(e||t)(d.Wb(l.b),d.Wb(s.a),d.Wb(a.a))},t.\u0275prov=d.Ib({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var u=o("Q1FS");class h{}let f=(()=>{class t{constructor(t){this.crudService=t,this.keyLocal="sys::s"}setSedeInfo(t=null){this.sedeInfo=t=t||this.sedeInfo,localStorage.setItem(this.keyLocal,btoa(JSON.stringify(t)))}getSedeInfo(){const t=localStorage.getItem(this.keyLocal);return this.sedeInfo=t?JSON.parse(atob(t)):new h,this.sedeInfo}guardarEstadoOnline(t){this.crudService.postFree({estado:t},"comercio","set-online",!0).subscribe(t=>console.log(t))}loadOrdenesPendientes(t){const e={filtro:t};return new u.Observable(t=>{this.crudService.postFree(e,"comercio","get-pedidos-pendientes").subscribe(e=>{t.next(e.data)})})}loadOrdenenById(t){return new u.Observable(e=>{this.crudService.postFree({idpedido:t},"comercio","get-pedido-by-id").subscribe(t=>{const o=t.data[0];o.json_datos_delivery=JSON.parse(o.json_datos_delivery),e.next(o)})})}loadDatosImpresion(){this.crudService.getAll("comercio","get-datos-impresion",!1,!1,!0).subscribe(t=>{this.getSedeInfo(),this.sedeInfo.datos_impresion=t.data[0],this.setSedeInfo()})}loadDatosTipoPago(){this.crudService.getAll("comercio","get-tipo-pago",!1,!1,!0).subscribe(t=>{this.getSedeInfo(),this.sedeInfo.datos_tipo_pago=t.data,this.setSedeInfo()})}loadRepartidoresComercio(){return new u.Observable(t=>{this.crudService.getAll("comercio","get-comercio-repartidor-suscrito",!1,!1,!0).subscribe(e=>{t.next(e.data)})})}loadDataCierreCaja(){return new u.Observable(t=>{this.crudService.getAll("comercio","get-data-cierre-caja",!1,!1,!0).subscribe(e=>{t.next(e.data)})})}}return t.\u0275fac=function(e){return new(e||t)(d.Wb(s.a))},t.\u0275prov=d.Ib({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var b=o("bTqV");function m(t,e){1&t&&(d.Qb(0),d.Sb(1,"span",1),d.Dc(2,"Acepte las notificaciones para recibir indicaciones."),d.Rb(),d.Nb(3,"hr"),d.Pb())}let g=(()=>{class t{constructor(t,e){this.pushNotificationService=t,this.comercioService=e,this.isOnNotificactionPush=!1,this.importe=""}ngOnInit(){this.isOnNotificactionPush=this.pushNotificationService.getIsTienePermiso()}listoOnline(){this.comercioService.guardarEstadoOnline(1)}}return t.\u0275fac=function(e){return new(e||t)(d.Mb(p),d.Mb(f))},t.\u0275cmp=d.Gb({type:t,selectors:[["app-dialog-efectivo-repartidor"]],decls:11,vars:1,consts:[[4,"ngIf"],[1,"fw-100"],[1,"text-center"],["mat-flat-button","","color","primary","mat-dialog-close","",3,"click"]],template:function(t,e){1&t&&(d.Sb(0,"div"),d.Sb(1,"p"),d.Dc(2,"Parametros Iniciales: "),d.Rb(),d.Nb(3,"hr"),d.Bc(4,m,4,0,"ng-container",0),d.Sb(5,"span",1),d.Dc(6," Desde este momento estas en linea, listo para recibir pedidos. "),d.Rb(),d.Nb(7,"hr"),d.Sb(8,"div",2),d.Sb(9,"button",3),d.Zb("click",(function(){return e.listoOnline()})),d.Dc(10,"Listo"),d.Rb(),d.Rb(),d.Rb()),2&t&&(d.Ab(4),d.jc("ngIf",!e.isOnNotificactionPush))},directives:[i.m,b.a,r.d],styles:[""]}),t})();var v=o("gFX4");class y{}var S=o("7RJT");let C=(()=>{class t{constructor(t,e){this.infoTockenService=t,this.router=e,this.urlSocket=c.f,this.isSocketOpen=!1,this.isSocketOpenReconect=!1,this.isSocketOpenSource=new S.BehaviorSubject(!1),this.isSocketOpen$=this.isSocketOpenSource.asObservable(),this.msjConexSource=new S.BehaviorSubject("Cargando datos ..."),this.msjConex$=this.msjConexSource.asObservable(),this.resTipoConsumo=[],this.verificandoConexion=!1,this.infoTockenService.converToJSON()}connect(t=null,e=1){if(this.isSocketOpen)return void this.infoTockenService.setSocketId(this.socket.id);const o=this.infoTockenService.infoUsToken.usuario||t;this.socket=v(this.urlSocket,{secure:!0,rejectUnauthorized:!1,query:{idorg:o.idorg,idsede:o.idsede,idusuario:o.idusuario,isFromApp:e,isComercio:!0,firts_socketid:o.socketId}}),this.listenStatusSocket()}onRepartidorNuevoPedido(){return new u.Observable(t=>{this.socket.on("repartidor-nuevo-pedido",e=>{t.next(e)})})}onGetCarta(){return new u.Observable(t=>{this.socket.on("getLaCarta",e=>{t.next(e)})})}onGetTipoConsumo(){return new u.Observable(t=>{this.socket.on("getTipoConsumo",e=>{t.next(e)})})}getDataTipoConsumo(){const t=[];return this.resTipoConsumo.map(e=>{const o=new y;o.descripcion=e.descripcion,o.idtipo_consumo=e.idtipo_consumo,o.titulo=e.titulo,t.push(o)}),t}onItemModificado(){return new u.Observable(t=>{this.socket.on("itemModificado-pwa",e=>{t.next(e)})})}onNuevoItemAddInCarta(){return new u.Observable(t=>{this.socket.on("nuevoItemAddInCarta",e=>{t.next(e)})})}onItemResetCant(){return new u.Observable(t=>{this.socket.on("itemResetCant-pwa",e=>{t.next(e)})})}onReglasCarta(){return new u.Observable(t=>{this.socket.on("getReglasCarta",e=>{t.next(e)})})}onPedidoPagado(){return new u.Observable(t=>{this.socket.on("pedido-pagado-cliente",e=>{t.next(e)})})}onDeliveryPedidoChangeStatus(){return new u.Observable(t=>{this.socket.on("delivery-pedido-estado",e=>{t.next(e)})})}onDeliveryPedidoFin(){return new u.Observable(t=>{this.socket.on("repartidor-notifica-fin-pedido",e=>{t.next(e)})})}onGetDatosSede(){return new u.Observable(t=>{this.socket.on("getDataSede",e=>{t.next(e)})})}onGetNuevoPedido(){return new u.Observable(t=>{this.socket.on("nuevoPedido",e=>{t.next(e)})})}onGetPedidoAceptadoByReparidor(){return new u.Observable(t=>{this.socket.on("repartidor-notifica-a-comercio-pedido-aceptado",e=>{t.next(e)})})}onRepartidorNotificaUbicacion(){return new u.Observable(t=>{this.socket.on("repartidor-notifica-ubicacion",e=>{t.next(e)})})}onRepartidorNotificaFinPedido(){return new u.Observable(t=>{this.socket.on("repartidor-propio-notifica-fin-pedido",e=>{t.next(e)})})}emit(t,e){this.socket.emit(t,e)}listen(t){return new u.Observable(e=>{this.socket.on(t,t=>{e.next(t)})})}closeConnection(){try{this.socket.disconnect()}catch(t){}this.statusConexSocket(!1,"disconnect")}listenStatusSocket(){this.socket.on("finishLoadDataInitial",()=>{this.statusConexSocket(!0,""),this.isSocketOpenReconect=!0,console.log("conected socket finishLoadDataInitial")}),window.addEventListener("focus",t=>{this.verifyConexionSocket()}),window.addEventListener("online",()=>{this.showStatusConexNavigator(!0,"navigator_online")}),window.addEventListener("offline",()=>{this.showStatusConexNavigator(!1,"navigator_offline")}),this.socket.on("connect",()=>{if(console.log("socket connect"),this.statusConexSocket(!0,"connect"),this.infoTockenService.setSocketId(this.socket.id),!this.infoTockenService.verificarContunuarSession())return this.closeConnection(),void this.cerrarSessionBeforeTimeSession()}),this.socket.on("connect_failed",t=>{console.log("itento fallido de conexion",t),this.statusConexSocket(!1,"connect_failed")}),this.socket.on("connect_error",t=>{console.log("error de conexion",t),this.statusConexSocket(!1,"connect_error")}),this.socket.on("disconnect",t=>{console.log("disconnect"),this.statusConexSocket(!1,"disconnect")}),this.socket.on("verificar-conexion",t=>this.infoTockenService.verificarContunuarSession()?!0===t?(console.log("VERIFY CONECTION => OK"),void(this.verificandoConexion=!1)):(console.log("VERIFY CONECTION => FALSE"),this.closeConnection(),this.statusConexSocket(!1,"disconnect"),this.connect(),void(this.verificandoConexion=!1)):(this.closeConnection(),void this.cerrarSessionBeforeTimeSession()))}statusConexSocket(t,e){this.isSocketOpen=t,this.isSocketOpenSource.next(t);let o="Conectando datos ...";switch(e){case"conected":o="Conectando datos ...";break;case"connect_failed":o="Conectando datos ..";break;case"connect_error":o="Conectando datos .";break;case"disconnect":o="Restableciendo conexion ...";break;case"navigator_offline":o="Conexion cerrada -b ...";break;case"navigator_online":o="Conectando datos -b ..."}this.msjConexSource.next(o)}showStatusConexNavigator(t,e){this.statusConexSocket(t,e),t?console.log("navegador conectado"):console.log("!!! navegador desconectado !!")}verifyConexionSocket(){this.verificandoConexion||(this.verificandoConexion=!0,this.emit("verificar-conexion",this.socket.id),console.log("verifyConexionSocket"))}cerrarSessionBeforeTimeSession(t=!1){this.router.navigate(["../"])}}return t.\u0275fac=function(e){return new(e||t)(d.Wb(a.a),d.Wb(n.b))},t.\u0275prov=d.Ib({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var R=o("ds6q"),_=o("IW2O"),w=o("XhcP"),P=o("FKr1"),k=o("1jcm");function D(t,e){if(1&t){const t=d.Tb();d.Sb(0,"div",5),d.Sb(1,"i",6),d.Zb("click",(function(){return d.vc(t),d.dc().abrirMenuLateral()})),d.Rb(),d.Sb(2,"span",7),d.Dc(3),d.ec(4,"titlecase"),d.ec(5,"titlecase"),d.Rb(),d.Rb()}if(2&t){const t=d.dc();d.Ab(3),d.Gc(" ",d.fc(4,2,t.dataSede.sedenombre)," | ",d.fc(5,4,t.dataSede.ciudad)," ")}}let x=(()=>{class t{constructor(t,e){this.infoTokenService=t,this.comercioService=e,this.changeTogle=new d.o(!1),this.openMenuLateral=new d.o(!1),this.isTogleActive=!0}ngOnInit(){setTimeout(()=>{this.dataSede=this.comercioService.getSedeInfo(),this.infoTokenService.infoUsToken.isOnline=!0},1500)}repartidorOnLine(t){this.isTogleActive=t.checked,this.infoTokenService.setisOnline(this.isTogleActive),this.changeTogle.emit(this.isTogleActive)}abrirMenuLateral(){this.openMenuLateral.emit(!0)}}return t.\u0275fac=function(e){return new(e||t)(d.Mb(a.a),d.Mb(f))},t.\u0275cmp=d.Gb({type:t,selectors:[["app-tool-bar-repartidor"]],outputs:{changeTogle:"changeTogle",openMenuLateral:"openMenuLateral"},decls:6,vars:2,consts:[[1,"header-app","p-3","d-flex","justify-content-between"],["class","text-truncate",4,"ngIf"],[1,"d-flex","align-items-center"],[1,"fs-12","pr-2"],[3,"checked","change"],[1,"text-truncate"],[1,"fa","fa-bars","pr-2","xCursor",3,"click"],[1,"fs-14","fw-100","text-truncate"]],template:function(t,e){1&t&&(d.Sb(0,"div",0),d.Bc(1,D,6,6,"div",1),d.Sb(2,"div",2),d.Sb(3,"span",3),d.Dc(4,"En Linea"),d.Rb(),d.Sb(5,"mat-slide-toggle",4),d.Zb("change",(function(t){return e.repartidorOnLine(t)})),d.Rb(),d.Rb(),d.Rb()),2&t&&(d.Ab(1),d.jc("ngIf",e.dataSede),d.Ab(4),d.jc("checked",e.isTogleActive))},directives:[i.m,k.a],pipes:[i.u],styles:[""]}),t})();const A=function(){return["ordenes","lista"]},O=function(){return["ordenes","maps"]},I=function(){return["resumen-dia"]},E=function(){return["repartidores"]};let T=(()=>{class t{constructor(t,e,o,i,n,r,s){this.dialog=t,this.socketService=e,this.comercioService=o,this.router=i,this.infoTokenService=n,this.crudService=r,this.pushNotificationService=s,this.destroy$=new R.Subject,this.showPanelLeft=!1}ngOnInit(){this.socketService.connect(),this.listenDatosSede(),this.comercioService.guardarEstadoOnline(1),this.pushNotificationService.getIsTienePermiso(),setTimeout(()=>{this.pushNotificationService.suscribirse()},1500)}ngOnDestroy(){this.destroy$.next(!0),this.destroy$.unsubscribe()}comercioOnLine(t){if(!t)return void this.comercioService.guardarEstadoOnline(0);const e=new r.e;e.disableClose=!0,e.hasBackdrop=!0,this.dialog.open(g,e)}listenDatosSede(){this.socketService.onGetDatosSede().pipe(Object(_.takeUntil)(this.destroy$)).subscribe(t=>{this.comercioService.setSedeInfo(t[0].datossede[0]),console.log("datos sede",t),this.comercioService.loadDatosImpresion(),this.comercioService.loadDatosTipoPago()})}openServidorPrint(){console.log("aa");const t=btoa(JSON.stringify({o:this.infoTokenService.infoUsToken.usuario.idorg,s:this.infoTokenService.infoUsToken.usuario.idsede}));window.open("http://appx.papaya.com.pe/print-server/print-server.html?o="+t,"Servidor de Impresion")}cerrarSession(){this.comercioService.guardarEstadoOnline(0),this.socketService.closeConnection(),this.router.navigate(["../"])}}return t.\u0275fac=function(e){return new(e||t)(d.Mb(r.b),d.Mb(C),d.Mb(f),d.Mb(n.b),d.Mb(a.a),d.Mb(s.a),d.Mb(p))},t.\u0275cmp=d.Gb({type:t,selectors:[["app-main"]],decls:42,vars:9,consts:[[1,"example-container"],["mode","over",1,"example-sidenav",3,"opened","closedStart"],["drawerIzq",""],[2,"min-width","250px"],[1,"p-3","border-bottom"],[1,"w-100","text-center"],["src","assets/icons/icon-72x72.png"],[1,"pt-1","fw-600","fs-12","text-secondary","m-0"],[1,"pt-1","fw-100","fs-11","text-secondary","m-0"],[1,"p-3","border-bottom","w-100",3,"click"],[1,"fw-600","fs-13"],[1,"fa","fa-arrow-left","pr-2"],[1,"fs-13"],["matRipple","",1,"border-bottom","p-3","xCursor",3,"routerLink","click"],[1,"fa","fa-paper-plane","pr-2"],[1,"fa","fa-map","pr-2"],[1,"fa","fa-object-group","pr-2"],[1,"fa","fa-motorcycle","pr-2"],["matRipple","",1,"border-bottom","p-3","xCursor",3,"click"],["aria-hidden","true",1,"fa","fa-print","pr-2"],[1,"fa","fa-close","pr-2"],[1,"text-info","fs-11"],[1,"animated","fadeIn"],[3,"changeTogle","openMenuLateral"],[1,"content-body"]],template:function(t,e){if(1&t){const t=d.Tb();d.Sb(0,"mat-drawer-container",0),d.Sb(1,"mat-drawer",1,2),d.Zb("closedStart",(function(){return e.showPanelLeft=!1})),d.Sb(3,"div",3),d.Sb(4,"div",4),d.Sb(5,"div",5),d.Nb(6,"img",6),d.Sb(7,"p",7),d.Dc(8,"Papaya Comercio"),d.Rb(),d.Sb(9,"p",8),d.Dc(10,"papaya.com.pe"),d.Rb(),d.Rb(),d.Rb(),d.Sb(11,"div",9),d.Zb("click",(function(){return d.vc(t),d.tc(2).toggle()})),d.Sb(12,"span",10),d.Nb(13,"i",11),d.Dc(14,"Opciones"),d.Rb(),d.Rb(),d.Sb(15,"div",12),d.Sb(16,"div",13),d.Zb("click",(function(){return d.vc(t),d.tc(2).toggle()})),d.Nb(17,"i",14),d.Dc(18," Pedidos en el panel "),d.Rb(),d.Sb(19,"div",13),d.Zb("click",(function(){return d.vc(t),d.tc(2).toggle()})),d.Nb(20,"i",15),d.Dc(21," Pedidos en el mapa "),d.Rb(),d.Sb(22,"div",13),d.Zb("click",(function(){return d.vc(t),d.tc(2).toggle()})),d.Nb(23,"i",16),d.Dc(24," Resumen del dia. "),d.Rb(),d.Sb(25,"div",13),d.Zb("click",(function(){return d.vc(t),d.tc(2).toggle()})),d.Nb(26,"i",17),d.Dc(27," Repartidores "),d.Rb(),d.Sb(28,"div",18),d.Zb("click",(function(){d.vc(t);const o=d.tc(2);return e.openServidorPrint(),o.toggle()})),d.Nb(29,"i",19),d.Dc(30," Servidor de Impresion "),d.Rb(),d.Sb(31,"div",18),d.Zb("click",(function(){return e.cerrarSession()})),d.Nb(32,"i",20),d.Sb(33,"span"),d.Dc(34," Cerrar Sesion"),d.Rb(),d.Nb(35,"br"),d.Sb(36,"span",21),d.Dc(37,"Al cerrar dejara de recibir pedidos."),d.Rb(),d.Rb(),d.Rb(),d.Rb(),d.Rb(),d.Sb(38,"div",22),d.Sb(39,"app-tool-bar-repartidor",23),d.Zb("changeTogle",(function(t){return e.comercioOnLine(t)}))("openMenuLateral",(function(t){return e.showPanelLeft=t})),d.Rb(),d.Sb(40,"div",24),d.Nb(41,"router-outlet"),d.Rb(),d.Rb(),d.Rb()}2&t&&(d.Ab(1),d.jc("opened",e.showPanelLeft),d.Ab(15),d.jc("routerLink",d.nc(5,A)),d.Ab(3),d.jc("routerLink",d.nc(6,O)),d.Ab(3),d.jc("routerLink",d.nc(7,I)),d.Ab(3),d.jc("routerLink",d.nc(8,E)))},directives:[w.b,w.a,P.i,n.c,x,n.e],styles:[".content-body[_ngcontent-%COMP%]{margin-top:56px;height:calc(100vh - 56px);overflow:auto}"]}),t})(),F=(()=>{class t{constructor(){}primeraConMayusculas(t){return(t=t.toLowerCase()).charAt(0).toUpperCase()+t.slice(1)}reformatDate(t){const e=t.split("-");return e[2]+"/"+e[1]+"/"+e[0]}xTiempoTranscurridos_2(t){const e=this.xDevolverHora().split(":"),o=t.split(":"),i=new Date,n=new Date;null===o[2]&&(o[2]="00"),n.setHours(e[0],e[1],e[2]),i.setHours(o[0],o[1],o[2]);const r=Math.floor((n-i)/1e3),s=r%60,a=Math.floor(r/60),c=a%60,d=Math.floor(a/60);return this.xCeroIzq(d%24,2)+":"+this.xCeroIzq(c,2)+":"+this.xCeroIzq(s,2)}xTiempoTranscurridos_milisegundo(t){new Date(t),new Date}xDevolverHora(){const t=new Date;return this.xCeroIzq(t.getHours(),2)+":"+this.xCeroIzq(t.getMinutes(),2)+":"+this.xCeroIzq(t.getSeconds(),2)}xCeroIzq(t,e){for(t=t.toString();t.length<e;)t="0"+t;return t}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=d.Ib({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),j=(()=>{class t{constructor(t,e,o){this.comercioService=t,this.crudService=e,this.socketService=o,this.isPropioRepartidores=!1,this.isComercioAfiliado=!0,this.isComercioFacturacionE=!0,this._estadoPedido={},this.infoComercio=this.comercioService.getSedeInfo(),this.isPropioRepartidores=0!==this.infoComercio.pwa_delivery_servicio_propio,this.isComercioAfiliado=0!==this.infoComercio.pwa_comercio_afiliado,this.isComercioFacturacionE=0!==this.infoComercio.facturacion_e_activo}showMoreButtoms(){}setEstadoPedido(t,e){const o=this.getEstadoPedido(e,!0);return this.crudService.postFree({idpedido:t,estado:o.estado},"comercio","set-estado-pedido").subscribe(t=>{console.log(".")}),o}setFlagSolicitaRepartidorRed(t){return new u.Observable(e=>{this.crudService.postFree({idpedido:t},"comercio","set-flag-solicita-repartidor-papaya").subscribe(t=>{this.socketService.emit("set-solicitar-repartidor-papaya",null),e.next(t)})})}getEstadoPedido(t,e=!1){let o="",i="",n="Pendiente";switch(this._estadoPedido.showBtnFacturacion=!1,t){case"P":o=e?"A":"P",i=e?"Listo, Preparado.":"Aceptar Pedido",n=e?"Aceptado":"Pendiente";break;case"A":o=e?"D":"A",i=e?"Entregar al repartidor":"Listo, Preparado.",this._estadoPedido.showBtnFacturacion=e,n=e?"Listo":"Aceptado";break;case"D":o=e?"R":"D",i=e?"":"Entregar al repartidor",n="Listo",this._estadoPedido.showBtnFacturacion=!e;break;case"R":o="E",i="",n="Listo";break;case"E":o="E",i="",n="Entregado"}return this._estadoPedido.estado=o,this._estadoPedido.estadoTitle=n,this._estadoPedido.btnTitulo=i,this._estadoPedido}getRepartidores(){return new u.Observable(t=>{this.crudService.getAll("comercio","get-comercio-repartidor",!1,!1,!0).subscribe(e=>{t.next(e.data)})})}darFormatoSubTotales(t=null,e=0,o=!1){if(1===this.comercioService.sedeInfo.pwa_delivery_servicio_propio&&!o)return t;(1===this.comercioService.sedeInfo.pwa_delivery_comercio_paga_entrega||o)&&t.splice(t.length-1,0,{descripcion:"Costo de Entrega",esImpuesto:0,id:-4,importe:-e,quitar:!1,tachado:!1,visible:!1,visible_cpe:!1});const i=t[t.length-1];return 1===this.comercioService.sedeInfo.pwa_delivery_servicio_propio?(i.importe=t.filter(t=>"TOTAL"!==t.descripcion).map(t=>parseFloat(t.importe)).reduce((t,e)=>t+e,0),t):(i.importe=t.filter(t=>-2!==t.id&&-3!==t.id&&"TOTAL"!==t.descripcion).map(t=>parseFloat(t.importe)).reduce((t,e)=>t+e,0),t.filter(t=>-2!==t.id&&-3!==t.id))}setRepartidorToPedido(t,e){const o={idrepartidor:t,idpedido:e.idpedido};this.socketService.emit("set-repartidor-pedido-asigna-comercio",e),this.crudService.postFree(o,"comercio","set-repartidor-to-pedido").subscribe(t=>{console.log(".")})}}return t.\u0275fac=function(e){return new(e||t)(d.Wb(f),d.Wb(s.a),d.Wb(C))},t.\u0275prov=d.Ib({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();class B{}let M=(()=>{class t{constructor(){this.isBusquedaSource=new S.BehaviorSubject(!1),this.isBusqueda$=this.isBusquedaSource.asObservable(),this.charBuquedaSource=new S.BehaviorSubject(""),this.charBuqueda$=this.charBuquedaSource.asObservable(),this.hayCuentaBusquedaSource=new S.BehaviorSubject(!1),this.hayCuentaBusqueda$=this.hayCuentaBusquedaSource.asObservable(),this.hayDatosSedeSource=new S.BehaviorSubject(!1),this.hayDatosSede$=this.hayDatosSedeSource.asObservable(),this.isUsuarioClienteSource=new S.BehaviorSubject(!1),this.isUsuarioCliente$=this.isUsuarioClienteSource.asObservable(),this.estadoPedidoSource=new S.BehaviorSubject(new B),this.estadoPedido$=this.estadoPedidoSource.asObservable(),this.hayPedidoPendienteSource=new S.BehaviorSubject(!1),this.hayPedidoPendiente$=this.hayPedidoPendienteSource.asObservable(),this.isPagePagarCuentaShowSource=new S.BehaviorSubject(!1),this.isPagePagarCuentaShow$=this.isPagePagarCuentaShowSource.asObservable(),this.isBtnPagoShowSource=new S.BehaviorSubject(!1),this.isBtnPagoShow$=this.isBtnPagoShowSource.asObservable(),this.isPagoSuccesSource=new S.BehaviorSubject(!1),this.isPagoSucces$=this.isPagoSuccesSource.asObservable(),this.isChangeDireccionDeliverySource=new S.BehaviorSubject(null),this.isChangeDireccionDelivery$=this.isChangeDireccionDeliverySource.asObservable(),this.isOutEstablecimientoDeliverySource=new S.BehaviorSubject(!1),this.isOutEstablecimientoDelivery$=this.isOutEstablecimientoDeliverySource.asObservable(),this.efectivoManoSource=new S.BehaviorSubject(0),this.efectivoManoMano$=this.efectivoManoSource.asObservable(),this.pedidoModificadoSource=new S.BehaviorSubject(null),this.pedidoModificado$=this.pedidoModificadoSource.asObservable(),this.notificaPedidoNuevoSource=new S.BehaviorSubject(null),this.notificaPedidoNuevo$=this.notificaPedidoNuevoSource.asObservable()}setIsBusqueda(){this.isBusquedaSource.value?this.isBusquedaSource.next(!1):setTimeout(()=>{this.isBusquedaSource.next(!0)},250)}setCharBusqueda(t){this.charBuquedaSource.next(t)}setHayCuentaBuesqueda(t){this.hayCuentaBusquedaSource.next(t)}setHayDatosSede(t){this.hayDatosSedeSource.next(t)}setIsUsuarioCliente(t){this.isUsuarioClienteSource.next(t)}setEstadoPedido(t){this.estadoPedidoSource.next(t)}setHayPedidoPendiente(t){this.hayPedidoPendienteSource.next(t)}setIsPagePagarCuentaShow(t){this.isPagePagarCuentaShowSource.next(t)}setIsBtnPagoShow(t){this.isBtnPagoShowSource.next(t)}setPagoSuccess(t){this.isPagoSuccesSource.next(t)}setChangeDireccionDelivery(t){this.isChangeDireccionDeliverySource.next(t)}setIsOutEstablecimientoDelivery(t){this.isOutEstablecimientoDeliverySource.next(t)}setEfectivoMano(t){this.efectivoManoSource.next(t)}setPedidoModificado(t){this.pedidoModificadoSource.next(t)}setNotificaNuevoPedido(t){this.notificaPedidoNuevoSource.next(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=d.Ib({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),N=(()=>{class t{constructor(t){switch(this.msj="",this.titleBtnCancel="No",this.titleBtnSuccess="Si, por favor",t?t.idMjs:0){case 0:this.msj="Desea que se le notifique cuando su pedido este listo?";break;case 1:this.msj="Desea saber cuando tenga descuentos y/o ofertas?";break;case 2:this.msj="Esta seguro de eliminar este registro?";break;case 3:this.msj=`Deseo Solicitar un repartidor de Papaya Express para este pedido. Al confirmar no podra asignar este pedido a ning\xfan otro repartidor.\n                    Ademas el comercio asume el costo del servicio de entrega (S/. ${parseFloat(t.costoEntrega).toFixed(2)}). Desea confirmar su solicitud?`}}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(d.Mb(r.a))},t.\u0275cmp=d.Gb({type:t,selectors:[["app-dialog-desicion"]],decls:10,vars:4,consts:[[1,"p-3"],[1,"fw-100","fs-15"],["mat-flat-button","","color","primary",3,"mat-dialog-close"],["mat-stroked-button","","mat-dialog-close","",1,"ml-1"]],template:function(t,e){1&t&&(d.Sb(0,"div",0),d.Sb(1,"span",1),d.Dc(2),d.Rb(),d.Nb(3,"hr"),d.Sb(4,"mat-dialog-actions"),d.Sb(5,"button",2),d.Dc(6),d.Rb(),d.Sb(7,"button",3),d.Dc(8),d.Rb(),d.Rb(),d.Nb(9,"br"),d.Rb()),2&t&&(d.Ab(2),d.Ec(e.msj),d.Ab(3),d.jc("mat-dialog-close",!0),d.Ab(1),d.Ec(e.titleBtnSuccess),d.Ab(2),d.Ec(e.titleBtnCancel))},directives:[r.c,b.a,r.d],styles:[""]}),t})();var L=o("wZkO");class q{constructor(){this.tipoconsumo=[]}}let z=(()=>{class t{constructor(t){this.url_img=c.d,this.itemProducto=t.item,console.log(this.itemProducto)}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(d.Mb(r.a))},t.\u0275cmp=d.Gb({type:t,selectors:[["app-dialog-img-item"]],decls:13,vars:6,consts:[[1,"w-100"],[1,"img-thumbnail",2,"max-width","500px",3,"src","alt"],[1,"text-center","fs-13","pt-2"],[1,"fw-600"],[1,"text-secondary"],[1,"text-center"],["mat-flat-button","","color","primary","mat-dialog-close",""]],template:function(t,e){1&t&&(d.Sb(0,"div",0),d.Nb(1,"img",1),d.Rb(),d.Sb(2,"div",2),d.Sb(3,"p",3),d.Dc(4),d.Rb(),d.Sb(5,"p",4),d.Dc(6),d.Rb(),d.Sb(7,"p",3),d.Dc(8),d.Rb(),d.Rb(),d.Nb(9,"hr"),d.Sb(10,"div",5),d.Sb(11,"button",6),d.Dc(12,"Cerrar"),d.Rb(),d.Rb()),2&t&&(d.Ab(1),d.mc("src","",e.url_img,"",e.itemProducto.img,"",d.wc),d.kc("alt",e.itemProducto.img),d.Ab(3),d.Ec(e.itemProducto.des),d.Ab(2),d.Ec(e.itemProducto.detalles),d.Ab(2),d.Fc("Cantidad: ",e.itemProducto.cantidad_seleccionada,""))},directives:[b.a,r.d],styles:["p[_ngcontent-%COMP%]{margin:0}"]}),t})();function U(t,e){1&t&&(d.Sb(0,"div",7),d.Sb(1,"span"),d.Dc(2,"Orden "),d.Rb(),d.Rb())}function $(t,e){if(1&t&&(d.Sb(0,"div",11),d.Dc(1),d.Rb()),2&t){const t=d.dc(2).$implicit;d.Ab(1),d.Ec(t.count_items)}}const W=function(t){return{"pl-4":t}};function H(t,e){if(1&t&&(d.Sb(0,"li",18),d.Sb(1,"div",19),d.Dc(2),d.ec(3,"number"),d.Rb(),d.Sb(4,"div",20),d.Dc(5),d.ec(6,"number"),d.Rb(),d.Rb()),2&t){const t=e.$implicit,o=d.dc(8);d.jc("matRippleColor",o.rippleColorSubItem),d.Ab(1),d.jc("ngClass",d.oc(12,W,o.isHayCuentaBusqueda)),d.Ab(1),d.Gc(" ",d.gc(3,6,t.cantidad_seleccionada,"2.")," ",t.des," "),d.Ab(2),d.jc("hidden",0===t.precio),d.Ab(1),d.Fc(" + ",d.gc(6,9,t.precio,"0.2")," ")}}function Q(t,e){if(1&t&&(d.Qb(0),d.Sb(1,"div"),d.Sb(2,"ul",10),d.Bc(3,H,7,14,"li",17),d.Rb(),d.Rb(),d.Pb()),2&t){const t=d.dc(2).$implicit;d.Ab(3),d.jc("ngForOf",t.subitems_view)}}function G(t,e){if(1&t){const t=d.Tb();d.Qb(0),d.Sb(1,"li",12),d.Zb("click",(function(){d.vc(t);const e=d.dc().$implicit;return d.dc(5).showImg(e)})),d.Sb(2,"div",13),d.Dc(3),d.ec(4,"number"),d.Rb(),d.Sb(5,"div",14),d.Dc(6),d.ec(7,"lowercase"),d.Sb(8,"span",15),d.Dc(9),d.Rb(),d.Rb(),d.Sb(10,"div",16),d.Dc(11),d.ec(12,"number"),d.Rb(),d.Rb(),d.Bc(13,Q,4,1,"ng-container",4),d.Pb()}if(2&t){const t=d.dc().$implicit,e=d.dc(5);d.Ab(1),d.jc("matRippleColor",e.rippleColor),d.Ab(2),d.Ec(d.gc(4,7,t.cantidad_seleccionada,"2.")),d.Ab(3),d.Fc("",d.fc(7,10,t.des)," "),d.Ab(2),d.jc("hidden",!t.indicaciones),d.Ab(1),d.Fc("( ",t.indicaciones," )"),d.Ab(2),d.Ec(d.gc(12,12,t.precio_print,"0.2")),d.Ab(2),d.jc("ngIf",t.subitems_view)}}function V(t,e){if(1&t&&(d.Sb(0,"div"),d.Bc(1,G,14,15,"ng-container",4),d.Rb()),2&t){const t=e.$implicit;d.Ab(1),d.jc("ngIf",t.cantidad_seleccionada>0)}}const X=function(t){return{"bg-transparent":t}};function Z(t,e){if(1&t&&(d.Qb(0),d.Sb(1,"div",8),d.Sb(2,"span"),d.Dc(3),d.ec(4,"titlecase"),d.Rb(),d.Bc(5,$,2,1,"div",9),d.Rb(),d.Sb(6,"ul",10),d.Bc(7,V,2,1,"div",6),d.Rb(),d.Pb()),2&t){const t=d.dc().$implicit,e=d.dc(3);d.Ab(1),d.jc("ngClass",d.oc(6,X,!e.showTitulo)),d.Ab(2),d.Ec(d.fc(4,4,t.des)),d.Ab(2),d.jc("ngIf",e.showTitulo),d.Ab(2),d.jc("ngForOf",t.items)}}function J(t,e){if(1&t&&(d.Sb(0,"div"),d.Bc(1,Z,8,8,"ng-container",4),d.Rb()),2&t){const t=e.$implicit;d.Ab(1),d.jc("ngIf",t.count_items>0)}}function Y(t,e){if(1&t&&(d.Qb(0),d.Bc(1,U,3,0,"div",5),d.Bc(2,J,2,1,"div",6),d.Pb()),2&t){const t=d.dc().$implicit,e=d.dc();d.Ab(1),d.jc("ngIf",e.showTitulo),d.Ab(1),d.jc("ngForOf",t.secciones)}}function K(t,e){if(1&t&&(d.Sb(0,"div",3),d.Bc(1,Y,3,2,"ng-container",4),d.Rb()),2&t){const t=e.$implicit;d.Ab(1),d.jc("ngIf",t.count_items_seccion>0)}}function tt(t,e){if(1&t&&(d.Sb(0,"li",24),d.Sb(1,"div",10),d.Dc(2),d.ec(3,"titlecase"),d.Rb(),d.Sb(4,"div"),d.Dc(5),d.ec(6,"number"),d.Rb(),d.Rb()),2&t){const t=e.$implicit,o=d.dc(2);d.jc("matRippleColor",o.rippleColor),d.Ab(2),d.Ec(d.fc(3,3,t.descripcion)),d.Ab(3),d.Ec(d.gc(6,5,t.importe,"0.2"))}}function et(t,e){if(1&t&&(d.Sb(0,"div",21),d.Sb(1,"ul",22),d.Bc(2,tt,7,8,"li",23),d.Rb(),d.Rb()),2&t){const t=d.dc();d.Ab(2),d.jc("ngForOf",t.elArrSubtTotales)}}let ot=(()=>{class t{constructor(t){this.dialog=t,this.showTitulo=!1}ngOnInit(){}showImg(t){if(!t.img||""===t.img)return;const e=new r.e;e.disableClose=!0,e.hasBackdrop=!0,e.data={item:t},this.dialog.open(z,e)}}return t.\u0275fac=function(e){return new(e||t)(d.Mb(r.b))},t.\u0275cmp=d.Gb({type:t,selectors:[["app-com-resumen-pedido"]],inputs:{elPedido:"elPedido",elArrSubtTotales:"elArrSubtTotales",showTitulo:"showTitulo"},decls:3,vars:2,consts:[[1,"w-100","fs-13"],["class","xCursor",4,"ngFor","ngForOf"],["class","div-total",4,"ngIf"],[1,"xCursor"],[4,"ngIf"],["class","div-plr titulo-tpc",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"div-plr","titulo-tpc"],[1,"div-plr","titulo-seccion",3,"ngClass"],["class","countItem countSeccion",4,"ngIf"],[1,"w-100"],[1,"countItem","countSeccion"],["matRipple","",1,"d-flex","div-plr","li-item",3,"matRippleColor","click"],[1,"pr-2","fw-100"],[1,"w-100","fw-100","pr-1"],[3,"hidden"],[1,"fw-100"],["class","d-flex div-plr li-item fw-100 fs-13 text-secondary subitem-content-resumen pl-3","matRipple","",3,"matRippleColor",4,"ngFor","ngForOf"],["matRipple","",1,"d-flex","div-plr","li-item","fw-100","fs-13","text-secondary","subitem-content-resumen","pl-3",3,"matRippleColor"],[1,"d-flex","w-100",3,"ngClass"],[1,"fs-11","text-right",2,"width","45px",3,"hidden"],[1,"div-total"],[1,"w-100","ul-total"],["class","d-flex div-plr li-item","matRipple","",3,"matRippleColor",4,"ngFor","ngForOf"],["matRipple","",1,"d-flex","div-plr","li-item",3,"matRippleColor"]],template:function(t,e){1&t&&(d.Sb(0,"div",0),d.Bc(1,K,2,1,"div",1),d.Bc(2,et,3,1,"div",2),d.Rb()),2&t&&(d.Ab(1),d.jc("ngForOf",e.elPedido.tipoconsumo),d.Ab(1),d.jc("ngIf",e.elArrSubtTotales))},directives:[i.l,i.m,i.k,P.i],pipes:[i.u,i.e,i.j],styles:[".xcontent[_ngcontent-%COMP%]{top:0;bottom:0}.div-plr[_ngcontent-%COMP%]{padding-left:7px;padding-right:7px}.div-content-all[_ngcontent-%COMP%]{top:0;position:-webkit-sticky;position:sticky}.titulo-tpc[_ngcontent-%COMP%]{background:#424242;color:#e0e0e0}.titulo-seccion[_ngcontent-%COMP%], .titulo-tpc[_ngcontent-%COMP%]{padding-top:8px;padding-bottom:8px}.titulo-seccion[_ngcontent-%COMP%]{background:#ffebcd}.li-item[_ngcontent-%COMP%]{padding-top:6px;padding-bottom:6px;border-top:1px solid #e0e0e0}.div-total[_ngcontent-%COMP%]{border-top:2px dashed #9e9e9e}.ul-total[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{font-size:20px;font-weight:800}.countItem[_ngcontent-%COMP%]{border-radius:50%;line-height:1.2;font-size:12px;min-width:20px;min-height:20px;padding:4px;text-align:center}.countTpc[_ngcontent-%COMP%]{float:right;background:#212121;color:#bdbdbd}.countSeccion[_ngcontent-%COMP%]{float:right;color:#616161;background:#ffcc80}.btn-footer-cancel[_ngcontent-%COMP%]{background:#f44336}.btn-footer-cancel[_ngcontent-%COMP%], .btn-footer-next[_ngcontent-%COMP%]{padding:12px;color:#fff;text-align:center}.btn-footer-next[_ngcontent-%COMP%]{background:#00c853}.btn-footer-next.xdisabled[_ngcontent-%COMP%]{pointer-events:none;opacity:.5;background:#ccc}.bg-1[_ngcontent-%COMP%]{background:#faebd7}.bg-2[_ngcontent-%COMP%]{background:linen}.xh-100[_ngcontent-%COMP%]{height:100vh}.subitem-content-resumen[_ngcontent-%COMP%]{background:#eceff1;font-size:12px;color:#616161;display:-webkit-flex;display:flex}.subitem-content-resumen[_ngcontent-%COMP%]   .btnCount[_ngcontent-%COMP%]{transition:all .1s ease-in;height:18px;cursor:pointer;opacity:0}.subitem-content-resumen[_ngcontent-%COMP%]:hover   .btnCount[_ngcontent-%COMP%]{opacity:1}.subitem-content-resumen[_ngcontent-%COMP%]   .btnMenos[_ngcontent-%COMP%]{font-weight:700;background:#d32f2f;padding:0 8px;margin-right:3px;border-radius:3px;color:#fff}.subitem-content-resumen[_ngcontent-%COMP%]   .btnMas[_ngcontent-%COMP%]{font-weight:700;background:#1565c0;padding:0 8px;margin-left:3px;border-radius:3px;color:#fff}"]}),t})(),it=(()=>{class t{constructor(){}Unidades(t){switch(t){case 1:return"UN";case 2:return"DOS";case 3:return"TRES";case 4:return"CUATRO";case 5:return"CINCO";case 6:return"SEIS";case 7:return"SIETE";case 8:return"OCHO";case 9:return"NUEVE"}return""}Decenas(t){const e=Math.floor(t/10),o=t-10*e;switch(e){case 1:switch(o){case 0:return"DIEZ";case 1:return"ONCE";case 2:return"DOCE";case 3:return"TRECE";case 4:return"CATORCE";case 5:return"QUINCE";default:return"DIECI"+this.Unidades(o)}case 2:switch(o){case 0:return"VEINTE";default:return"VEINTI"+this.Unidades(o)}case 3:return this.DecenasY("TREINTA",o);case 4:return this.DecenasY("CUARENTA",o);case 5:return this.DecenasY("CINCUENTA",o);case 6:return this.DecenasY("SESENTA",o);case 7:return this.DecenasY("SETENTA",o);case 8:return this.DecenasY("OCHENTA",o);case 9:return this.DecenasY("NOVENTA",o);case 0:return this.Unidades(o)}}DecenasY(t,e){return e>0?t+" Y "+this.Unidades(e):t}Centenas(t){const e=Math.floor(t/100),o=t-100*e;switch(e){case 1:return o>0?"CIENTO "+this.Decenas(o):"CIEN";case 2:return"DOSCIENTOS "+this.Decenas(o);case 3:return"TRESCIENTOS "+this.Decenas(o);case 4:return"CUATROCIENTOS "+this.Decenas(o);case 5:return"QUINIENTOS "+this.Decenas(o);case 6:return"SEISCIENTOS "+this.Decenas(o);case 7:return"SETECIENTOS "+this.Decenas(o);case 8:return"OCHOCIENTOS "+this.Decenas(o);case 9:return"NOVECIENTOS "+this.Decenas(o)}return this.Decenas(o)}Seccion(t,e,o,i){const n=Math.floor(t/e),r=t-n*e;let s="";return n>0&&(s=n>1?this.Centenas(n)+" "+i:o),r>0&&(s+=""),s}Miles(t){const e=t-1e3*Math.floor(t/1e3),o=this.Seccion(t,1e3,"UN MIL","MIL"),i=this.Centenas(e);return""===o?i:o+" "+i}Millones(t){const e=t-1e6*Math.floor(t/1e6),o=this.Seccion(t,1e6,"UN MILLON DE","MILLONES DE"),i=this.Miles(e);return""===o?i:o+" "+i}NumeroALetras(t,e=null){e=e||{};const o={numero:t,enteros:Math.floor(t),centavos:Math.round(100*t)-100*Math.floor(t),letrasCentavos:"",letrasMonedaPlural:e.plural||"SOLES",letrasMonedaSingular:e.singular||"SOLES",letrasMonedaCentavoPlural:e.centPlural||"CENTIMOS",letrasMonedaCentavoSingular:e.centSingular||"CENTIMOS"};if(o.centavos>0){let t;t=1===o.centavos?this.Millones(o.centavos)+" "+o.letrasMonedaCentavoSingular:this.Millones(o.centavos)+" "+o.letrasMonedaCentavoPlural,o.letrasCentavos="CON "+t}return 0===o.enteros?"CERO "+o.letrasMonedaPlural+" "+o.letrasCentavos:1===o.enteros?this.Millones(o.enteros)+" "+o.letrasMonedaSingular+" "+o.letrasCentavos:this.Millones(o.enteros)+" "+o.letrasMonedaPlural+" "+o.letrasCentavos}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=d.Ib({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),nt=(()=>{class t{constructor(t,e,o){this.comercioService=t,this.crudService=e,this.numeroLetraService=o}getTipoComprobantes(){return new u.Observable(t=>{this.crudService.getAll("comercio","get-tipo-comprobantes",!1,!1,!0).subscribe(e=>{t.next(e.data)})})}guardarClienteNuevo(t){return new u.Observable(e=>{this.crudService.postFree({cliente:t},"consulta","registrar-cliente-nuevo").subscribe(t=>{e.next(t.data)})})}xCargarDatosAEstructuraImpresion(t,e){let o=[];t.tipoconsumo.map(t=>{o[0]=t,o[0].des="Orden",o[0].titulo="Orden",o[0].items=[]});const i=[];t.tipoconsumo.map(t=>{t.secciones.map(t=>t.items.map(t=>i.push(t)))}),o=JSON.parse(JSON.stringify(o).replace(/descripcion/g,"des")),o[0].secciones=null,i.map((t,e)=>{t.visible&&(t.id=t.iditem,t.des_seccion=t.seccion,t.punitario=t.precio_unitario,t.cantidad=t.cantidad_seleccionada,t.idtipo_consumo=0,o[0].items.push(t))});let n=0;return e.map(t=>{if(void 0===t.id)return;if(0===t.id)return;if(!0===t.tachado)return;if(1===t.esImpuesto)return;const e=t.id.toString().indexOf("a")>=0?"ADICIONALES":"SERVICIOS",i=t.punitario?parseFloat(t.punitario):parseFloat(t.importe),r=parseFloat(t.importe)/i,s=o[0].items.length+1;n=parseFloat(t.importe),o[0].items.push({id:s.toString(),cantidad:r,des:t.descripcion.toUpperCase(),punitario:i,precio_total:t.importe,seccion:e})}),0!==n&&(n=parseFloat(e[0].importe)+n,e[0].importe=n),o}cocinarFactura(t,e,o,i,n){const r=this.comercioService.getSedeInfo(),s=o[o.length-1],a=this.numeroLetraService.NumeroALetras(s.importe);s.importe_letras=a,this.crudService.postFree({items:e,subtotales:o,comprobante:i,cliente:n,sede:r},"service","facturacion-e").subscribe(e=>{this.crudService.postFree({idpedido:t},"comercio","set-pwa-facturado").subscribe(t=>{})})}darFormatoSubTotalesParaFacturacion(t=null){const e=t.filter(t=>-4===t.id)[0];return e?(t[t.length-1].importe+=-1*e.importe,t.filter(t=>-4!==t.id)):t}}return t.\u0275fac=function(e){return new(e||t)(d.Wb(f),d.Wb(s.a),d.Wb(it))},t.\u0275prov=d.Ib({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var rt=o("kmnG"),st=o("d3UM"),at=o("qFsG"),ct=o("3Pt+"),dt=o("bv9b");function lt(t,e){if(1&t&&(d.Sb(0,"mat-option",17),d.Dc(1),d.Rb()),2&t){const t=e.$implicit;d.jc("value",e.index),d.Ab(1),d.Ec(t.descripcion)}}function pt(t,e){if(1&t){const t=d.Tb();d.Qb(0),d.Sb(1,"button",18),d.Zb("click",(function(){return d.vc(t),d.dc(2).emitirFacturar()})),d.Dc(2,"Emitir Comprobante "),d.Rb(),d.Pb()}if(2&t){const t=d.dc(2);d.Ab(1),d.jc("disabled",!t.loadConsulta&&!t.isValidAll)}}function ut(t,e){1&t&&(d.Sb(0,"button",19),d.Nb(1,"i",20),d.Dc(2," Procesando "),d.Rb()),2&t&&d.jc("disabled",!0)}function ht(t,e){if(1&t&&(d.Qb(0),d.Bc(1,pt,3,1,"ng-container",15),d.Bc(2,ut,3,1,"ng-template",null,16,d.Cc),d.Pb()),2&t){const t=d.tc(3),e=d.dc();d.Ab(1),d.jc("ngIf",!e.isProcesandoFactura)("ngIfElse",t)}}function ft(t,e){1&t&&(d.Sb(0,"button",19),d.Nb(1,"i",21),d.Dc(2," Hecho "),d.Rb()),2&t&&d.jc("disabled",!0)}let bt=(()=>{class t{constructor(t,e){this.crudService=t,this.facturacionService=e,this.msj_error="",this.datosConsulta={num_doc:"00000000",nombres:"",direccion:"",idcliente:""},this.loadConsulta=!1,this.isvalid=!0,this.isTieneCliente=!1,this.isValidAll=!1,this.isProcesandoFactura=!1,this.isComprobanteProcesado=!1,this.isValidarCompIni=!1,this.isConrolVisible=!0,this.isShowControl=new d.o(!1)}set validarDatos(t){console.log("validarDatos",t),t&&this.validarDatosCliente()}ngOnInit(){this.loadTipoComprobantes()}validarDatosCliente(){const t=this.orden.json_datos_delivery.p_header.arrDatosDelivery.tipoComprobante;return this.num_documento=t.dni?t.dni:"",this.datosConsulta.num_doc=this.num_documento,this.comprobanteSelected=this.listTipoComprobante.filter(e=>e.descripcion.toLowerCase()===t.descripcion.toLowerCase())[0],(null==t?void 0:t.otro_dato)||0===this.orden.json_datos_delivery.p_header.isCliente?(this.isConrolVisible=!0,void this.isShowControl.emit(this.isConrolVisible)):(this.verificarDocumento(this.num_documento),void(this.isValidAll?(this.isvalid=!0,this.isValidarCompIni=!0,""===this.num_documento?(this.datosConsulta.nombres="",this.isConrolVisible=!1,this.isValidarCompIni=!1,this.isShowControl.emit(this.isConrolVisible),this.emitirFacturar()):this.buscarDNI(this.num_documento)):(this.isConrolVisible=!0,this.isShowControl.emit(this.isConrolVisible))))}loadTipoComprobantes(){this.facturacionService.getTipoComprobantes().subscribe(t=>{this.listTipoComprobante=t})}selectComprobante(t){this.comprobanteSelected=this.listTipoComprobante[t.value],1!==this.comprobanteSelected.requiere_cliente?(this.msj_error="",this.comprobarRequeridos()):this.verificarDocumento(this.num_documento)}buscarDNI(t){this.isTieneCliente=!1,this.isvalid?(this.loadConsulta=!0,this.crudService.postFree({documento:t,servicio:this.nomServicio},"consulta","dni-ruc",!0).subscribe(t=>{this.datosConsulta=t.data,this.loadConsulta=!1,this.isTieneCliente=""!==this.datosConsulta.nombres,this.comprobarRequeridos(),this.isValidarCompIni&&(this.isConrolVisible=!1,this.isValidarCompIni=!1,this.isShowControl.emit(this.isConrolVisible),this.emitirFacturar())})):this.msj_error="Documento no valido"}verificarDocumento(t){var e;const o=t.toString().length;this.isvalid=!0,this.nomServicio=o<=8?"dni":"RUC",this.isvalid=!(o<8||8!==o&&(o<11||11!==o)),this.isvalid=("F"!==this.comprobanteSelected.inicial||"dni"!==this.nomServicio)&&this.isvalid,this.msj_error=this.isvalid?"":"Documento no valido",this.isTieneCliente=(null===(e=this.datosConsulta)||void 0===e?void 0:e.nombres)&&this.isvalid,this.comprobarRequeridos()}comprobarRequeridos(){const t=1===this.comprobanteSelected.requiere_cliente;this.isValidAll=!(!t||!this.isTieneCliente)||!(t&&!this.isTieneCliente)}emitirFacturar(){this.isProcesandoFactura=!0;const t=this.orden.json_datos_delivery;let e=JSON.parse(JSON.stringify(t.p_subtotales));e=this.facturacionService.darFormatoSubTotalesParaFacturacion(e);const o=this.facturacionService.xCargarDatosAEstructuraImpresion(t.p_body,e);this.datosConsulta.num_doc=this.datosConsulta.num_doc?this.datosConsulta.num_doc:this.num_documento,""===this.datosConsulta.idcliente&&""!==this.datosConsulta.num_doc?this.facturacionService.guardarClienteNuevo(this.datosConsulta).subscribe(t=>{this.datosConsulta.idcliente=t[0].idcliente,this.facturacionService.cocinarFactura(this.orden.idpedido,o,e,this.comprobanteSelected,this.datosConsulta),this.loaderProcesandoComprobante()}):(this.facturacionService.cocinarFactura(this.orden.idpedido,o,e,this.comprobanteSelected,this.datosConsulta),this.loaderProcesandoComprobante()),this.orden.pwa_facturado=1}loaderProcesandoComprobante(){setTimeout(()=>{this.isProcesandoFactura=!1,this.isComprobanteProcesado=!0},1500)}atras(){this.isShowControl.emit(!1)}}return t.\u0275fac=function(e){return new(e||t)(d.Mb(s.a),d.Mb(nt))},t.\u0275cmp=d.Gb({type:t,selectors:[["app-com-facturador"]],inputs:{orden:"orden",validarDatos:"validarDatos"},outputs:{isShowControl:"isShowControl"},decls:26,vars:8,consts:[[3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],[1,"w-100","fs-12"],["matInput","","placeholder","DNI / RUC","type","number","maxlength","11",3,"ngModel","keyup","keydown.enter","ngModelChange"],["dni",""],["mat-flat-button","","color","primary","matSuffix","",3,"click"],["aria-hidden","true",1,"fa","fa-search"],[1,"w-100"],["mode","indeterminate",2,"bottom","20px",3,"hidden"],[1,"fs-13","text-danger"],["matInput","","placeholder","Nombre","type","text",3,"ngModel","ngModelChange"],["matInput","","placeholder","Direccion","type","text",3,"ngModel","ngModelChange"],[1,"text-center"],["mat-flat-button","",1,"pr-2",3,"click"],[1,"fa","fa-arrow-left"],[4,"ngIf","ngIfElse"],["elseTemplate",""],[3,"value"],["mat-flat-button","","color","primary",3,"disabled","click"],["mat-flat-button","","color","primary",3,"disabled"],[1,"fa","fa-spinner","fa-spin","fa-2x","fa-fw"],[1,"fa","fa-check"]],template:function(t,e){if(1&t){const t=d.Tb();d.Sb(0,"div"),d.Sb(1,"mat-form-field"),d.Sb(2,"mat-label"),d.Dc(3,"Tipo Comprobante"),d.Rb(),d.Sb(4,"mat-select",0),d.Zb("selectionChange",(function(t){return e.selectComprobante(t)})),d.Bc(5,lt,2,2,"mat-option",1),d.Rb(),d.Rb(),d.Sb(6,"mat-form-field",2),d.Sb(7,"input",3,4),d.Zb("keyup",(function(){d.vc(t);const o=d.tc(8);return e.verificarDocumento(o.value)}))("keydown.enter",(function(){d.vc(t);const o=d.tc(8);return e.buscarDNI(o.value)}))("ngModelChange",(function(t){return e.num_documento=t})),d.Rb(),d.Sb(9,"button",5),d.Zb("click",(function(){d.vc(t);const o=d.tc(8);return e.buscarDNI(o.value)})),d.Nb(10,"i",6),d.Rb(),d.Rb(),d.Sb(11,"div",7),d.Nb(12,"mat-progress-bar",8),d.Sb(13,"span",9),d.Dc(14),d.Rb(),d.Rb(),d.Sb(15,"mat-form-field",7),d.Sb(16,"input",10),d.Zb("ngModelChange",(function(t){return e.datosConsulta.nombres=t})),d.Rb(),d.Rb(),d.Sb(17,"mat-form-field",7),d.Sb(18,"input",11),d.Zb("ngModelChange",(function(t){return e.datosConsulta.direccion=t})),d.Rb(),d.Rb(),d.Sb(19,"div",12),d.Sb(20,"button",13),d.Zb("click",(function(){return e.atras()})),d.Nb(21,"i",14),d.Dc(22," Atras"),d.Rb(),d.Bc(23,ht,4,2,"ng-container",15),d.Bc(24,ft,3,1,"ng-template",null,16,d.Cc),d.Rb(),d.Rb()}if(2&t){const t=d.tc(25);d.Ab(5),d.jc("ngForOf",e.listTipoComprobante),d.Ab(2),d.jc("ngModel",e.num_documento),d.Ab(5),d.jc("hidden",!e.loadConsulta),d.Ab(2),d.Ec(e.msj_error),d.Ab(2),d.jc("ngModel",e.datosConsulta.nombres),d.Ab(2),d.jc("ngModel",e.datosConsulta.direccion),d.Ab(5),d.jc("ngIf",!e.isComprobanteProcesado)("ngIfElse",t)}},directives:[rt.b,rt.e,st.a,i.l,at.a,ct.o,ct.b,ct.g,ct.k,ct.n,b.a,rt.g,dt.a,i.m,P.g],styles:[""]}),t})();var mt=o("QibW");function gt(t,e){1&t&&(d.Qb(0),d.Sb(1,"span",6),d.Dc(2,"Orden pagada, cliente pago con tarjeta. "),d.Rb(),d.Pb())}function vt(t,e){if(1&t&&(d.Sb(0,"mat-radio-button",9),d.Dc(1),d.Rb()),2&t){const t=e.$implicit;d.kc("value",t.idtipo_pago),d.Ab(1),d.Ec(t.descripcion)}}function yt(t,e){if(1&t){const t=d.Tb();d.Sb(0,"mat-radio-group",7),d.Zb("ngModelChange",(function(e){return d.vc(t),d.dc().idTipoPagoSelected=e})),d.Bc(1,vt,2,2,"mat-radio-button",8),d.Rb()}if(2&t){const t=d.dc();d.jc("ngModel",t.idTipoPagoSelected),d.Ab(1),d.jc("ngForOf",t.listTipoPago)}}function St(t,e){1&t&&d.Nb(0,"i",10)}let Ct=(()=>{class t{constructor(t,e,o,i){this.comercioService=t,this.crudService=e,this.pedidoComercioService=o,this.listenService=i,this.closeWindow=new d.o(!1),this.idTipoPagoSelected=null,this.isRegistrarCuenta=!0,this.loader=!1}ngOnInit(){this.listTipoPago=this.comercioService.getSedeInfo().datos_tipo_pago,this.metodoPagoCliente=this.orden.json_datos_delivery.p_header.arrDatosDelivery.metodoPago,this.importeTotal=this.orden.total,this.isRegistrarCuenta=2!==this.metodoPagoCliente.idtipo_pago}registrarPago(){this.isRegistrarCuenta&&(this.loader=!0,this.metodoPagoCliente.importe=this.importeTotal,this.crudService.postFree({idpedido:this.orden.idpedido,idcliente:this.orden.idcliente,idtipo_pago:this.idTipoPagoSelected,importe_total:this.importeTotal,obj_sutotales:this.orden.json_datos_delivery.p_subtotales},"comercio","set-registrar-pago-pedido-comercio").subscribe(t=>{this.crudService.postFree({idpedido:this.orden.idpedido,estado:this.orden.isClientePasaRecoger?"E":"R"},"comercio","set-estado-pedido").subscribe(t=>console.log(t)),setTimeout(()=>{this.loader=!1,this.orden.isClientePasaRecoger&&(this.orden.pwa_delivery_status=4,this.orden.estadoTitle=this.pedidoComercioService.getEstadoPedido("E").estadoTitle,this.orden.quitar=!0,this.listenService.setPedidoModificado(null),this.listenService.setPedidoModificado(this.orden)),this.orden.quitar=!0,this.closeWindow.emit(!0)},500)}))}}return t.\u0275fac=function(e){return new(e||t)(d.Mb(f),d.Mb(s.a),d.Mb(j),d.Mb(M))},t.\u0275cmp=d.Gb({type:t,selectors:[["app-com-registrar-pago"]],inputs:{orden:"orden"},outputs:{closeWindow:"closeWindow"},decls:11,vars:5,consts:[[1,"w-100","d-flex","justify-content-between","align-items-center"],[4,"ngIf","ngIfElse"],["elseTemplate",""],[1,"text-right"],["mat-flat-button","","color","primary",3,"disabled","click"],["class","fa fa-spinner fa-spin",4,"ngIf"],[1,"fw-600","text-success"],["aria-label","Select an option",1,"example-radio-group",3,"ngModel","ngModelChange"],["class","ml-2",3,"value",4,"ngFor","ngForOf"],[1,"ml-2",3,"value"],[1,"fa","fa-spinner","fa-spin"]],template:function(t,e){if(1&t&&(d.Sb(0,"div",0),d.Sb(1,"div"),d.Bc(2,gt,3,0,"ng-container",1),d.Bc(3,yt,2,2,"ng-template",null,2,d.Cc),d.Rb(),d.Sb(5,"div",3),d.Sb(6,"h4"),d.Dc(7),d.Rb(),d.Sb(8,"button",4),d.Zb("click",(function(){return e.registrarPago()})),d.Bc(9,St,1,0,"i",5),d.Dc(10," Registrar "),d.Rb(),d.Rb(),d.Rb()),2&t){const t=d.tc(4);d.Ab(2),d.jc("ngIf",!e.isRegistrarCuenta)("ngIfElse",t),d.Ab(5),d.Fc("S/. ",e.importeTotal,""),d.Ab(1),d.jc("disabled",!e.idTipoPagoSelected||e.loader),d.Ab(1),d.jc("ngIf",e.loader)}},directives:[i.m,b.a,mt.b,ct.k,ct.n,i.l,mt.a],styles:[".example-radio-group[_ngcontent-%COMP%]{display:-webkit-flex;display:flex;-webkit-flex-direction:column;flex-direction:column;margin:15px 0}"]}),t})();function Rt(t,e){1&t&&(d.Sb(0,"span",27),d.Dc(1," APP "),d.Rb())}const _t=function(t){return{"text-danger":t}};function wt(t,e){if(1&t&&(d.Qb(0),d.Sb(1,"div",28),d.Nb(2,"i",29),d.Sb(3,"span"),d.Dc(4,"Cliente Recoge"),d.Rb(),d.Rb(),d.Sb(5,"span",30),d.Dc(6),d.Rb(),d.Pb()),2&t){const t=d.dc();d.Ab(5),d.jc("ngClass",d.oc(2,_t,t.isRepartidorPaga)),d.Ab(1),d.Ec(t.descripcionComoClienteRecoge)}}function Pt(t,e){if(1&t&&(d.Sb(0,"mat-option",35),d.Dc(1),d.Rb()),2&t){const t=e.$implicit;d.jc("value",t),d.Ab(1),d.Ec(t.nombre)}}function kt(t,e){if(1&t){const t=d.Tb();d.Sb(0,"mat-form-field"),d.Sb(1,"mat-select",33),d.Zb("valueChange",(function(e){return d.vc(t),d.dc(3).repartidorSelected=e}))("selectionChange",(function(e){return d.vc(t),d.dc(3).saveRepartidor(e)})),d.Bc(2,Pt,2,2,"mat-option",34),d.Rb(),d.Rb()}if(2&t){const t=d.dc(3);d.Ab(1),d.jc("value",t.repartidorSelected),d.Ab(1),d.jc("ngForOf",t.listRepartidoresPropios)}}function Dt(t,e){if(1&t&&(d.Qb(0),d.Bc(1,kt,3,2,"mat-form-field",8),d.Pb()),2&t){const t=d.dc(2);d.Ab(1),d.jc("ngIf","4"!==t.orden.pwa_delivery_status)}}function xt(t,e){if(1&t&&(d.Sb(0,"p"),d.Nb(1,"i",36),d.Dc(2),d.Rb()),2&t){const t=d.dc(3);d.Ab(2),d.Fc(" ",t.orden.telefono_repartidor," ")}}function At(t,e){if(1&t&&(d.Bc(0,xt,3,1,"p",8),d.Sb(1,"p",30),d.Dc(2),d.Rb()),2&t){const t=d.dc(2);d.jc("ngIf",t.nomRepartidor),d.Ab(1),d.jc("ngClass",d.oc(3,_t,t.isRepartidorPaga)),d.Ab(1),d.Ec(t.descripcionComoPagaRepartidor)}}function Ot(t,e){if(1&t&&(d.Sb(0,"p"),d.Nb(1,"i",31),d.Dc(2),d.Rb(),d.Bc(3,Dt,2,1,"ng-container",5),d.Bc(4,At,3,5,"ng-template",null,32,d.Cc)),2&t){const t=d.tc(5),e=d.dc();d.Ab(2),d.Fc(" Repartidor: ",e.nomRepartidor||"No asignado",""),d.Ab(1),d.jc("ngIf",e.isComercioPropioRepartidor&&1!==e.orden.flag_solicita_repartidor_papaya)("ngIfElse",t)}}function It(t,e){1&t&&d.Nb(0,"i",43)}function Et(t,e){1&t&&d.Nb(0,"i",44)}function Tt(t,e){if(1&t){const t=d.Tb();d.Sb(0,"div",38),d.Sb(1,"button",39),d.Zb("click",(function(){return d.vc(t),d.dc(2).solicitarRepartopapaya()})),d.Bc(2,It,1,0,"i",40),d.Bc(3,Et,1,0,"i",41),d.Sb(4,"span",42),d.Dc(5,"LLamar repartidor Papaya Express"),d.Rb(),d.Rb(),d.Rb()}if(2&t){const t=d.dc(2);d.Ab(2),d.jc("ngIf",!t.loaderFlagRepartidor),d.Ab(1),d.jc("ngIf",t.loaderFlagRepartidor)}}function Ft(t,e){if(1&t&&(d.Sb(0,"div"),d.Bc(1,Tt,6,2,"div",37),d.Rb()),2&t){const t=d.dc();d.Ab(1),d.jc("ngIf",!t.orden.isClientePasaRecoger&&1!==t.orden.flag_solicita_repartidor_papaya&&t.isComercioPropioRepartidor)}}function jt(t,e){1&t&&(d.Sb(0,"span",45),d.Dc(1," Cliente pago con tarjeta desde la aplicaci\xf3n. "),d.Rb())}function Bt(t,e){if(1&t){const t=d.Tb();d.Qb(0),d.Sb(1,"button",49),d.Zb("click",(function(){return d.vc(t),d.dc(2).goFacturar()})),d.Dc(2," Emitir Comprobante "),d.Rb(),d.Pb()}}function Mt(t,e){1&t&&d.Nb(0,"i",52)}function Nt(t,e){1&t&&d.Nb(0,"i",53)}function Lt(t,e){if(1&t&&(d.Bc(0,Mt,1,0,"i",50),d.Bc(1,Nt,1,0,"i",51)),2&t){const t=d.dc(2);d.jc("ngIf",!t.loaderFacturacion),d.Ab(1),d.jc("ngIf",t.loaderFacturacion)}}function qt(t,e){if(1&t&&(d.Sb(0,"div",46),d.Sb(1,"div",47),d.Bc(2,Bt,3,0,"ng-container",5),d.Bc(3,Lt,2,2,"ng-template",null,48,d.Cc),d.Rb(),d.Rb()),2&t){const t=d.tc(4),e=d.dc();d.Ab(2),d.jc("ngIf",0===e.orden.pwa_facturado)("ngIfElse",t)}}function zt(t,e){1&t&&d.Nb(0,"i",54)}const Ut=function(t,e,o){return{"badge-primary":t,"badge-info":e,"badge-secondary":o}};let $t=(()=>{class t{constructor(t,e,o,i){this.pedidoComercioService=t,this.comercioService=e,this.listenService=o,this.dialog=i,this.closeWindow=new d.o(!1),this.isTieneRepartidor=!1,this.isRepartidoresPropios=!1,this.btnActionTitule="Aceptar Pedido",this.loaderEstado=!1,this.loaderFacturacion=!1,this.loaderFlagRepartidor=!1,this.showFacturar=!1,this.isShowControlFacturador=!1,this.isRepartidorPaga=!0,this.nomRepartidor=null,this.descripcionComoPagaRepartidor="",this.descripcionComoClienteRecoge="",this.descripcionDetalleFacturacion="",this._tabIndex=0,this.isFacturacionActivo=!1,this.isComercioPropioRepartidor=!1,this.isHabilitadoLLamarRepartidorPapaya=!0}ngOnInit(){var t;console.log("orden detalle",this.orden),this.getEstadoPedido(),this.comercioService.getSedeInfo(),this.isRepartidorPaga=2!==this.orden.json_datos_delivery.p_header.arrDatosDelivery.metodoPago.idtipo_pago,this.descripcionComoPagaRepartidor=this.isRepartidorPaga?"El Repartidor tiene que pagar el pedido":"Pedido pagado. Repartidor NO paga.",this.descripcionComoClienteRecoge=this.isRepartidorPaga?`Y paga el pedido con: ${this.orden.json_datos_delivery.p_header.arrDatosDelivery.metodoPago.descripcion}.`:"Pedido pagado. Cliente NO paga.",this.descripcionDetalleFacturacion=this.orden.json_datos_delivery.p_header.arrDatosDelivery.tipoComprobante.dni?this.orden.json_datos_delivery.p_header.arrDatosDelivery.tipoComprobante.dni:"Publico en general",this.descripcionDetalleFacturacion=this.descripcionDetalleFacturacion+" "+((null===(t=this.orden.json_datos_delivery.p_header.arrDatosDelivery.tipoComprobante)||void 0===t?void 0:t.otro_dato)||""),this.isFacturacionActivo=1===this.comercioService.sedeInfo.facturacion_e_activo,this.nomRepartidor=this.orden.idrepartidor?this.orden.nom_repartidor+" "+this.orden.ap_repartidor:null,this.repartidorSelected=this.orden.idrepartidor,this.isComercioPropioRepartidor=1===this.comercioService.sedeInfo.pwa_delivery_servicio_propio,this.isHabilitadoLLamarRepartidorPapaya=1===this.comercioService.sedeInfo.pwa_delivery_habilitar_llamar_repartidor_papaya,this.isComercioPropioRepartidor&&this.getRepartidoresComercio()}getRepartidoresComercio(){this.comercioService.loadRepartidoresComercio().subscribe(t=>{this.listRepartidoresPropios=t})}getEstadoPedido(){const t=this.pedidoComercioService.getEstadoPedido(this.orden.pwa_estado);this.btnActionTitule="Entregar al repartidor"===t.btnTitulo&&this.orden.isClientePasaRecoger?"Entregar al cliente":t.btnTitulo,this.orden.pwa_estado=t.estado,this.orden.estadoTitle=t.estadoTitle}setEstadoOrden(){this.loaderEstado=!0;const t=this.pedidoComercioService.setEstadoPedido(this.orden.idpedido,this.orden.pwa_estado);this.btnActionTitule="Entregar al repartidor"===t.btnTitulo&&this.orden.isClientePasaRecoger?"Entregar al cliente":t.btnTitulo,this.orden.pwa_estado=t.estado,this.orden.estadoTitle=t.estadoTitle,setTimeout(()=>{this.loaderEstado=!1,this.goFinalizarPedido()},1e3)}goFinalizarPedido(){switch(this.orden.pwa_estado){case"R":this.isComercioPropioRepartidor&&!this.orden.isClientePasaRecoger||(this._tabIndex=2);break;case"A":this.closeWindow.emit(!0);break;case"D":this.orden.quitar=!0,this.closeWindow.emit(!0)}}onChangeFacturador(t){this.isShowControlFacturador=t,this._tabIndex=this.isShowControlFacturador?1:0,this.showFacturar=!1}goFacturar(){this.showFacturar=!0,this.loaderFacturacion=!0,setTimeout(()=>{this.loaderFacturacion=!1},1500)}saveRepartidor(t){console.log(t);const e=t.value;this.orden.idrepartidor=e.idrepartidor,this.orden.nom_repartidor=e.nombre,this.orden.ap_repartidor=e.apellido,this.orden.telefono_repartidor=e.telefono,this.listenService.setPedidoModificado(this.orden),this.pedidoComercioService.setRepartidorToPedido(e.idrepartidor,this.orden)}solicitarRepartopapaya(){const t=new r.e;t.disableClose=!0,t.hasBackdrop=!0,t.data={idMjs:3,costoEntrega:this.orden.json_datos_delivery.p_header.arrDatosDelivery.costoTotalDelivery},this.loaderFlagRepartidor=!0,this.dialog.open(N,t).afterClosed().subscribe(t=>{t&&(this.orden.flag_solicita_repartidor_papaya=1,this.pedidoComercioService.setFlagSolicitaRepartidorRed(this.orden.idpedido).subscribe(t=>{this.orden.json_datos_delivery.p_subtotales=this.pedidoComercioService.darFormatoSubTotales(this.orden.json_datos_delivery.p_subtotales,this.orden.json_datos_delivery.p_header.arrDatosDelivery.costoTotalDelivery,!0),this.loaderFlagRepartidor=!1,this.cerrarDetalles(!0)})),this.loaderFlagRepartidor=!1})}cerrarDetalles(t){t&&this.closeWindow.emit(t)}}return t.\u0275fac=function(e){return new(e||t)(d.Mb(j),d.Mb(f),d.Mb(M),d.Mb(r.b))},t.\u0275cmp=d.Gb({type:t,selectors:[["app-comp-orden-detalle"]],inputs:{orden:"orden"},outputs:{closeWindow:"closeWindow"},decls:61,vars:32,consts:[[1,"animated","fadeIn"],[1,"d-flex","justify-content-between"],[1,"fw-600"],["class","badge badge-success",4,"ngIf"],[1,"fs-13"],[4,"ngIf","ngIfElse"],["elseConRepartidor",""],[1,"d-flex"],[4,"ngIf"],["type","button","mat-dialog-close","",1,"btn","btn-secondary"],[1,"fa","fa-close"],[1,"fs-13","fw-600","text-secondary"],[1,"fa","fa-user"],[1,"fa","fa-map-marker"],[1,"fa","fa-phone"],[1,"fw-600","badge",3,"ngClass"],[1,"fs-15"],["class","pl-2",4,"ngIf"],["class","fs-13 text-right",4,"ngIf"],[1,"tabs-no-header",3,"selectedIndex"],[3,"elPedido","elArrSubtTotales","showTitulo"],[1,"text-center"],["mat-flat-button","","color","primary",3,"disabled","click"],["class","fa fa-spinner fa-spin fa-3x fa-fw",4,"ngIf"],[1,"fs-18"],[3,"hidden","orden","validarDatos","isShowControl"],[3,"orden","closeWindow"],[1,"badge","badge-success"],[1,"bg-warning","rounded"],[1,"fa","fa-user","p-1"],[1,"text-success",3,"ngClass"],["aria-hidden","true",1,"fa","fa-motorcycle"],["elseTemplateNoRepartidores",""],[3,"value","valueChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["aria-hidden","true",1,"fa","fa-phone"],["class","pr-2",4,"ngIf"],[1,"pr-2"],["title","Solicita un repartidor de la red de Papaya Express para este pedido.",1,"btn","btn-info",3,"click"],["class","fa fa-bicycle pr-2","aria-hidden","true",4,"ngIf"],["class","fa fa-spinner fa-spin fa-1x fa-fw",4,"ngIf"],[1,"fw-100","fs-11","hidden-mobile"],["aria-hidden","true",1,"fa","fa-bicycle","pr-2"],[1,"fa","fa-spinner","fa-spin","fa-1x","fa-fw"],[1,"pl-2"],[1,"fs-13","text-right"],[1,"text-right"],["elseTemplateFacturado",""],[1,"btn","btn-success",3,"click"],["class","fa fa-check fa-2x text-success",4,"ngIf"],["class","fa fa-spinner fa-spin fa-2x fa-fw",4,"ngIf"],[1,"fa","fa-check","fa-2x","text-success"],[1,"fa","fa-spinner","fa-spin","fa-2x","fa-fw"],[1,"fa","fa-spinner","fa-spin","fa-3x","fa-fw"]],template:function(t,e){if(1&t&&(d.Sb(0,"div",0),d.Sb(1,"div",1),d.Sb(2,"div"),d.Sb(3,"p",2),d.Dc(4),d.Bc(5,Rt,2,0,"span",3),d.Rb(),d.Sb(6,"div",4),d.Bc(7,wt,7,4,"ng-container",5),d.Bc(8,Ot,6,3,"ng-template",null,6,d.Cc),d.Rb(),d.Rb(),d.Sb(10,"div",7),d.Bc(11,Ft,2,1,"div",8),d.Sb(12,"div"),d.Sb(13,"button",9),d.Nb(14,"i",10),d.Rb(),d.Rb(),d.Rb(),d.Rb(),d.Nb(15,"hr"),d.Sb(16,"div"),d.Sb(17,"div",4),d.Sb(18,"span",11),d.Dc(19,"Cliente: "),d.Rb(),d.Sb(20,"p"),d.Nb(21,"i",12),d.Dc(22),d.Rb(),d.Sb(23,"p"),d.Nb(24,"i",13),d.Dc(25),d.Rb(),d.Sb(26,"p"),d.Nb(27,"i",13),d.Dc(28),d.Rb(),d.Sb(29,"p"),d.Nb(30,"i",14),d.Dc(31),d.Rb(),d.Sb(32,"p",15),d.Sb(33,"span",16),d.Dc(34),d.ec(35,"titlecase"),d.Rb(),d.Bc(36,jt,2,0,"span",17),d.Rb(),d.Rb(),d.Rb(),d.Nb(37,"hr"),d.Sb(38,"div",1),d.Sb(39,"div",4),d.Sb(40,"span",11),d.Dc(41,"Facturarci\xf3n: "),d.Rb(),d.Sb(42,"p"),d.Sb(43,"strong"),d.Dc(44),d.Rb(),d.Dc(45),d.Rb(),d.Rb(),d.Bc(46,qt,5,2,"div",18),d.Rb(),d.Nb(47,"hr"),d.Sb(48,"mat-tab-group",19),d.Sb(49,"mat-tab"),d.Nb(50,"app-com-resumen-pedido",20),d.Nb(51,"hr"),d.Sb(52,"div",21),d.Sb(53,"button",22),d.Zb("click",(function(){return e.setEstadoOrden()})),d.Bc(54,zt,1,0,"i",23),d.Sb(55,"span",24),d.Dc(56),d.Rb(),d.Rb(),d.Rb(),d.Rb(),d.Sb(57,"mat-tab"),d.Sb(58,"app-com-facturador",25),d.Zb("isShowControl",(function(t){return e.onChangeFacturador(t)})),d.Rb(),d.Rb(),d.Sb(59,"mat-tab"),d.Sb(60,"app-com-registrar-pago",26),d.Zb("closeWindow",(function(t){return e.cerrarDetalles(t)})),d.Rb(),d.Rb(),d.Rb(),d.Rb()),2&t){const t=d.tc(9);d.Ab(4),d.Fc("Pedido #",e.orden.idpedido," "),d.Ab(1),d.jc("ngIf",1===e.orden.json_datos_delivery.p_header.isCliente),d.Ab(2),d.jc("ngIf",e.orden.isClientePasaRecoger)("ngIfElse",t),d.Ab(4),d.jc("ngIf",e.isHabilitadoLLamarRepartidorPapaya),d.Ab(11),d.Fc(" ",e.orden.json_datos_delivery.p_header.arrDatosDelivery.nombre,""),d.Ab(3),d.Fc(" ",e.orden.json_datos_delivery.p_header.arrDatosDelivery.direccion,""),d.Ab(3),d.Fc(" ",e.orden.json_datos_delivery.p_header.arrDatosDelivery.referencia,""),d.Ab(3),d.Fc(" ",e.orden.json_datos_delivery.p_header.arrDatosDelivery.telefono,""),d.Ab(1),d.jc("ngClass",d.qc(28,Ut,3===e.orden.json_datos_delivery.p_header.arrDatosDelivery.metodoPago.idtipo_pago,2===e.orden.json_datos_delivery.p_header.arrDatosDelivery.metodoPago.idtipo_pago,1===e.orden.json_datos_delivery.p_header.arrDatosDelivery.metodoPago.idtipo_pago)),d.Ab(2),d.Fc("",d.fc(35,26,e.orden.json_datos_delivery.p_header.arrDatosDelivery.metodoPago.descripcion)," "),d.Ab(2),d.jc("ngIf",2===e.orden.json_datos_delivery.p_header.arrDatosDelivery.metodoPago.idtipo_pago),d.Ab(8),d.Fc("",e.orden.json_datos_delivery.p_header.arrDatosDelivery.tipoComprobante.descripcion," "),d.Ab(1),d.Fc(" ",e.descripcionDetalleFacturacion," "),d.Ab(1),d.jc("ngIf",e.isFacturacionActivo),d.Ab(2),d.jc("selectedIndex",e._tabIndex),d.Ab(2),d.jc("elPedido",e.orden.json_datos_delivery.p_body)("elArrSubtTotales",e.orden.json_datos_delivery.p_subtotales)("showTitulo",!0),d.Ab(3),d.jc("disabled",e.loaderEstado),d.Ab(1),d.jc("ngIf",e.loaderEstado),d.Ab(2),d.Ec(e.btnActionTitule),d.Ab(2),d.jc("hidden",!e.isShowControlFacturador)("orden",e.orden)("validarDatos",e.showFacturar),d.Ab(2),d.jc("orden",e.orden)}},directives:[i.m,r.d,i.k,L.b,L.a,ot,b.a,bt,Ct,rt.b,st.a,i.l,P.g],pipes:[i.u],styles:["p[_ngcontent-%COMP%]{margin:0}"]}),t})(),Wt=(()=>{class t{constructor(t,e){this.dialogRef=t,this.laOrden=e.laOrden}ngOnInit(){}cerrarDialog(t){t&&this.dialogRef.close(this.laOrden)}}return t.\u0275fac=function(e){return new(e||t)(d.Mb(r.g),d.Mb(r.a))},t.\u0275cmp=d.Gb({type:t,selectors:[["app-dialog-orden-detalle"]],decls:1,vars:1,consts:[[3,"orden","closeWindow"]],template:function(t,e){1&t&&(d.Sb(0,"app-comp-orden-detalle",0),d.Zb("closeWindow",(function(t){return e.cerrarDialog(t)})),d.Rb()),2&t&&d.jc("orden",e.laOrden)},directives:[$t],styles:[""]}),t})();const Ht=["ngx-masonry",""],Qt=["*"];let Gt,Vt,Xt=(()=>{let t=class{constructor(t,e){this.platformId=t,this._element=e,this.useImagesLoaded=!1,this.updateLayout=!1,this.layoutComplete=new d.o,this.removeComplete=new d.o}ngOnInit(){this.useImagesLoaded&&void 0===Gt&&(Gt=o("vX6Q")),Object(i.w)(this.platformId)&&void 0===Vt&&(Vt=o("hNNL")),this.options||(this.options={}),this.options.itemSelector||(this.options.itemSelector="[ngxMasonryItem], ngxMasonryItem"),Object(i.w)(this.platformId)&&(this._msnry=new Vt(this._element.nativeElement,this.options),this._msnry.on("layoutComplete",t=>{this.layoutComplete.emit(t)}),this._msnry.on("removeComplete",t=>{this.removeComplete.emit(t)}))}ngOnChanges(t){t.updateLayout&&(t.updateLayout.firstChange||this.layout())}ngOnDestroy(){this._msnry&&this._msnry.destroy()}layout(){setTimeout(()=>{this._msnry.layout()})}reloadItems(){setTimeout(()=>{this._msnry.reloadItems()})}add(t){let e=!1;0===this._msnry.items.length&&(e=!0),this.useImagesLoaded?(Gt(t,o=>{this._element.nativeElement.appendChild(t),this._msnry.appended(t),e&&this.layout()}),this._element.nativeElement.removeChild(t)):(this._msnry.appended(t),e&&this.layout())}remove(t){this._msnry.remove(t),this.layout()}};return t.\u0275fac=function(e){return new(e||t)(d.Mb(d.C),d.Mb(d.l))},t.\u0275cmp=d.Gb({type:t,selectors:[["","ngx-masonry",""],["ngx-masonry"]],inputs:{useImagesLoaded:"useImagesLoaded",updateLayout:"updateLayout",options:"options"},outputs:{layoutComplete:"layoutComplete",removeComplete:"removeComplete"},features:[d.yb],attrs:Ht,ngContentSelectors:Qt,decls:1,vars:0,template:function(t,e){1&t&&(d.ic(),d.hc(0))},styles:["[_nghost-%COMP%] {\n\t\t\tdisplay: block;\n\t\t}"]}),t})(),Zt=(()=>{let t=class{constructor(t,e,o){this._element=t,this._parent=e,this.platformId=o}ngAfterViewInit(){Object(i.w)(this.platformId)&&(this._parent.add(this._element.nativeElement),this.watchForHtmlChanges())}ngOnDestroy(){Object(i.w)(this.platformId)&&this._parent.remove(this._element.nativeElement)}watchForHtmlChanges(){if(MutationObserver=window.MutationObserver||window.WebKitMutationObserver,MutationObserver){const t=this;new MutationObserver((function(e,o){t._parent.layout()})).observe(this._element.nativeElement,{subtree:!0,childList:!0})}}};return t.\u0275fac=function(e){return new(e||t)(d.Mb(d.l),d.Mb(Object(d.U)(()=>Xt)),d.Mb(d.C))},t.\u0275dir=d.Hb({type:t,selectors:[["","ngxMasonryItem",""],["ngxMasonryItem"]]}),t})(),Jt=(()=>{let t=class{};return t.\u0275mod=d.Kb({type:t}),t.\u0275inj=d.Jb({factory:function(e){return new(e||t)},imports:[[]]}),t})();class Yt{}class Kt{constructor(){this.secciones=[]}}class te{constructor(){this.items=[]}}class ee{constructor(){this.precio_total=0,this.cantidad_seleccionada_x_tpc=0,this.cantidad_descontado=0,this.itemtiposconsumo=[],this.subitems_selected=[],this.subitems_view=[]}}let oe=(()=>{class t{constructor(t,e){this.crudService=t,this.router=e,this.keyLocal="sys::pr",this.init()}init(){this.pedidoRepartidor=this.getLocal()}cleanLocal(){localStorage.removeItem(this.keyLocal),this.pedidoRepartidor=this.getLocal()}setPasoVa(t){this.pedidoRepartidor.paso_va=t,this.setLocal(this.pedidoRepartidor)}setCostoSercicio(t){this.pedidoRepartidor.c_servicio=t,this.setLocal(this.pedidoRepartidor)}setImporteTotalPedido(t){this.pedidoRepartidor.importePedido=t,this.setLocal(this.pedidoRepartidor)}setIsHayPropina(t){this.pedidoRepartidor.isHayPropina=t,this.setLocal(this.pedidoRepartidor)}setLocal(t=null){t=t||this.pedidoRepartidor,localStorage.setItem(this.keyLocal,btoa(JSON.stringify(t)))}getLocal(){const t=localStorage.getItem(this.keyLocal);return t?JSON.parse(atob(t)):new Yt}asignarPedido(){this.crudService.postFree({idpedido:this.pedidoRepartidor.idpedido},"repartidor","set-asignar-pedido",!0).subscribe(t=>{this.pedidoRepartidor.estado=1,this.setPasoVa(1)})}playAudioNewPedido(){const t=new Audio;t.src="./assets/audio/Alarm04.wav",t.load(),t.play()}darFormatoSubTotales(t=null){this.init();const e=(t=t||this.pedidoRepartidor.datosSubtotales)[t.length-1];e.importe=t.filter(t=>-2!==t.id&&-3!==t.id&&"TOTAL"!==t.descripcion).map(t=>parseFloat(t.importe)).reduce((t,e)=>t+e,0),this.pedidoRepartidor.importePedido=e.importe;const o=parseFloat(t.filter(t=>-2===t.id||-3===t.id).map(t=>parseFloat(t.importe)).reduce((t,e)=>t+e,0));this.pedidoRepartidor.c_servicio=o.toString();const i=!!t.filter(t=>-3===t.id)[0];return this.pedidoRepartidor.isHayPropina=i,this.setLocal(),t.filter(t=>-2!==t.id&&-3!==t.id)}darFormatoPedido(t){const e=new q,o=[];let i=0;return t.data.map(t=>{let e=o.filter(e=>e.idtipo_consumo===t.idtipo_consumo)[0];e||(e=new Kt,e.descripcion=t.des_tp,e.idtipo_consumo=parseInt(t.idtipo_consumo,0),o.push(e))}),o.map(e=>{t.data.filter(t=>t.idtipo_consumo===e.idtipo_consumo).map((t,o)=>{let i=e.secciones.filter(e=>e.idseccion.toString()===t.idseccion.toString())[0];i||(i=new te,i.idseccion=t.idseccion.toString(),i.des=t.des_seccion,i.sec_orden=t.sec_orden,i.ver_stock_cero=0,e.count_items_seccion=o+1,e.secciones.push(i))})}),o.map(e=>{e.secciones.map(o=>{t.data.filter(t=>t.idtipo_consumo.toString()===e.idtipo_consumo.toString()&&t.idseccion.toString()===o.idseccion.toString()).map((t,e)=>{const n=new ee,r=parseFloat(t.precio_default)*parseInt(t.cantidad,0),s=t.precio_default;i+=r,n.des=t.descripcion,n.detalles="",n.iditem=t.iditem,n.idcarta_lista=t.idcarta_lista,n.idseccion=t.idseccion,n.isalmacen=t.isalmacen,n.cantidad_seleccionada=parseInt(t.cantidad,0),n.precio=s,n.precio_print=parseFloat(r.toString()),n.precio_total=parseFloat(r.toString()),n.procede="0"===t.procede?1:0,n.seccion=t.des_seccion,n.img=t.img,n.subitems_view="null"!==t.subitems&&""!==t.subitems&&t.subitems?JSON.parse(t.subitems):[],o.count_items=e+1,o.items=o.items?o.items:[],o.items.push(n)})})}),e.tipoconsumo=o,this.reCalcularSubTotal(i),e}darFormatoPedidoLocal(t){let e=0;return t.tipoconsumo.map(t=>{t.secciones.map(t=>{t.items.map(t=>{const o=parseFloat(t.precio_default)*t.cantidad_seleccionada;e+=o,t.precio=t.precio_default,t.precio_print=parseFloat(o.toString()),t.precio_total=parseFloat(o.toString())})})}),this.reCalcularSubTotal(e),t}reCalcularSubTotal(t){this.init();const e=this.pedidoRepartidor.datosSubtotales[0];if(t===parseFloat(e.importe))return;const o=parseFloat(e.importe)-t;e.importe=t;const i=this.pedidoRepartidor.datosSubtotales.filter(t=>"TOTAL"===t.descripcion)[0];this.pedidoRepartidor.importePagaCliente=i.importe,i.importe=parseFloat(i.importe)-o,this.setLocal()}verificarEstadoPedido(t){return new u.Observable(e=>{this.crudService.postFree({idpedido:t},"repartidor","get-estado-pedido").subscribe(t=>{this.pedidoRepartidor.estado=t.data[0].pwa_delivery_status,e.next(this.pedidoRepartidor.estado)})})}finalizarPedido(){const t=this.pedidoRepartidor.c_servicio,e=this.pedidoRepartidor.datosDelivery.propina.value,o=parseFloat(t)+parseFloat(e),i=parseFloat(this.pedidoRepartidor.importePagaCliente)-(parseFloat(this.pedidoRepartidor.importePedido)+o),n={idrepartidor:this.pedidoRepartidor.datosRepartidor.idrepartidor,idpedido:this.pedidoRepartidor.idpedido,idcliente:this.pedidoRepartidor.datosCliente.idcliente,idsede:this.pedidoRepartidor.datosComercio.idsede,operacion:{metodoPago:this.pedidoRepartidor.datosDelivery.metodoPago,importeTotalPedido:parseFloat(this.pedidoRepartidor.importePagaCliente),importePagadoRepartidor:this.pedidoRepartidor.importePedido,comisionRepartidor:t,propinaRepartidor:e,costoTotalServicio:o,importeDepositar:parseFloat(i.toFixed()).toFixed(2)}};this.crudService.postFree(n,"repartidor","set-fin-pedido-entregado").subscribe(t=>{this.cleanLocal(),this.router.navigate(["./repartidor/pedidos"])})}}return t.\u0275fac=function(e){return new(e||t)(d.Wb(s.a),d.Wb(n.b))},t.\u0275prov=d.Ib({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function ie(t,e){if(1&t&&(d.Sb(0,"div",7),d.Sb(1,"div",8),d.Sb(2,"div"),d.Sb(3,"span",9),d.Dc(4),d.ec(5,"number"),d.Rb(),d.Sb(6,"span"),d.Dc(7),d.Rb(),d.Rb(),d.Sb(8,"div"),d.Sb(9,"span",10),d.Dc(10),d.ec(11,"number"),d.Rb(),d.Rb(),d.Rb(),d.Rb()),2&t){const t=e.$implicit;d.Ab(4),d.Ec(d.gc(5,3,t.cantidad_seleccionada,"2.")),d.Ab(3),d.Fc(" ",t.des," "),d.Ab(3),d.Fc(" ",d.gc(11,6,t.precio_total,".2"),"")}}function ne(t,e){if(1&t&&(d.Sb(0,"div"),d.Sb(1,"div",4),d.Sb(2,"span",5),d.Dc(3),d.Rb(),d.Rb(),d.Bc(4,ie,12,9,"div",6),d.Nb(5,"br"),d.Rb()),2&t){const t=e.$implicit;d.Ab(3),d.Ec(t.des),d.Ab(1),d.jc("ngForOf",t.items)}}let re=(()=>{class t{constructor(){this.sumaTotal=0}set listResumen(t){t&&(this._listResumen=t,this.getTotal())}ngOnInit(){}getTotal(){this.sumaTotal=0,this._listResumen.map(t=>{this.sumaTotal+=t.items.map(t=>t.precio_total).reduce((t,e)=>t+e,0)})}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=d.Gb({type:t,selectors:[["app-com-resumen-all-pedidos"]],inputs:{listResumen:"listResumen"},decls:8,vars:5,consts:[[4,"ngFor","ngForOf"],[1,"text-right"],[1,"fw-600","fs-18"],[1,"text-secondary"],[1,"mb-2"],[1,"fw-600"],["class","border-bottom",4,"ngFor","ngForOf"],[1,"border-bottom"],[1,"d-flex","w-100","justify-content-between","fs-13"],[1,"pr-1"],[1,"pr-2"]],template:function(t,e){1&t&&(d.Sb(0,"div"),d.Bc(1,ne,6,2,"div",0),d.Sb(2,"div",1),d.Sb(3,"p",2),d.Sb(4,"span",3),d.Dc(5,"Total:"),d.Rb(),d.Dc(6),d.ec(7,"number"),d.Rb(),d.Rb(),d.Rb()),2&t&&(d.Ab(1),d.jc("ngForOf",e._listResumen),d.Ab(5),d.Fc(" ",d.gc(7,2,e.sumaTotal,"0.2"),""))},directives:[i.l],pipes:[i.e],styles:[""]}),t})();var se=o("3sZV"),ae=o("VhxH");let ce=(()=>{class t{constructor(){this.directionsService=new google.maps.DirectionsService,this.origin={},this.destination={}}calculateRoute(t,e){let o=e.c_minimo;const i=e.c_km;this.origin={lat:t.latitude,lng:t.longitude},this.destination={lat:e.latitude,lng:e.longitude};const n={origin:this.origin,destination:this.destination,travelMode:google.maps.TravelMode.DRIVING};let r=0;return this.directionsService.route(n,(t,n)=>{"OK"===n&&(r=t.routes[0].legs[0].distance.value,r=parseInt((r/1e3).toFixed(),0),r>1&&(o=(r-1)*i+o,e.c_servicio=o))}),setTimeout(()=>(e.c_servicio=o,o),500),e.c_servicio=o,o}calcDistancia(t,e){const o={lat:e.latitude,lon:e.longitude};return Object(ae.insideCircle)({lat:t.latitude,lon:t.longitude},o,75)}reglaKm(){}calcDistanciaDosPunto(t,e){return Object(ae.distanceTo)(t,e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=d.Ib({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function de(t,e){if(1&t){const t=d.Tb();d.Sb(0,"map-marker",3,4),d.Zb("mapClick",(function(){d.vc(t);const e=d.tc(1),o=d.dc();return o.openInfo(e,o.markerComercio)})),d.Rb()}if(2&t){const t=d.dc();d.jc("position",t.markerComercio.position)("title",t.markerComercio.title)("options",t.markerComercio.options)}}function le(t,e){if(1&t){const t=d.Tb();d.Sb(0,"map-marker",5,6),d.Zb("mapClick",(function(){d.vc(t);const o=e.$implicit,i=d.tc(1);return d.dc().openInfo(i,o)})),d.Rb()}if(2&t){const t=e.$implicit,o=d.dc();d.jc("position",t.position)("label",t.label)("title",t.title)("options",o.markerOptionsRepartidor)}}function pe(t,e){if(1&t){const t=d.Tb();d.Sb(0,"map-marker",5,7),d.Zb("mapClick",(function(){d.vc(t);const o=e.index;return d.dc().openPedido(o)})),d.Rb()}if(2&t){const t=e.$implicit;d.jc("position",t.position)("label",t.label)("title",t.title)("options",t.options)}}let ue=(()=>{class t{constructor(t,e,o,i){this.calcCoordenadaService=t,this.comercioService=e,this.socketService=o,this.listenService=i,this.infowindow=new google.maps.InfoWindow,this.pedidoOpen=new d.o,this.zoom=15,this.options={zoomControl:!0,scrollwheel:!0,disableDoubleClickZoom:!0},this.markerOptionsRepartidor={draggable:!1,icon:"./assets/images/delivery-man.png"},this.markers=[],this.infoContent="",this.markerComercio={},this.markersPedidos=[],this.markersRepartidores=[],this.isPropioRepartidores=!1,this.destroy$=new R.Subject}ngOnInit(){this.comercioService.getSedeInfo(),this.dataComercio=this.comercioService.sedeInfo,this.isPropioRepartidores=1===this.dataComercio.pwa_delivery_servicio_propio,this.center={lat:this.dataComercio.latitude,lng:this.dataComercio.longitude},this.addMarkerComercio(),this.isPropioRepartidores&&this.loadRepartidoresComercio(),this.listenSockets()}ngOnDestroy(){this.destroy$.next(!0),this.destroy$.unsubscribe()}ngOnChanges(t){this.listaPedidos&&this.addMarkerPedidos()}addMarkerComercio(){this.markerComercio={position:{lat:this.center.lat,lng:this.center.lng},label:{color:"#212121",fontWeight:"600",text:this.dataComercio.nombre},title:"Comercio",info:this.dataComercio.nombre,options:{draggable:!1,icon:"./assets/images/marker-4.png"}}}listenSockets(){this.socketService.onRepartidorNotificaUbicacion().pipe(Object(_.takeUntil)(this.destroy$)).subscribe(t=>{this.markersRepartidores.filter(e=>e.idrepartidor===t.idrepartidor)[0].position={lat:t.coordenadas.latitude,lng:t.coordenadas.longitude}}),this.listenService.notificaPedidoNuevo$.pipe(Object(_.takeUntil)(this.destroy$)).subscribe(t=>{t&&this.addMarkerPedidos()}),this.listenService.pedidoModificado$.pipe(Object(_.takeUntil)(this.destroy$)).subscribe(t=>{if(!t)return;const e=this.buscarPedidoEnMarcadores(t.idpedido);let o={animation:t.idrepartidor?google.maps.Animation.DROP:google.maps.Animation.BOUNCE,draggable:!1,icon:"./assets/images/"+(t.idrepartidor?"marker-1.png":"marker-0.png")};t.pwa_delivery_status&&"4"===t.pwa_delivery_status.toString()&&(o={animation:0,draggable:!1,icon:"./assets/images/marker-3.png"}),e.options=o})}loadRepartidoresComercio(){this.comercioService.loadRepartidoresComercio().subscribe(t=>{this.listRepartidores=t,this.addMarkerRepartidor()})}addMarkerRepartidor(){this.markersRepartidores=[],this.listRepartidores.map(t=>{this.markersRepartidores.push({visible:!t.visible||t.visible,idrepartidor:t.idrepartidor,position:{lat:t.position_now.latitude,lng:t.position_now.longitude},label:{fontWeight:"600",text:t.nombre},title:"Repartidor",info:t.nombre+" "+t.apellido,options:{animation:0}})})}openInfo(t,e){this.infowindow.setContent("<p>"+e.title+"</p>"+e.info),this.infowindow.open(this.map._googleMap,t._marker)}buscarPedidoEnMarcadores(t){return this.markersPedidos.filter(e=>e.idpedido===t)[0]}addMarkerPedidos(){this.dataComercio||(this.comercioService.getSedeInfo(),this.dataComercio=this.comercioService.sedeInfo);const t=0===this.dataComercio.pwa_delivery_servicio_propio;this.listaRepartidoresRed=[];let e={};this.markersPedidos=[],this.listaPedidos.map((o,i)=>{const n=o.json_datos_delivery.p_header.arrDatosDelivery;let r=o.idrepartidor?"marker-1.png":"marker-0.png",s="Pedido "+o.idpedido;"4"===o.pwa_delivery_status.toString()&&(r="marker-3.png",s=o.idpedido.toString()),this.markersPedidos.push({idpedido:o.idpedido,position:{lat:n.direccionEnvioSelected.latitude,lng:n.direccionEnvioSelected.longitude},label:{color:"#0d47a1",fontWeight:"600",text:s},title:"Pedido",info:o.idpedido,options:{animation:o.idrepartidor?0:google.maps.Animation.BOUNCE,draggable:!1,icon:"./assets/images/"+r}}),t&&"4"!==o.pwa_delivery_status&&o.idrepartidor&&(e={idrepartidor:o.idrepartidor,idpedido:o.idpedido,nombre:o.nom_repartidor,apellido:o.ap_repartidor,position_now:o.position_now_repartidor},this.listaRepartidoresRed.push(e))}),t&&(this.listRepartidores=this.listaRepartidoresRed,this.addMarkerRepartidor())}openPedido(t){this.pedidoOpen.emit(this.listaPedidos[t])}}return t.\u0275fac=function(e){return new(e||t)(d.Mb(ce),d.Mb(f),d.Mb(C),d.Mb(M))},t.\u0275cmp=d.Gb({type:t,selectors:[["app-mapa-ordenes"]],viewQuery:function(t,e){var o;1&t&&d.Ic(se.a,!0),2&t&&d.sc(o=d.ac())&&(e.map=o.first)},inputs:{listaPedidos:"listaPedidos",listaRepartidoresRed:"listaRepartidoresRed"},outputs:{pedidoOpen:"pedidoOpen"},features:[d.yb],decls:4,vars:6,consts:[["height","100%","width","100%",3,"zoom","center","options"],[3,"position","title","options","mapClick",4,"ngIf"],[3,"position","label","title","options","mapClick",4,"ngFor","ngForOf"],[3,"position","title","options","mapClick"],["markerElemComercio",""],[3,"position","label","title","options","mapClick"],["markerElemRepartidor",""],["markerElem",""]],template:function(t,e){1&t&&(d.Sb(0,"google-map",0),d.Bc(1,de,2,3,"map-marker",1),d.Bc(2,le,2,4,"map-marker",2),d.Bc(3,pe,2,4,"map-marker",2),d.Rb()),2&t&&(d.jc("zoom",e.zoom)("center",e.center)("options",e.options),d.Ab(1),d.jc("ngIf",e.markerComercio),d.Ab(1),d.jc("ngForOf",e.markersRepartidores),d.Ab(1),d.jc("ngForOf",e.markersPedidos))},directives:[se.a,i.m,i.l,se.c],styles:[""]}),t})();var he=o("+0xr");function fe(t,e){if(1&t){const t=d.Tb();d.Sb(0,"div",5),d.Sb(1,"span",12),d.Sb(2,"i",13),d.Zb("click",(function(){return d.vc(t),d.dc(),d.tc(2).toggle()})),d.Rb(),d.Dc(3),d.ec(4,"number"),d.Rb(),d.Rb()}if(2&t){const t=d.dc();d.Ab(3),d.Fc(" Resumen de pedidos (",d.gc(4,1,t.cantidadOrdenes,"2."),")")}}const be=function(t){return{active:t}};function me(t,e){if(1&t){const t=d.Tb();d.Sb(0,"span",14),d.Zb("click",(function(){d.vc(t);const o=e.$implicit;return d.dc().filterList(o)})),d.Dc(1),d.Rb()}if(2&t){const t=e.$implicit;d.jc("ngClass",d.oc(2,be,t.checked)),d.Ab(1),d.Ec(t.descripcion)}}function ge(t,e){if(1&t&&(d.Qb(0),d.Nb(1,"i",31),d.Sb(2,"p",12),d.Dc(3,"Pedido Programado"),d.Rb(),d.Sb(4,"p",32),d.Dc(5),d.Rb(),d.Pb()),2&t){const t=d.dc().$implicit;d.Ab(5),d.Gc(" ",t.json_datos_delivery.p_header.arrDatosDelivery.tiempoEntregaProgamado.descripcion," - ",t.json_datos_delivery.p_header.arrDatosDelivery.tiempoEntregaProgamado.hora," ")}}function ve(t,e){1&t&&(d.Qb(0),d.Nb(1,"i",35),d.Sb(2,"span"),d.Dc(3,"Cliente Recoge"),d.Rb(),d.Pb())}function ye(t,e){1&t&&(d.Qb(0),d.Dc(1," Asignado "),d.Pb())}function Se(t,e){1&t&&(d.Qb(0),d.Dc(1," No asignado "),d.Pb())}function Ce(t,e){1&t&&(d.Sb(0,"span"),d.Dc(1,"Repartidor no Asignado"),d.Rb())}function Re(t,e){if(1&t&&(d.Bc(0,Se,2,0,"ng-container",23),d.Bc(1,Ce,2,0,"ng-template",null,24,d.Cc)),2&t){const t=d.tc(2),e=d.dc(5);d.jc("ngIf",e.isComercioPropioRepartidor)("ngIfElse",t)}}function _e(t,e){if(1&t&&(d.Bc(0,ye,2,0,"ng-container",23),d.Bc(1,Re,3,2,"ng-template",null,24,d.Cc)),2&t){const t=d.tc(2),e=d.dc(2).$implicit;d.jc("ngIf",e.isTieneRepartidor)("ngIfElse",t)}}function we(t,e){if(1&t&&(d.Sb(0,"p",33),d.Dc(1),d.ec(2,"number"),d.Rb(),d.Sb(3,"p",32),d.Bc(4,ve,4,0,"ng-container",23),d.Bc(5,_e,3,2,"ng-template",null,34,d.Cc),d.Rb()),2&t){const t=d.tc(6),e=d.dc(),o=e.index,i=e.$implicit;d.Ab(1),d.Ec(d.gc(2,3,o+1,"2.")),d.Ab(3),d.jc("ngIf",i.isClientePasaRecoger)("ngIfElse",t)}}const Pe=function(t,e,o){return{"badge-success":t,"badge-warning":e,"badge-danger":o}};function ke(t,e){if(1&t&&(d.Sb(0,"p",36),d.Dc(1),d.Rb()),2&t){const t=d.dc().$implicit;d.jc("ngClass",d.qc(3,Pe,"v"===t.color,"a"===t.color,"r"===t.color)),d.Ab(1),d.Gc(" ",t.tiempo," ",t.labelMinTiempo," ")}}const De=function(t,e){return{"quitar-orden":t,fadeInUp:e}},xe=function(t,e,o,i){return{verde:t,amarillo:e,rojo:o,programado:i}};function Ae(t,e){if(1&t){const t=d.Tb();d.Sb(0,"div",17),d.Sb(1,"div",18),d.Zb("click",(function(){d.vc(t);const o=e.$implicit;return d.dc(2).openDialogOrden(o)})),d.Sb(2,"div",19),d.Sb(3,"div",20),d.Sb(4,"p",21),d.Dc(5),d.Rb(),d.Rb(),d.Sb(6,"div",22),d.Bc(7,ge,6,2,"ng-container",23),d.Bc(8,we,7,6,"ng-template",null,24,d.Cc),d.Rb(),d.Sb(10,"div",25),d.Bc(11,ke,2,7,"p",26),d.Sb(12,"p",27),d.Dc(13),d.Rb(),d.Rb(),d.Rb(),d.Sb(14,"div",28),d.Sb(15,"div"),d.Sb(16,"p",29),d.Dc(17,"Cliente: "),d.Sb(18,"strong"),d.Dc(19),d.Rb(),d.Rb(),d.Sb(20,"span",29),d.Dc(21),d.Rb(),d.Rb(),d.Rb(),d.Rb(),d.Sb(22,"div"),d.Nb(23,"app-com-resumen-pedido",30),d.Rb(),d.Rb()}if(2&t){const t=e.$implicit,o=d.tc(9);d.jc("ngClass",d.pc(10,De,t.quitar,t.new)),d.Ab(2),d.jc("ngClass",d.rc(13,xe,"v"===t.color,"a"===t.color,"r"===t.color,"p"===t.color)),d.Ab(3),d.Fc("#",t.idpedido,""),d.Ab(2),d.jc("ngIf",t.flag_pedido_programado)("ngIfElse",o),d.Ab(4),d.jc("ngIf",t.tiempo),d.Ab(2),d.Ec(t.estadoTitle),d.Ab(6),d.Ec(t.json_datos_delivery.p_header.arrDatosDelivery.nombre),d.Ab(2),d.Ec(t.json_datos_delivery.p_header.arrDatosDelivery.direccion),d.Ab(2),d.jc("elPedido",t.json_datos_delivery.p_body)}}const Oe=function(){return{horizontalOrder:!0,updateLayout:!0,transitionDuration:"0"}};function Ie(t,e){if(1&t&&(d.Sb(0,"div",5),d.Sb(1,"ngx-masonry",15),d.Bc(2,Ae,24,18,"div",16),d.Rb(),d.Rb()),2&t){const t=d.dc();d.Ab(1),d.jc("options",d.nc(2,Oe)),d.Ab(1),d.jc("ngForOf",t.listOrdenes)}}function Ee(t,e){1&t&&(d.Qb(0),d.Nb(1,"i",35),d.Sb(2,"span"),d.Dc(3,"Cliente Recoge"),d.Rb(),d.Pb())}function Te(t,e){1&t&&(d.Qb(0),d.Dc(1," Asignado "),d.Pb())}function Fe(t,e){1&t&&(d.Qb(0),d.Dc(1," No asignado "),d.Pb())}function je(t,e){1&t&&(d.Sb(0,"span"),d.Dc(1,"Buscando Repartidor..."),d.Rb())}function Be(t,e){if(1&t&&(d.Bc(0,Fe,2,0,"ng-container",23),d.Bc(1,je,2,0,"ng-template",null,24,d.Cc)),2&t){const t=d.tc(2),e=d.dc(4);d.jc("ngIf",e.isComercioPropioRepartidor)("ngIfElse",t)}}function Me(t,e){if(1&t&&(d.Bc(0,Te,2,0,"ng-container",23),d.Bc(1,Be,3,2,"ng-template",null,24,d.Cc)),2&t){const t=d.tc(2),e=d.dc().$implicit;d.jc("ngIf",e.isTieneRepartidor)("ngIfElse",t)}}function Ne(t,e){if(1&t){const t=d.Tb();d.Sb(0,"div",61),d.Sb(1,"div",18),d.Zb("click",(function(){d.vc(t);const o=e.$implicit;return d.dc(2).openDialogOrden(o)})),d.Sb(2,"div",62),d.Sb(3,"div",20),d.Sb(4,"p",33),d.Dc(5),d.ec(6,"number"),d.Rb(),d.Sb(7,"p",21),d.Dc(8),d.Rb(),d.Rb(),d.Sb(9,"div",25),d.Sb(10,"p",36),d.Dc(11),d.Rb(),d.Sb(12,"p",27),d.Dc(13),d.Rb(),d.Sb(14,"p",32),d.Bc(15,Ee,4,0,"ng-container",23),d.Bc(16,Me,3,2,"ng-template",null,34,d.Cc),d.Rb(),d.Rb(),d.Rb(),d.Sb(18,"div",63),d.Sb(19,"div"),d.Sb(20,"p",29),d.Dc(21,"Cliente: "),d.Sb(22,"strong"),d.Dc(23),d.Rb(),d.Rb(),d.Sb(24,"span",29),d.Dc(25),d.Rb(),d.Rb(),d.Rb(),d.Rb(),d.Rb()}if(2&t){const t=e.$implicit,o=e.index,i=d.tc(17);d.jc("ngClass",d.pc(14,De,t.quitar,t.new)),d.Ab(5),d.Ec(d.gc(6,11,o+1,"2.")),d.Ab(3),d.Fc("#",t.idpedido,""),d.Ab(2),d.jc("ngClass",d.qc(17,Pe,"v"===t.color,"a"===t.color,"r"===t.color)),d.Ab(1),d.Gc(" ",t.tiempo," ",t.labelMinTiempo," "),d.Ab(2),d.Ec(t.estadoTitle),d.Ab(2),d.jc("ngIf",t.isClientePasaRecoger)("ngIfElse",i),d.Ab(8),d.Ec(t.json_datos_delivery.p_header.arrDatosDelivery.nombre),d.Ab(2),d.Ec(t.json_datos_delivery.p_header.arrDatosDelivery.direccion)}}function Le(t,e){1&t&&(d.Sb(0,"th",65),d.Dc(1,"Repartidor"),d.Rb())}function qe(t,e){if(1&t&&(d.Sb(0,"td",66),d.Sb(1,"p",12),d.Dc(2),d.ec(3,"titlecase"),d.ec(4,"titlecase"),d.Rb(),d.Sb(5,"p",67),d.Sb(6,"span",68),d.Dc(7,"Pedidos: "),d.Rb(),d.Dc(8),d.ec(9,"number"),d.Rb(),d.Rb()),2&t){const t=e.$implicit;d.Ab(2),d.Gc(" ",d.fc(3,3,t.nom_repartidor)," ",d.fc(4,5,t.ap_repartidor),""),d.Ab(6),d.Fc("",d.gc(9,7,t.num_pedidos,"2.")," ")}}function ze(t,e){1&t&&(d.Sb(0,"th",65),d.Dc(1,"Importe"),d.Rb())}const Ue=function(t,e,o){return{"badge-primary":t,"badge-info":e,"badge-secondary":o}};function $e(t,e){if(1&t&&(d.Sb(0,"div",70),d.Sb(1,"p",67),d.Sb(2,"span",71),d.Dc(3),d.ec(4,"titlecase"),d.Rb(),d.Sb(5,"span",72),d.Dc(6),d.ec(7,"number"),d.Rb(),d.Rb(),d.Sb(8,"p",67),d.Sb(9,"span",12),d.Dc(10,"Importe: "),d.Rb(),d.Sb(11,"span",67),d.Dc(12),d.ec(13,"number"),d.Rb(),d.Rb(),d.Rb()),2&t){const t=e.$implicit;d.Ab(2),d.jc("ngClass",d.qc(12,Ue,3===t.idtipo_pago,2===t.idtipo_pago,1===t.idtipo_pago)),d.Ab(1),d.Fc(" ",d.fc(4,4,t.descripcion)," : "),d.Ab(3),d.Ec(d.gc(7,6,t.num_pedidos,"2.")),d.Ab(6),d.Fc("",d.gc(13,9,t.importe,".2")," ")}}function We(t,e){if(1&t&&(d.Sb(0,"td",66),d.Bc(1,$e,14,16,"div",69),d.Rb()),2&t){const t=e.$implicit;d.Ab(1),d.jc("ngForOf",t.metodoPago)}}function He(t,e){1&t&&d.Nb(0,"tr",73)}function Qe(t,e){1&t&&d.Nb(0,"tr",74)}function Ge(t,e){if(1&t&&(d.Qb(0),d.Sb(1,"table",50),d.Qb(2,56),d.Bc(3,Le,2,0,"th",52),d.Bc(4,qe,10,10,"td",53),d.Pb(),d.Qb(5,58),d.Bc(6,ze,2,0,"th",52),d.Bc(7,We,2,1,"td",53),d.Pb(),d.Bc(8,He,1,0,"tr",59),d.Bc(9,Qe,1,0,"tr",64),d.Rb(),d.Pb()),2&t){const t=d.dc(2);d.Ab(1),d.jc("dataSource",t.listRepartidoresInformativo),d.Ab(7),d.jc("matHeaderRowDef",t.displayedColumnsRepartidor),d.Ab(1),d.jc("matRowDefColumns",t.displayedColumnsRepartidor)}}function Ve(t,e){1&t&&(d.Sb(0,"th",65),d.Dc(1,"Metodo"),d.Rb())}function Xe(t,e){if(1&t&&(d.Sb(0,"td",66),d.Sb(1,"p",76),d.Dc(2),d.ec(3,"titlecase"),d.Rb(),d.Sb(4,"p",67),d.Sb(5,"span",68),d.Dc(6,"Pedidos: "),d.Rb(),d.Dc(7),d.ec(8,"number"),d.Rb(),d.Rb()),2&t){const t=e.$implicit;d.Ab(1),d.jc("ngClass",d.qc(8,Ue,5===t.idtipo_pago,2===t.idtipo_pago,1===t.idtipo_pago)),d.Ab(1),d.Fc(" ",d.fc(3,3,t.descripcion)," : "),d.Ab(5),d.Fc("",d.gc(8,5,t.num_pedidos,"2.")," ")}}function Ze(t,e){1&t&&(d.Sb(0,"th",65),d.Dc(1,"Importe"),d.Rb())}function Je(t,e){if(1&t&&(d.Sb(0,"td",66),d.Sb(1,"p",67),d.Dc(2),d.ec(3,"number"),d.Rb(),d.Rb()),2&t){const t=e.$implicit;d.Ab(2),d.Fc("",d.gc(3,1,t.importe,".2")," ")}}function Ye(t,e){1&t&&d.Nb(0,"tr",73)}function Ke(t,e){1&t&&d.Nb(0,"tr",74)}function to(t,e){if(1&t&&(d.Sb(0,"table",50),d.Qb(1,75),d.Bc(2,Ve,2,0,"th",52),d.Bc(3,Xe,9,12,"td",53),d.Pb(),d.Qb(4,58),d.Bc(5,Ze,2,0,"th",52),d.Bc(6,Je,4,4,"td",53),d.Pb(),d.Bc(7,Ye,1,0,"tr",59),d.Bc(8,Ke,1,0,"tr",64),d.Rb()),2&t){const t=d.dc(2);d.jc("dataSource",t.listMetodoPagoInformativo),d.Ab(7),d.jc("matHeaderRowDef",t.displayedColumnsMetodoPago),d.Ab(1),d.jc("matRowDefColumns",t.displayedColumnsMetodoPago)}}function eo(t,e){1&t&&(d.Sb(0,"th",65),d.Dc(1," # "),d.Rb())}function oo(t,e){if(1&t&&(d.Sb(0,"td",66),d.Dc(1),d.Rb()),2&t){const t=e.$implicit;d.Ab(1),d.Fc(" ",t.n," ")}}function io(t,e){1&t&&(d.Sb(0,"th",65),d.Dc(1," Pedido "),d.Rb())}function no(t,e){if(1&t&&(d.Sb(0,"td",66),d.Sb(1,"p",77),d.Dc(2),d.Rb(),d.Sb(3,"p",67),d.Dc(4),d.Rb(),d.Rb()),2&t){const t=e.$implicit;d.Ab(2),d.Fc(" #",t.idpedido," "),d.Ab(2),d.Fc("",t.estado," ")}}function ro(t,e){1&t&&(d.Sb(0,"th",65),d.Dc(1," Cliente "),d.Rb())}function so(t,e){if(1&t&&(d.Sb(0,"td",66),d.Sb(1,"p",78),d.Dc(2),d.ec(3,"titlecase"),d.Rb(),d.Sb(4,"p",67),d.Dc(5),d.Rb(),d.Rb()),2&t){const t=e.$implicit;d.Ab(2),d.Ec(d.fc(3,2,t.cliente)),d.Ab(3),d.Fc(" ",t.direccion," ")}}function ao(t,e){1&t&&(d.Sb(0,"th",65),d.Dc(1," Repartidor "),d.Rb())}function co(t,e){if(1&t&&(d.Sb(0,"td",66),d.Sb(1,"span",67),d.Dc(2),d.ec(3,"titlecase"),d.Rb(),d.Rb()),2&t){const t=e.$implicit;d.Ab(2),d.Ec(d.fc(3,1,t.repartidor))}}function lo(t,e){1&t&&(d.Sb(0,"th",65),d.Dc(1," Tiempo "),d.Rb())}function po(t,e){if(1&t&&(d.Sb(0,"td",66),d.Sb(1,"span",79),d.Dc(2),d.Rb(),d.Rb()),2&t){const t=e.$implicit;d.Ab(1),d.jc("ngClass",d.qc(2,Pe,"v"===t.color,"a"===t.color,"r"===t.color)),d.Ab(1),d.Fc("",t.tiempo," ")}}function uo(t,e){1&t&&(d.Sb(0,"th",65),d.Dc(1," importe "),d.Rb())}function ho(t,e){if(1&t&&(d.Sb(0,"td",66),d.Sb(1,"span",80),d.Dc(2),d.ec(3,"number"),d.Rb(),d.Sb(4,"span",79),d.Dc(5),d.Rb(),d.Rb()),2&t){const t=e.$implicit;d.Ab(2),d.Fc("",d.gc(3,3,t.importe,"0.2")," "),d.Ab(2),d.jc("ngClass",d.qc(6,Ue,3===t.metodoPago.idtipo_pago,2===t.metodoPago.idtipo_pago,1===t.metodoPago.idtipo_pago)),d.Ab(1),d.Fc("",t.metodoPago.descripcion," ")}}function fo(t,e){1&t&&d.Nb(0,"tr",73)}function bo(t,e){if(1&t){const t=d.Tb();d.Sb(0,"tr",81),d.Zb("click",(function(){d.vc(t);const o=e.$implicit;return d.dc(2).openDialogOrdenFromInformativo(o)})),d.Rb()}}const mo=function(t){return{cerrar:t}},go=function(t){return{"fa-arrow-right":t}},vo=function(t){return{ampliar:t}},yo=function(t){return{"d-none":t}};function So(t,e){if(1&t){const t=d.Tb();d.Sb(0,"div",37),d.Sb(1,"button",38),d.Zb("click",(function(){d.vc(t);const e=d.dc();return e.cardListaToggle=!e.cardListaToggle})),d.Nb(2,"i",39),d.Rb(),d.Sb(3,"div",40),d.Sb(4,"div",41),d.Sb(5,"ngx-masonry",15),d.Bc(6,Ne,26,21,"div",42),d.Rb(),d.Rb(),d.Sb(7,"div",43),d.Sb(8,"app-mapa-ordenes",44),d.Zb("pedidoOpen",(function(e){return d.vc(t),d.dc().openDialogOrden(e)})),d.Rb(),d.Sb(9,"div",45),d.Sb(10,"div",46),d.Sb(11,"div",47),d.Bc(12,Ge,10,3,"ng-container",23),d.Bc(13,to,9,3,"ng-template",null,48,d.Cc),d.Rb(),d.Sb(15,"div",49),d.Sb(16,"table",50),d.Qb(17,51),d.Bc(18,eo,2,0,"th",52),d.Bc(19,oo,2,1,"td",53),d.Pb(),d.Qb(20,54),d.Bc(21,io,2,0,"th",52),d.Bc(22,no,5,2,"td",53),d.Pb(),d.Qb(23,55),d.Bc(24,ro,2,0,"th",52),d.Bc(25,so,6,4,"td",53),d.Pb(),d.Qb(26,56),d.Bc(27,ao,2,0,"th",52),d.Bc(28,co,4,3,"td",53),d.Pb(),d.Qb(29,57),d.Bc(30,lo,2,0,"th",52),d.Bc(31,po,3,6,"td",53),d.Pb(),d.Qb(32,58),d.Bc(33,uo,2,0,"th",52),d.Bc(34,ho,6,10,"td",53),d.Pb(),d.Bc(35,fo,1,0,"tr",59),d.Bc(36,bo,1,0,"tr",60),d.Rb(),d.Rb(),d.Rb(),d.Rb(),d.Rb(),d.Rb(),d.Rb()}if(2&t){const t=d.tc(14),e=d.dc();d.Ab(1),d.jc("ngClass",d.oc(13,mo,e.cardListaToggle)),d.Ab(1),d.jc("ngClass",d.oc(15,go,e.cardListaToggle)),d.Ab(2),d.jc("ngClass",d.oc(17,mo,e.cardListaToggle)),d.Ab(1),d.jc("options",d.nc(19,Oe)),d.Ab(1),d.jc("ngForOf",e.listOrdenes),d.Ab(2),d.jc("listaPedidos",e.listOrdenes),d.Ab(1),d.jc("ngClass",d.oc(20,vo,e.cardListaToggle)),d.Ab(2),d.jc("ngClass",d.oc(22,yo,!e.isComercioPropioRepartidor&&0===e.listMetodoPagoInformativo.length)),d.Ab(1),d.jc("ngIf",e.isComercioPropioRepartidor)("ngIfElse",t),d.Ab(4),d.jc("dataSource",e.listResumenInformativo),d.Ab(19),d.jc("matHeaderRowDef",e.displayedColumns),d.Ab(1),d.jc("matRowDefColumns",e.displayedColumns)}}let Co=(()=>{class t{constructor(t,e,o,i,n,r,s,a){this.comercioService=t,this.pedidoComercioService=e,this.pedidoRepartidorService=o,this.utilService=i,this.dialog=n,this.socketService=r,this.activatedRoute=s,this.listenService=a,this.listRepartidoresInformativo=[],this.listMetodoPagoInformativo=[],this.cantidadOrdenes=0,this.timepoMax=10,this.timepoMedio=this.timepoMax/2,this.showPanelRigth=!1,this.showVistaLista=!0,this.destroy$=new R.Subject,this.listBtnToolbar=[],this.isComercioPropioRepartidor=!1,this.displayedColumns=["n","pedido","direccion","repartidor","tiempo","importe"],this.displayedColumnsRepartidor=["repartidor","importe"],this.displayedColumnsMetodoPago=["Metodo","importe"],this.cardListaToggle=!1}ngOnInit(){this.activatedRoute.params.subscribe(t=>{this.showVistaLista="lista"===t.id}),this.listBtnToolbar.push({descripcion:"Pendientes",checked:!0,filtro:"'P', 'A'"}),this.listBtnToolbar.push({descripcion:" Listos ",checked:!1,filtro:"'D'"}),this.listBtnToolbar.push({descripcion:" Entregados ",checked:!1,filtro:"'R', 'E'"}),this.optionChekListSelected=this.listBtnToolbar[0],this.listenSocket(),this.comercioService.getSedeInfo(),this.isComercioPropioRepartidor=1===this.comercioService.sedeInfo.pwa_delivery_servicio_propio}ngOnDestroy(){clearInterval(this.timerRun),this.destroy$.next(!0),this.destroy$.unsubscribe()}listenSocket(){this.socketService.isSocketOpen$.subscribe(t=>{t&&(this.listOrdenes=[],this.xloadOrdenesPendientes(this.optionChekListSelected.filtro))}),this.socketService.onGetNuevoPedido().pipe(Object(_.takeUntil)(this.destroy$)).subscribe(t=>{console.log("nuevo pedido",t),this.comercioService.loadOrdenenById(t.idpedido).subscribe(t=>{t.new=!0,this.listOrdenes.push(t),this.darFormatoOrden(),this.listenService.setNotificaNuevoPedido(t),this.pedidoRepartidorService.playAudioNewPedido(),this.masonry.reloadItems(),this.masonry.layout(),this.resumenInformativo()})}),this.socketService.onGetPedidoAceptadoByReparidor().pipe(Object(_.takeUntil)(this.destroy$)).subscribe(t=>{const e=this.findListaOrdenById(t.idpedido);e.nom_repartidor=t.nombre,e.ap_repartidor=t.apellido,e.idrepartidor=t.idrepartidor,e.isTieneRepartidor=!0,e.telefono_repartidor=t.telefono,t.position_now&&(e.position_now_repartidor=t.position_now),this.listenService.setNotificaNuevoPedido(e),this.resumenInformativo()}),this.socketService.onRepartidorNotificaFinPedido().pipe(Object(_.takeUntil)(this.destroy$)).subscribe(t=>{const e=this.findListaOrdenById(t.idpedido);e&&(e.pwa_delivery_status=4,e.estadoTitle=this.pedidoComercioService.getEstadoPedido("E").estadoTitle,e.quitar=!0,this.listenService.setPedidoModificado(null),this.listenService.setPedidoModificado(t),this.quitarOrden(e),this.resumenInformativo())})}xloadOrdenesPendientes(t){this.comercioService.loadOrdenesPendientes(t).subscribe(t=>{console.log(t),this.listOrdenes=t,this.cantidadOrdenes=this.listOrdenes.length,this.darFormatoOrden(),this.initTimerOrdenes(),this.resumenInformativo()})}darFormatoOrden(){console.log("aaa"),this.listOrdenes.filter(t=>!t.con_formato).map(t=>{t.json_datos_delivery="object"==typeof t.json_datos_delivery?t.json_datos_delivery:JSON.parse(t.json_datos_delivery),t.estadoTitle=this.pedidoComercioService.getEstadoPedido(t.pwa_estado).estadoTitle,t.json_datos_delivery.p_subtotales=this.pedidoComercioService.darFormatoSubTotales(t.json_datos_delivery.p_subtotales,t.json_datos_delivery.p_header.arrDatosDelivery.costoTotalDelivery),t.visible=!0,t.isTieneRepartidor=!!t.idrepartidor,t.isClientePasaRecoger=t.json_datos_delivery.p_header.arrDatosDelivery.pasoRecoger,t.nom_repartidor=t.isClientePasaRecoger?"Cliente Recoge":t.nom_repartidor,t.con_formato=!0,t.flag_pedido_programado=t.flag_pedido_programado?t.flag_pedido_programado:0;const e=t.tiempo?t.tiempo:0;return t.color=e>=this.timepoMax?"r":e>=this.timepoMedio?"a":"v",t.color=1===t.flag_pedido_programado?"p":t.color,t})}initTimerOrdenes(){this.calcTimer(),this.timerRun=setInterval(()=>{this.calcTimer()},1e3)}calcTimer(){let t=0;this.listOrdenes.map(e=>{if(1!==e.flag_pedido_programado)"4"!==e.pwa_delivery_status.toString()?(e.labelMinTiempo="",e.tiempo=this.utilService.xTiempoTranscurridos_2(e.hora),t=e.tiempo.split(":")[1],e.color=t>=this.timepoMax?"r":t>=this.timepoMedio?"a":"v",e.color=1===e.flag_pedido_programado?"p":e.color):e.labelMinTiempo="Min";else{const t=new Date(e.fecha_hora);t.getTime()>Date.now()||(e.flag_pedido_programado=0,e.hora=t.getHours()+":"+t.getMinutes()+":00")}})}openDialogOrden(t){const e=new r.e;e.disableClose=!0,e.hasBackdrop=!0,e.width="700px",e.panelClass=["my-dialog-orden-detalle","my-dialog-scrool"],e.data={laOrden:t},this.dialog.open(Wt,e).afterClosed().subscribe(t=>{t&&(this.quitarOrden(t),this.resumenInformativo())})}quitarOrden(t){"Entregados"!==this.optionChekListSelected.descripcion&&setTimeout(()=>{this.listOrdenes=this.listOrdenes.filter(t=>!t.quitar),this.masonry.reloadItems(),this.masonry.layout()},500)}filterList(t){this.listBtnToolbar.map(t=>t.checked=!1),t.checked=!0,this.optionChekListSelected=t,this.filtrarOrdenes(t)}filtrarOrdenes(t){this.xloadOrdenesPendientes(t.filtro)}resumenOrdenesPendientes(){this.listResumenAll=[],this.listOrdenes.map(t=>{t.json_datos_delivery.p_body.tipoconsumo.map(t=>{t.secciones.map(t=>{let e=this.listResumenAll.filter(e=>e.idseccion===t.idseccion)[0];e||(e=JSON.parse(JSON.stringify(t)),e.items=[],this.listResumenAll.push(e)),t.items.map(t=>{let o=e.items.filter(e=>e.iditem===t.iditem)[0];o?(o.cantidad_seleccionada+=t.cantidad_seleccionada,o.precio_total+=t.precio_total):(o=JSON.parse(JSON.stringify(t)),e.items.push(o))})})})}),this.showPanelRigth=!0}resumenInformativo(){let t={},e={},o={};this.listResumenInformativo=[],this.listRepartidoresInformativo=[],this.listMetodoPagoInformativo=[],this.listOrdenes.map((i,n)=>{t={n:n+1,idpedido:i.idpedido,correlativo_dia:i.correlativo_dia,cliente:i.json_datos_delivery.p_header.arrDatosDelivery.nombre,direccion:i.json_datos_delivery.p_header.arrDatosDelivery.direccionEnvioSelected.direccion,ciudad:i.json_datos_delivery.p_header.arrDatosDelivery.direccionEnvioSelected.ciudad||"",fecha:i.fecha,hora:i.hora,tiempo:i.tiempo?i.tiempo+" Min":"",repartidor:i.nom_repartidor,estado:i.estadoTitle,color:i.color,metodoPago:i.json_datos_delivery.p_header.arrDatosDelivery.metodoPago,importe:"0"===i.total?i.total_r:i.total},this.listResumenInformativo.push(t),e={idrepartidor:i.idrepartidor,idpedido:i.idpedido,num_pedidos:1,nom_repartidor:i.nom_repartidor,ap_repartidor:i.ap_repartidor,metodoPago:[{num_pedidos:1,idtipo_pago:i.json_datos_delivery.p_header.arrDatosDelivery.metodoPago.idtipo_pago,descripcion:i.json_datos_delivery.p_header.arrDatosDelivery.metodoPago.descripcion,importe:"0"===i.total?parseFloat(i.total_r):parseFloat(i.total)}],importe:"0"===i.total?parseFloat(i.total_r):parseFloat(i.total)},this.resumenInformativoRepartidores(e),!this.isComercioPropioRepartidor&&i.metodoPagoRegistro&&(o={num_pedidos:1,idtipo_pago:i.metodoPagoRegistro[0].idtipo_pago,descripcion:i.metodoPagoRegistro[0].descripcion,importe:"0"===i.total?parseFloat(i.total_r):parseFloat(i.total)},this.resumenInformativoMetodosPago(o))})}resumenInformativoRepartidores(t){const e=this.listRepartidoresInformativo.filter(e=>e.idrepartidor===t.idrepartidor)[0];if(e){e.num_pedidos+=1,e.importe+=t.importe;const o=e.metodoPago.filter(e=>e.idtipo_pago===t.metodoPago[0].idtipo_pago)[0];o?(o.num_pedidos+=1,o.importe+=t.metodoPago[0].importe):e.metodoPago.push(t.metodoPago[0])}else this.listRepartidoresInformativo.push(t)}resumenInformativoMetodosPago(t){const e=this.listMetodoPagoInformativo.filter(e=>e.idtipo_pago===t.idtipo_pago)[0];e?(e.num_pedidos+=1,e.importe+=t.importe):this.listMetodoPagoInformativo.push(t)}openDialogOrdenFromInformativo(t){this.openDialogOrden(this.findListaOrdenById(t.idpedido))}findListaOrdenById(t){return this.listOrdenes.filter(e=>e.idpedido===t)[0]}}return t.\u0275fac=function(e){return new(e||t)(d.Mb(f),d.Mb(j),d.Mb(oe),d.Mb(F),d.Mb(r.b),d.Mb(C),d.Mb(n.a),d.Mb(M))},t.\u0275cmp=d.Gb({type:t,selectors:[["app-ordenes"]],viewQuery:function(t,e){var o;1&t&&d.Ic(Xt,!0),2&t&&d.sc(o=d.ac())&&(e.masonry=o.first)},decls:16,vars:6,consts:[[1,"example-container"],["mode","over","position","end",1,"example-sidenav",3,"opened","closedStart"],["drawer",""],[2,"max-width","350px"],["class","p-3",4,"ngIf"],[1,"p-3"],[3,"listResumen"],[1,"animated","fadeInDown","xh-body-odenen"],[1,"card-encabezado","p-3","text-white","fs-13","d-flex","justify-content-between"],["class","btn-link-2 pr-2",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"btn-link-2",3,"click"],["class","animated fadeIn",4,"ngIf"],[1,"fw-600"],[1,"fa","fa-arrow-left","pr-2",3,"click"],[1,"btn-link-2","pr-2",3,"ngClass","click"],[3,"options"],["ngxMasonryItem","","class","card-orden animated",3,"ngClass",4,"ngFor","ngForOf"],["ngxMasonryItem","",1,"card-orden","animated",3,"ngClass"],["matRipple","",3,"click"],[1,"c-header","fs-13","p-3","border-bottom",3,"ngClass"],[1,"text-left"],[1,"fw-600","fs-15"],[1,"text-center"],[4,"ngIf","ngIfElse"],["elseTemplate",""],[1,"text-right"],["class","fw-600 badge","style","font-size: 14px !important;",3,"ngClass",4,"ngIf"],[1,"fs-12"],[1,"c-body","border-bottom","p-3","fs-12"],[1,"d-inline-block","text-truncate","w-100"],[3,"elPedido"],[1,"fa","fa-clock-o","fa-2x"],[1,"fs-11"],[1,"fs-20","fw-600"],["elseConRepartidor",""],[1,"fa","fa-user","p-1"],[1,"fw-600","badge",2,"font-size","14px !important",3,"ngClass"],[1,"animated","fadeIn"],["matRipple","","type","button",1,"btn","btn-secondary","btn-card-lista",3,"ngClass","click"],[1,"fa","fa-arrow-left",3,"ngClass"],[1,"d-flex","content-body-mapa"],[1,"xw-220","border-right","p-3","overflow-auto","card-lista",3,"ngClass"],["ngxMasonryItem","","class","card-orden xw-50 animated",3,"ngClass",4,"ngFor","ngForOf"],[1,"w-100","h-100"],[3,"listaPedidos","pedidoOpen"],[1,"card-resumen",3,"ngClass"],[1,"d-flex","bg-white","w-100"],[1,"border-right","p-2",2,"min-width","320px",3,"ngClass"],["elseMetodoPago",""],[1,"w-100","p-2"],["mat-table","",1,"table-model-1","w-100",3,"dataSource"],["matColumnDef","n"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","pedido"],["matColumnDef","direccion"],["matColumnDef","repartidor"],["matColumnDef","tiempo"],["matColumnDef","importe"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","","class","xCursor",3,"click",4,"matRowDef","matRowDefColumns"],["ngxMasonryItem","",1,"card-orden","xw-50","animated",3,"ngClass"],[1,"c-header","fs-13","p-3","border-bottom"],[1,"c-body","border-bottom","p-3","fs-11"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],[1,"text-secondary"],[1,"fw-100"],["class","mb-1",4,"ngFor","ngForOf"],[1,"mb-1"],[1,"fw-600","badge",3,"ngClass"],[1,"text-secondary","pl-1"],["mat-header-row",""],["mat-row",""],["matColumnDef","Metodo"],[1,"fw-600","badge",2,"font-size","13px !important",3,"ngClass"],[1,"fw-600","fs-14","text-secondary"],[1,"fw-100","text-secondary"],[1,"badge",3,"ngClass"],[1,"text-secondary","fw-600"],["mat-row","",1,"xCursor",3,"click"]],template:function(t,e){1&t&&(d.Sb(0,"mat-drawer-container",0),d.Sb(1,"mat-drawer",1,2),d.Zb("closedStart",(function(){return e.showPanelRigth=!1})),d.Sb(3,"div",3),d.Bc(4,fe,5,4,"div",4),d.Sb(5,"div",5),d.Nb(6,"app-com-resumen-all-pedidos",6),d.Rb(),d.Rb(),d.Rb(),d.Sb(7,"div",7),d.Sb(8,"div",8),d.Sb(9,"div"),d.Bc(10,me,2,4,"span",9),d.Rb(),d.Sb(11,"div"),d.Sb(12,"span",10),d.Zb("click",(function(){return e.resumenOrdenesPendientes()})),d.Dc(13,"Resumen"),d.Rb(),d.Rb(),d.Rb(),d.Bc(14,Ie,3,3,"div",4),d.Bc(15,So,37,24,"div",11),d.Rb(),d.Rb()),2&t&&(d.Ab(1),d.jc("opened",e.showPanelRigth),d.Ab(3),d.jc("ngIf",e.listResumenAll),d.Ab(2),d.jc("listResumen",e.listResumenAll),d.Ab(4),d.jc("ngForOf",e.listBtnToolbar),d.Ab(4),d.jc("ngIf",e.showVistaLista),d.Ab(1),d.jc("ngIf",!e.showVistaLista))},directives:[w.b,w.a,i.m,re,i.l,i.k,Xt,Zt,P.i,ot,ue,he.j,he.c,he.e,he.b,he.g,he.i,he.d,he.a,he.f,he.h],pipes:[i.e,i.u],styles:[".xh-body-odenen[_ngcontent-%COMP%]{height:calc(100vh - 58px)}.content-body-mapa[_ngcontent-%COMP%]{height:calc(100vh - 110px);overflow:auto}.masonry-item[_ngcontent-%COMP%]{width:200px;background:#20b2aa}.card-orden[_ngcontent-%COMP%], .masonry-item[_ngcontent-%COMP%]{margin-right:10px;margin-bottom:10px}.card-orden[_ngcontent-%COMP%]{border-radius:5px;border:1px solid #bdbdbd;width:310px;background:#eee;-webkit-filter:drop-shadow(1px 1px 2px #444);filter:drop-shadow(1px 1px 2px #444);transition:all .3s ease-in}.card-orden.xw-50[_ngcontent-%COMP%]{width:220px}.card-encabezado[_ngcontent-%COMP%]{background-color:#37474f}.xw-220[_ngcontent-%COMP%]{min-width:270px}.card-orden.quitar-orden[_ngcontent-%COMP%]{margin-left:-200px;opacity:0}.c-header[_ngcontent-%COMP%]{transition:all .3s;display:-webkit-flex;display:flex;-webkit-justify-content:space-between;justify-content:space-between;border-radius:5px 5px 0 0;background:#e0e0e0}.c-header.verde[_ngcontent-%COMP%]{background:#90ee90}.c-header.amarillo[_ngcontent-%COMP%]{background:khaki}.c-header.rojo[_ngcontent-%COMP%]{background:#f08080}.c-header.programado[_ngcontent-%COMP%]{background:#80deea}.c-etiqueta-tiempo.verde[_ngcontent-%COMP%]{background:#90ee90}.c-etiqueta-tiempo.amarillo[_ngcontent-%COMP%]{background:khaki}.c-etiqueta-tiempo.rojo[_ngcontent-%COMP%]{background:#f08080}.c-body[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .c-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.card-resumen[_ngcontent-%COMP%]{width:calc(100% - 270px);position:fixed;bottom:0;border-top:2px solid #37474f;max-height:250px;overflow:auto;transition:all .2s ease-in}.card-resumen.ampliar[_ngcontent-%COMP%]{width:100%}.card-lista[_ngcontent-%COMP%]{margin-left:0;background-color:#455a64;transition:all .2s ease-in}.card-lista.cerrar[_ngcontent-%COMP%]{margin-left:-270px}.btn-card-lista[_ngcontent-%COMP%]{position:fixed;left:230px;z-index:1;transition:all .2s ease-in}.btn-card-lista.cerrar[_ngcontent-%COMP%]{left:0}"]}),t})(),Ro=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=d.Gb({type:t,selectors:[["app-seguimiento"]],decls:2,vars:0,template:function(t,e){1&t&&(d.Sb(0,"p"),d.Dc(1,"seguimiento works!"),d.Rb())},styles:[""]}),t})(),_o=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=d.Gb({type:t,selectors:[["app-dashboard"]],decls:2,vars:0,template:function(t,e){1&t&&(d.Sb(0,"p"),d.Dc(1,"dashboard works!"),d.Rb())},styles:[""]}),t})(),wo=Ao,Po=Ao,ko=Ao,Do=Oo,xo=Io;function Ao(t){for(var e=new Array(t),o=-1;++o<t;)e[o]=0;return e}function Oo(t,e){for(var o=t.length;o<e;)t[o++]=0;return t}function Io(t,e){if(e>32)throw new Error("invalid array width!");return t}function Eo(t){this.length=t,this.subarrays=1,this.width=8,this.masks={0:0},this[0]=wo(t)}"undefined"!=typeof Uint8Array&&(wo=function(t){return new Uint8Array(t)},Po=function(t){return new Uint16Array(t)},ko=function(t){return new Uint32Array(t)},Do=function(t,e){if(t.length>=e)return t;var o=new t.constructor(e);return o.set(t),o},xo=function(t,e){var o;switch(e){case 16:o=Po(t.length);break;case 32:o=ko(t.length);break;default:throw new Error("invalid array width!")}return o.set(t),o}),Eo.prototype.lengthen=function(t){var e,o;for(e=0,o=this.subarrays;e<o;++e)this[e]=Do(this[e],t);this.length=t},Eo.prototype.add=function(){var t,e,o,i,n;for(i=0,n=this.subarrays;i<n;++i)if(o=(~(t=this.masks[i])&t+1)>>>0,!((e=this.width-32*i)>=32)||o)return e<32&&o&1<<e&&(this[i]=xo(this[i],e<<=1),this.width=32*i+e),this.masks[i]|=o,{offset:i,one:o};return this[this.subarrays]=wo(this.length),this.masks[this.subarrays]=1,this.width+=8,{offset:this.subarrays++,one:1}},Eo.prototype.copy=function(t,e){var o,i;for(o=0,i=this.subarrays;o<i;++o)this[o][t]=this[o][e]},Eo.prototype.truncate=function(t){var e,o;for(e=0,o=this.subarrays;e<o;++e)for(var i=this.length-1;i>=t;i--)this[e][i]=0;this.length=t},Eo.prototype.zero=function(t){var e,o;for(e=0,o=this.subarrays;e<o;++e)if(this[e][t])return!1;return!0},Eo.prototype.zeroExcept=function(t,e,o){var i,n;for(i=0,n=this.subarrays;i<n;++i)if(i===e?this[i][t]&o:this[i][t])return!1;return!0},Eo.prototype.zeroExceptMask=function(t,e){var o,i;for(o=0,i=this.subarrays;o<i;++o)if(this[o][t]&e[o])return!1;return!0},Eo.prototype.only=function(t,e,o){var i,n;for(i=0,n=this.subarrays;i<n;++i)if(this[i][t]!=(i===e?o:0))return!1;return!0},Eo.prototype.onlyExcept=function(t,e,o,i,n){var r,s,a;for(s=0,a=this.subarrays;s<a;++s)if(r=this[s][t],s===e&&(r&=o),r!=(s===i?n:0))return!1;return!0};var To={array8:Ao,array16:Ao,array32:Ao,arrayLengthen:Oo,arrayWiden:Io,bitarray:Eo},Fo=(t,e)=>function(o){var i=o.length;return[t.left(o,e,0,i),t.right(o,e,0,i)]},jo=(t,e)=>{var o=e[0],i=e[1];return function(e){var n=e.length;return[t.left(e,o,0,n),t.left(e,i,0,n)]}},Bo=t=>[0,t.length],Mo=t=>t,No=()=>null,Lo=()=>0;function qo(t){function e(t,e,i){for(var n=i-e,r=1+(n>>>1);--r>0;)o(t,r,n,e);return t}function o(e,o,i,n){for(var r,s=e[--n+o],a=t(s);(r=o<<1)<=i&&(r<i&&t(e[n+r])>t(e[n+r+1])&&r++,!(a<=t(e[n+r])));)e[n+o]=e[n+r],o=r;e[n+o]=s}return e.sort=function(t,e,i){for(var n,r=i-e;--r>0;)n=t[e],t[e]=t[e+r],t[e+r]=n,o(t,1,r,e);return t},e}const zo=qo(Mo);zo.by=qo;var Uo=zo;function $o(t){var e=Uo.by(t);return function(o,i,n,r){var s,a,c,d=new Array(r=Math.min(n-i,r));for(a=0;a<r;++a)d[a]=o[i++];if(e(d,0,r),i<n){s=t(d[0]);do{t(c=o[i])>s&&(d[0]=c,s=t(e(d,0,r)[0]))}while(++i<n)}return d}}const Wo=$o(Mo);Wo.by=$o;var Ho=Wo;function Qo(t){function e(e,o,i,n){for(;i<n;){var r=i+n>>>1;o<t(e[r])?n=r:i=r+1}return i}return e.right=e,e.left=function(e,o,i,n){for(;i<n;){var r=i+n>>>1;t(e[r])<o?i=r+1:n=r}return i},e}const Go=Qo(Mo);Go.by=Qo;var Vo=Go,Xo=(t,e,o)=>{for(var i=0,n=e.length,r=o?JSON.parse(JSON.stringify(t)):new Array(n);i<n;++i)r[i]=t[e[i]];return r},Zo=t=>t+1,Jo=t=>t-1,Yo=t=>function(e,o){return e+ +t(o)},Ko=t=>function(e,o){return e-t(o)};const ti=(t,e)=>{const o=t[e];return"function"==typeof o?o.call(t):o},ei=/\[([\w\d]+)\]/g;var oi=(t,e)=>function(t,e,o,i,n){for(n in i=(o=o.split(".")).splice(-1,1),o)e=e[o[n]]=e[o[n]]||{};return t(e,i)}(ti,t,e.replace(ei,".$1"));ni.heap=Uo,ni.heapselect=Ho,ni.bisect=Vo,ni.permute=Xo;var ii=ni;function ni(){var t,e={add:c,remove:d,dimension:u,groupAll:h,size:f,all:b,allFiltered:m,onChange:g,isElementFiltered:p},o=[],i=0,n=[],r=[],s=[],a=[];function c(n){var s=i,a=n.length;return a&&(o=o.concat(n),t.lengthen(i+=a),r.forEach((function(t){t(n,s,a)})),v("dataAdded")),e}function d(e){for(var r,a=new Array(i),c=[],d="function"==typeof e,l=0,p=0;l<i;++l)r=l,(d?e(o[r],r):t.zero(r))?(c.push(l),a[l]=-1):a[l]=p++;n.forEach((function(t){t(-1,-1,[],c,!0)})),s.forEach((function(t){t(a)}));for(var u=0,h=0;u<i;++u)-1!==a[u]&&(u!==h&&(t.copy(h,u),o[h]=o[u]),++h);o.length=i=h,t.truncate(h),v("dataRemoved")}function l(e){var o,i,n,r,s=Array(t.subarrays);for(o=0;o<t.subarrays;o++)s[o]=-1;for(i=0,n=e.length;i<n;i++)s[(r=e[i].id())>>7]&=~(1<<(63&r));return s}function p(e,o){var i=l(o||[]);return t.zeroExceptMask(e,i)}function u(e,a){if("string"==typeof e){var c=e;e=function(t){return oi(t,c)}}var d,l,p,u,h,f,b,m,g,y,S,C,R,_,w={filter:function(t){return null==t?q():Array.isArray(t)?L(t):"function"==typeof t?z(t):N(t)},filterExact:N,filterRange:L,filterFunction:z,filterAll:q,currentFilter:function(){return C},hasCurrentFilter:function(){return R},top:function(e,i){var n,r=[],s=I,c=0;for(i&&i>0&&(c=i);--s>=O&&e>0;)t.zero(n=f[s])&&(c>0?--c:(r.push(o[n]),--e));if(a)for(s=0;s<P.length&&e>0;s++)t.zero(n=P[s])&&(c>0?--c:(r.push(o[n]),--e));return r},bottom:function(e,i){var n,r,s=[],c=0;if(i&&i>0&&(c=i),a)for(n=0;n<P.length&&e>0;n++)t.zero(r=P[n])&&(c>0?--c:(s.push(o[r]),--e));for(n=O;n<I&&e>0;)t.zero(r=f[n])&&(c>0?--c:(s.push(o[r]),--e)),n++;return s},group:$,groupAll:function(){var t=$(No),e=t.all;return delete t.all,delete t.top,delete t.order,delete t.orderNatural,delete t.size,t.value=function(){return e()[0].value},t},dispose:W,remove:W,accessor:e,id:function(){return u}},P=[],k=function(t){return si(t).sort((function(t,e){var o=b[t],i=b[e];return o<i?-1:o>i?1:t-e}))},D=Bo,x=[],A=[],O=0,I=0,E=0;r.unshift(F),r.push(j),s.push(B);var T=t.add();function F(o,n,r){var s,c;if(a){E=0,U=0,_=[];for(var l=0;l<o.length;l++)for(U=0,_=e(o[l]);U<_.length;U++)E++;b=[],s=si(o.length),c=ri(E,1);for(var u=si(E),v=0,C=0;C<o.length;C++)if((_=e(o[C])).length)for(s[C]=_.length,U=0;U<_.length;U++)b.push(_[U]),u[v]=C,v++;else s[C]=0,P.push(C+n);var R=k(E);b=Xo(b,R),m=Xo(u,R)}else b=o.map(e),m=k(r),b=Xo(b,m);var w,x,A,T=D(b),F=T[0],j=T[1];if(a)if(r=E,S)for(w=0;w<r;++w)S(b[w],w)||(0==--s[m[w]]&&(t[p][m[w]+n]|=d),c[w]=1);else{for(x=0;x<F;++x)0==--s[m[x]]&&(t[p][m[x]+n]|=d),c[x]=1;for(A=j;A<r;++A)0==--s[m[A]]&&(t[p][m[A]+n]|=d),c[A]=1}else if(S)for(w=0;w<r;++w)S(b[w],w)||(t[p][m[w]+n]|=d);else{for(x=0;x<F;++x)t[p][m[x]+n]|=d;for(A=j;A<r;++A)t[p][m[A]+n]|=d}if(!n)return h=b,f=m,g=s,y=c,O=F,void(I=j);var B,M=h,N=f,L=y,q=0;if(l=0,a&&(B=n,n=M.length,r=E),h=new Array(a?n+r:i),f=a?new Array(n+r):ri(i,i),a&&(y=ri(n+r,1)),a){var z=g.length;g=To.arrayLengthen(g,i);for(var U=0;U+z<i;U++)g[U+z]=s[U]}for(var $=0;l<n&&q<r;++$)M[l]<b[q]?(h[$]=M[l],a&&(y[$]=L[l]),f[$]=N[l++]):(h[$]=b[q],a&&(y[$]=c[q]),f[$]=m[q++]+(a?B:n));for(;l<n;++l,++$)h[$]=M[l],a&&(y[$]=L[l]),f[$]=N[l];for(;q<r;++q,++$)h[$]=b[q],a&&(y[$]=c[q]),f[$]=m[q]+(a?B:n);T=D(h),O=T[0],I=T[1]}function j(t,e,o){x.forEach((function(t){t(b,m,e,o)})),b=m=null}function B(t){if(a){for(var e=0,o=0;e<P.length;e++)-1!==t[P[e]]&&(P[o]=t[P[e]],o++);for(P.length=o,e=0,o=0;e<i;e++)-1!==t[e]&&(o!==e&&(g[o]=g[e]),o++);g=g.slice(0,o)}for(var n,r=h.length,s=0,c=0;s<r;++s)-1!==t[n=f[s]]&&(s!==c&&(h[c]=h[s]),f[c]=t[n],a&&(y[c]=y[s]),++c);for(h.length=c,a&&(y=y.slice(0,c));c<r;)f[c++]=0;var d=D(h);O=d[0],I=d[1]}function M(e){var o=e[0],i=e[1];if(S)return S=null,U((function(t,e){return o<=e&&e<i}),0===e[0]&&e[1]===h.length),O=o,I=i,w;var r,s,c,l=[],u=[],b=[],m=[];if(o<O)for(r=o,s=Math.min(O,i);r<s;++r)l.push(f[r]),b.push(r);else if(o>O)for(r=O,s=Math.min(o,I);r<s;++r)u.push(f[r]),m.push(r);if(i>I)for(r=Math.max(o,I),s=i;r<s;++r)l.push(f[r]),b.push(r);else if(i<I)for(r=Math.max(O,i),s=I;r<s;++r)u.push(f[r]),m.push(r);if(a){var C=[],R=[];for(r=0;r<l.length;r++)g[l[r]]++,y[b[r]]=0,1===g[l[r]]&&(t[p][l[r]]^=d,C.push(l[r]));for(r=0;r<u.length;r++)g[u[r]]--,y[m[r]]=1,0===g[u[r]]&&(t[p][u[r]]^=d,R.push(u[r]));if(l=C,u=R,D===Bo)for(r=0;r<P.length;r++)t[p][c=P[r]]&d&&(t[p][c]^=d,l.push(c));else for(r=0;r<P.length;r++)t[p][c=P[r]]&d||(t[p][c]^=d,u.push(c))}else{for(r=0;r<l.length;r++)t[p][l[r]]^=d;for(r=0;r<u.length;r++)t[p][u[r]]^=d}return O=o,I=i,n.forEach((function(t){t(d,p,l,u)})),v("filtered"),w}function N(t){return C=t,R=!0,M((D=Fo(Vo,t))(h))}function L(t){return C=t,R=!0,M((D=jo(Vo,t))(h))}function q(){return C=void 0,R=!1,M((D=Bo)(h))}function z(t){C=t,R=!0,S=t,D=Bo,U(t,!1);var e=D(h);return O=e[0],I=e[1],w}function U(e,o){var i,r,s,c=[],u=[],b=[],m=[],S=h.length;if(!a)for(i=0;i<S;++i)!(t[p][r=f[i]]&d)^!!(s=e(h[i],i))&&(s?c.push(r):u.push(r));if(a)for(i=0;i<S;++i)e(h[i],i)?(c.push(f[i]),b.push(i)):(u.push(f[i]),m.push(i));if(a){var C=[],R=[];for(i=0;i<c.length;i++)1===y[b[i]]&&(g[c[i]]++,y[b[i]]=0,1===g[c[i]]&&(t[p][c[i]]^=d,C.push(c[i])));for(i=0;i<u.length;i++)0===y[m[i]]&&(g[u[i]]--,y[m[i]]=1,0===g[u[i]]&&(t[p][u[i]]^=d,R.push(u[i])));if(c=C,u=R,o)for(i=0;i<P.length;i++)t[p][r=P[i]]&d&&(t[p][r]^=d,c.push(r));else for(i=0;i<P.length;i++)t[p][r=P[i]]&d||(t[p][r]^=d,u.push(r))}else{for(i=0;i<c.length;i++)t[p][c[i]]&d&&(t[p][c[i]]&=l);for(i=0;i<u.length;i++)t[p][u[i]]&d||(t[p][u[i]]|=d)}n.forEach((function(t){t(d,p,c,u)})),v("filtered")}function $(e){var r={top:M,all:B,reduce:N,reduceCount:L,reduceSum:q,order:z,orderNatural:U,size:$,dispose:W,remove:W};A.push(r);var c,u,b,m,g,v,y,S,C=8,R=ai(C),_=0,w=No,P=No,k=!0,D=e===No;function O(r,s,d,f){a&&(S=d,d=h.length-r.length,f=r.length);var b,m,x,A,O,I,B=c,M=a?[]:ri(_,R),N=g,L=v,q=y,z=_,U=0,$=0;for(k&&(N=q=No),k&&(L=q=No),c=new Array(_),_=0,u=a?z?u:[]:z>1?To.arrayLengthen(u,i):ri(i,R),z&&(x=(m=B[0]).key);$<f&&!((A=e(r[$]))>=A);)++$;for(;$<f;){for(m&&x<=A?(O=m,I=x,M[U]=_,(m=B[++U])&&(x=m.key)):(O={key:A,value:q()},I=A),c[_]=O;A<=I&&(b=s[$]+(a?S:d),a?u[b]?u[b].push(_):u[b]=[_]:u[b]=_,O.value=N(O.value,o[b],!0),t.zeroExcept(b,p,l)||(O.value=L(O.value,o[b],!1)),!(++$>=f));)A=e(r[$]);H()}for(;U<z;)c[M[U]=_]=B[U++],H();if(a)for(var W=0;W<i;W++)u[W]||(u[W]=[]);if(_>U)if(a)for(U=0;U<S;++U)for(W=0;W<u[U].length;W++)u[U][W]=M[u[U][W]];else for(U=0;U<d;++U)u[U]=M[u[U]];function H(){a?_++:++_===R&&(M=To.arrayWiden(M,C<<=1),u=To.arrayWiden(u,C),R=ai(C))}b=n.indexOf(w),_>1||a?(w=E,P=F):(!_&&D&&(_=1,c=[{key:null,value:q()}]),1===_?(w=T,P=j):(w=No,P=No),u=null),n[b]=w}function I(t){if(_>1||a){var e,o,r,s=_,d=c,l=ri(s,s);if(a){for(e=0,r=0;e<i;++e)if(-1!==t[e]){for(u[r]=u[e],o=0;o<u[r].length;o++)l[u[r][o]]=1;++r}}else for(e=0,r=0;e<i;++e)-1!==t[e]&&(l[u[r]=u[e]]=1,++r);for(c=[],_=0,e=0;e<s;++e)l[e]&&(l[e]=_++,c.push(d[e]));if(_>1||a)if(a)for(e=0;e<r;++e)for(o=0;o<u[e].length;++o)u[e][o]=l[u[e][o]];else for(e=0;e<r;++e)u[e]=l[u[e]];else u=null;n[n.indexOf(w)]=_>1||a?(P=F,w=E):1===_?(P=j,w=T):P=w=No}else if(1===_){if(D)return;for(var p=0;p<i;++p)if(-1!==t[p])return;c=[],_=0,n[n.indexOf(w)]=w=P=No}}function E(e,i,n,r,s){var h,f,b,m,y;if(!(e===d&&i===p||k))if(a){for(h=0,m=n.length;h<m;++h)if(t.zeroExcept(b=n[h],p,l))for(f=0;f<u[b].length;f++)(y=c[u[b][f]]).value=g(y.value,o[b],!1,f);for(h=0,m=r.length;h<m;++h)if(t.onlyExcept(b=r[h],p,l,i,e))for(f=0;f<u[b].length;f++)(y=c[u[b][f]]).value=v(y.value,o[b],s,f)}else{for(h=0,m=n.length;h<m;++h)t.zeroExcept(b=n[h],p,l)&&((y=c[u[b]]).value=g(y.value,o[b],!1));for(h=0,m=r.length;h<m;++h)t.onlyExcept(b=r[h],p,l,i,e)&&((y=c[u[b]]).value=v(y.value,o[b],s))}}function T(e,i,n,r,s){if(!(e===d&&i===p||k)){var a,u,h,f=c[0];for(a=0,h=n.length;a<h;++a)t.zeroExcept(u=n[a],p,l)&&(f.value=g(f.value,o[u],!1));for(a=0,h=r.length;a<h;++a)t.onlyExcept(u=r[a],p,l,i,e)&&(f.value=v(f.value,o[u],s))}}function F(){var e,n,r;for(e=0;e<_;++e)c[e].value=y();if(a){for(e=0;e<i;++e)for(n=0;n<u[e].length;n++)(r=c[u[e][n]]).value=g(r.value,o[e],!0,n);for(e=0;e<i;++e)if(!t.zeroExcept(e,p,l))for(n=0;n<u[e].length;n++)(r=c[u[e][n]]).value=v(r.value,o[e],!1,n)}else{for(e=0;e<i;++e)(r=c[u[e]]).value=g(r.value,o[e],!0);for(e=0;e<i;++e)t.zeroExcept(e,p,l)||((r=c[u[e]]).value=v(r.value,o[e],!1))}}function j(){var e,n=c[0];for(n.value=y(),e=0;e<i;++e)n.value=g(n.value,o[e],!0);for(e=0;e<i;++e)t.zeroExcept(e,p,l)||(n.value=v(n.value,o[e],!1))}function B(){return k&&(P(),k=!1),c}function M(t){var e=b(B(),0,c.length,t);return m.sort(e,0,e.length)}function N(t,e,o){return g=t,v=e,y=o,k=!0,r}function L(){return N(Zo,Jo,Lo)}function q(t){return N(Yo(t),Ko(t),Lo)}function z(t){function e(e){return t(e.value)}return b=Ho.by(e),m=Uo.by(e),r}function U(){return z(Mo)}function $(){return _}function W(){var t=n.indexOf(w);return t>=0&&n.splice(t,1),(t=x.indexOf(O))>=0&&x.splice(t,1),(t=s.indexOf(I))>=0&&s.splice(t,1),(t=A.indexOf(r))>=0&&A.splice(t,1),r}return arguments.length<1&&(e=Mo),n.push(w),x.push(O),s.push(I),O(h,f,0,i),L().orderNatural()}function W(){A.forEach((function(t){t.dispose()}));var e=r.indexOf(F);return e>=0&&r.splice(e,1),(e=r.indexOf(j))>=0&&r.splice(e,1),(e=s.indexOf(B))>=0&&s.splice(e,1),t.masks[p]&=l,q()}return l=~(d=T.one),u=(p=T.offset)<<7|Math.log(d)/Math.log(2),F(o,0,i),j(0,0,i),w}function h(){var e,s,a,c,d={reduce:h,reduceCount:f,reduceSum:function(t){return h(Yo(t),Ko(t),Lo)},value:function(){return l&&(function(){var n;for(e=c(),n=0;n<i;++n)e=s(e,o[n],!0),t.zero(n)||(e=a(e,o[n],!1))}(),l=!1),e},dispose:b,remove:b},l=!0;function p(n,r){var c;if(!l)for(c=r;c<i;++c)e=s(e,o[c],!0),t.zero(c)||(e=a(e,o[c],!1))}function u(i,n,r,c,d){var p,u,h;if(!l){for(p=0,h=r.length;p<h;++p)t.zero(u=r[p])&&(e=s(e,o[u],d));for(p=0,h=c.length;p<h;++p)t.only(u=c[p],n,i)&&(e=a(e,o[u],d))}}function h(t,e,o){return s=t,a=e,c=o,l=!0,d}function f(){return h(Zo,Jo,Lo)}function b(){var t=n.indexOf(u);return t>=0&&n.splice(t,1),(t=r.indexOf(p))>=0&&r.splice(t,1),d}return n.push(u),r.push(p),p(0,0),f()}function f(){return i}function b(){return o}function m(e){var n=[],r=0,s=l(e||[]);for(r=0;r<i;r++)t.zeroExceptMask(r,s)&&n.push(o[r]);return n}function g(t){if("function"==typeof t)return a.push(t),function(){a.splice(a.indexOf(t),1)};console.warn("onChange callback parameter must be a function!")}function v(t){for(var e=0;e<a.length;e++)a[e](t)}return t=new To.bitarray(0),arguments.length?c(arguments[0]):e}function ri(t,e){return(e<257?To.array8:e<65537?To.array16:To.array32)(t)}function si(t){for(var e=ri(t,t),o=-1;++o<t;)e[o]=o;return e}function ai(t){return 8===t?256:16===t?65536:4294967296}var ci=o("M9IT");const di=["paginatorPedido"];function li(t,e){if(1&t&&(d.Sb(0,"tr"),d.Sb(1,"td",35),d.Dc(2),d.Rb(),d.Sb(3,"td"),d.Dc(4),d.ec(5,"number"),d.Rb(),d.Rb()),2&t){const t=e.$implicit;d.Ab(2),d.Ec(t.value.descripcion),d.Ab(2),d.Ec(d.gc(5,2,t.value.count,"2."))}}function pi(t,e){if(1&t&&(d.Sb(0,"tr"),d.Sb(1,"td",35),d.Dc(2),d.ec(3,"number"),d.Rb(),d.Sb(4,"td",36),d.Dc(5),d.ec(6,"number"),d.Rb(),d.Rb()),2&t){const t=e.$implicit;d.Ab(2),d.Gc("",t.value.descripcion," (",d.gc(3,3,t.value.count,"2."),") "),d.Ab(3),d.Ec(d.gc(6,6,t.value.importe,".2"))}}function ui(t,e){1&t&&(d.Sb(0,"th",37),d.Dc(1,"Repartidor"),d.Rb())}function hi(t,e){if(1&t&&(d.Sb(0,"td",38),d.Sb(1,"p",39),d.Dc(2),d.ec(3,"titlecase"),d.Rb(),d.Sb(4,"p",8),d.Sb(5,"span",40),d.Dc(6,"Telefono: "),d.Rb(),d.Dc(7),d.Rb(),d.Sb(8,"p",8),d.Sb(9,"span",40),d.Dc(10,"Calificacion: "),d.Rb(),d.Dc(11),d.Rb(),d.Rb()),2&t){const t=e.$implicit;d.Ab(2),d.Fc(" ",d.fc(3,3,t.value.nom_repartidor),""),d.Ab(5),d.Fc("",t.value.telefono," "),d.Ab(4),d.Fc("",t.value.calificacion," ")}}function fi(t,e){1&t&&(d.Sb(0,"th",37),d.Dc(1,"N\xb0 Pedidos"),d.Rb())}function bi(t,e){if(1&t&&(d.Sb(0,"td",38),d.Dc(1),d.ec(2,"number"),d.Rb()),2&t){const t=e.$implicit;d.Ab(1),d.Fc(" ",d.gc(2,1,t.value.count,"2.")," ")}}function mi(t,e){1&t&&(d.Sb(0,"th",37),d.Dc(1,"Imp. Total"),d.Rb())}function gi(t,e){if(1&t&&(d.Sb(0,"td",38),d.Dc(1),d.ec(2,"number"),d.Rb()),2&t){const t=e.$implicit;d.Ab(1),d.Fc(" ",d.gc(2,1,t.value.importe,".2")," ")}}function vi(t,e){1&t&&(d.Sb(0,"th",37),d.Dc(1,"Metodo Pago"),d.Rb())}const yi=function(t,e,o){return{"badge-primary":t,"badge-info":e,"badge-secondary":o}};function Si(t,e){if(1&t&&(d.Sb(0,"div",42),d.Sb(1,"p",8),d.Sb(2,"span",43),d.Dc(3),d.ec(4,"titlecase"),d.Rb(),d.Sb(5,"span",44),d.Dc(6),d.ec(7,"number"),d.Rb(),d.Rb(),d.Sb(8,"p",8),d.Sb(9,"span",39),d.Dc(10,"Importe: "),d.Rb(),d.Sb(11,"span",8),d.Dc(12),d.ec(13,"number"),d.Rb(),d.Rb(),d.Rb()),2&t){const t=e.$implicit;d.Ab(2),d.jc("ngClass",d.qc(12,yi,3===t.idtipo_pago,2===t.idtipo_pago,1===t.idtipo_pago)),d.Ab(1),d.Fc(" ",d.fc(4,4,t.descripcion)," : "),d.Ab(3),d.Ec(d.gc(7,6,t.num_pedidos,"2.")),d.Ab(6),d.Fc("",d.gc(13,9,t.importe,".2")," ")}}function Ci(t,e){if(1&t&&(d.Sb(0,"td",38),d.Bc(1,Si,14,16,"div",41),d.Rb()),2&t){const t=e.$implicit;d.Ab(1),d.jc("ngForOf",t.value.metodoPago)}}function Ri(t,e){1&t&&d.Nb(0,"tr",45)}function _i(t,e){1&t&&d.Nb(0,"tr",46)}function wi(t,e){1&t&&(d.Sb(0,"th",37),d.Dc(1,"Cliente"),d.Rb())}function Pi(t,e){if(1&t&&(d.Sb(0,"td",38),d.Sb(1,"p",39),d.Dc(2),d.ec(3,"titlecase"),d.Rb(),d.Sb(4,"p",8),d.Sb(5,"span",40),d.Dc(6,"Pedido: "),d.Rb(),d.Dc(7),d.Rb(),d.Rb()),2&t){const t=e.$implicit;d.Ab(2),d.Fc(" ",d.fc(3,2,t.nom_cliente),""),d.Ab(5),d.Fc(" #",t.idpedido," ")}}function ki(t,e){1&t&&(d.Sb(0,"th",37),d.Dc(1,"Tarjeta"),d.Rb())}function Di(t,e){if(1&t&&(d.Sb(0,"td",38),d.Dc(1),d.Rb()),2&t){const t=e.$implicit;d.Ab(1),d.Fc(" ",t.data_pago_pwa.brand," ")}}function xi(t,e){1&t&&(d.Sb(0,"th",51),d.Dc(1,"Imp. Total"),d.Rb())}function Ai(t,e){if(1&t&&(d.Sb(0,"td",52),d.Dc(1),d.ec(2,"number"),d.Rb()),2&t){const t=e.$implicit;d.Ab(1),d.Fc(" ",d.gc(2,1,t.importe,".2")," ")}}function Oi(t,e){1&t&&d.Nb(0,"tr",45)}function Ii(t,e){1&t&&d.Nb(0,"tr",46)}function Ei(t,e){if(1&t&&(d.Sb(0,"table",21),d.Qb(1,47),d.Bc(2,wi,2,0,"th",23),d.Bc(3,Pi,8,4,"td",24),d.Pb(),d.Qb(4,48),d.Bc(5,ki,2,0,"th",23),d.Bc(6,Di,2,1,"td",24),d.Pb(),d.Qb(7,26),d.Bc(8,xi,2,0,"th",49),d.Bc(9,Ai,3,4,"td",50),d.Pb(),d.Bc(10,Oi,1,0,"tr",28),d.Bc(11,Ii,1,0,"tr",29),d.Rb()),2&t){const t=d.dc();d.jc("dataSource",t.dataPedidoPagadoTarjeta),d.Ab(10),d.jc("matHeaderRowDef",t.displayedColumnsPagoTarjeta),d.Ab(1),d.jc("matRowDefColumns",t.displayedColumnsPagoTarjeta)}}function Ti(t,e){1&t&&(d.Sb(0,"th",37),d.Dc(1,"#"),d.Rb())}function Fi(t,e){if(1&t&&(d.Sb(0,"td",38),d.Dc(1),d.ec(2,"number"),d.Rb()),2&t){const t=e.$implicit;d.Ab(1),d.Fc(" ",d.gc(2,1,t.n,"2.")," ")}}function ji(t,e){1&t&&(d.Sb(0,"th",37),d.Dc(1,"Producto"),d.Rb())}function Bi(t,e){if(1&t&&(d.Sb(0,"td",38),d.Dc(1),d.Rb()),2&t){const t=e.$implicit;d.Ab(1),d.Fc(" ",t.des," ")}}function Mi(t,e){1&t&&(d.Sb(0,"th",37),d.Dc(1,"Seccion"),d.Rb())}function Ni(t,e){if(1&t&&(d.Sb(0,"td",38),d.Dc(1),d.Rb()),2&t){const t=e.$implicit;d.Ab(1),d.Fc(" ",t.seccion," ")}}function Li(t,e){1&t&&(d.Sb(0,"th",51),d.Dc(1,"Precio"),d.Rb())}function qi(t,e){if(1&t&&(d.Sb(0,"td",52),d.Dc(1),d.ec(2,"number"),d.Rb()),2&t){const t=e.$implicit;d.Ab(1),d.Fc(" ",d.gc(2,1,t.precio_unitario,".2")," ")}}function zi(t,e){1&t&&(d.Sb(0,"th",51),d.Dc(1,"Cantidad"),d.Rb())}function Ui(t,e){if(1&t&&(d.Sb(0,"td",52),d.Sb(1,"span",39),d.Dc(2),d.ec(3,"number"),d.Rb(),d.Rb()),2&t){const t=e.$implicit;d.Ab(2),d.Ec(d.gc(3,1,t.cantidad_seleccionada,"2."))}}function $i(t,e){1&t&&(d.Sb(0,"th",51),d.Dc(1,"Imp. Total"),d.Rb())}function Wi(t,e){if(1&t&&(d.Sb(0,"td",52),d.Sb(1,"span",39),d.Dc(2),d.ec(3,"number"),d.Rb(),d.Rb()),2&t){const t=e.$implicit;d.Ab(2),d.Ec(d.gc(3,1,t.precio_total,".2"))}}function Hi(t,e){1&t&&d.Nb(0,"tr",45)}function Qi(t,e){1&t&&d.Nb(0,"tr",46)}function Gi(t,e){if(1&t&&(d.Sb(0,"table",21),d.Qb(1,53),d.Bc(2,Ti,2,0,"th",23),d.Bc(3,Fi,3,4,"td",24),d.Pb(),d.Qb(4,54),d.Bc(5,ji,2,0,"th",23),d.Bc(6,Bi,2,1,"td",24),d.Pb(),d.Qb(7,55),d.Bc(8,Mi,2,0,"th",23),d.Bc(9,Ni,2,1,"td",24),d.Pb(),d.Qb(10,56),d.Bc(11,Li,2,0,"th",49),d.Bc(12,qi,3,4,"td",50),d.Pb(),d.Qb(13,57),d.Bc(14,zi,2,0,"th",49),d.Bc(15,Ui,4,4,"td",50),d.Pb(),d.Qb(16,26),d.Bc(17,$i,2,0,"th",49),d.Bc(18,Wi,4,4,"td",50),d.Pb(),d.Bc(19,Hi,1,0,"tr",28),d.Bc(20,Qi,1,0,"tr",29),d.Rb()),2&t){const t=d.dc();d.jc("dataSource",t.dataResumenAll),d.Ab(19),d.jc("matHeaderRowDef",t.displayedColumnsTopProducto),d.Ab(1),d.jc("matRowDefColumns",t.displayedColumnsTopProducto)}}function Vi(t,e){1&t&&(d.Sb(0,"th",37),d.Dc(1,"#"),d.Rb())}function Xi(t,e){if(1&t&&(d.Sb(0,"td",38),d.Dc(1),d.ec(2,"number"),d.Rb()),2&t){const t=e.$implicit;d.Ab(1),d.Fc(" ",d.gc(2,1,t.n,"2.")," ")}}function Zi(t,e){1&t&&(d.Sb(0,"th",37),d.Dc(1,"Producto"),d.Rb())}function Ji(t,e){if(1&t&&(d.Sb(0,"td",38),d.Sb(1,"p",39),d.Dc(2),d.Rb(),d.Sb(3,"p",60),d.Dc(4),d.Rb(),d.Sb(5,"p",60),d.Dc(6),d.Rb(),d.Rb()),2&t){const t=e.$implicit;d.Ab(2),d.Fc(" #",t.idpedido,""),d.Ab(2),d.Fc(" ",t.fecha," "),d.Ab(2),d.Fc(" ",t.hora,"")}}function Yi(t,e){1&t&&(d.Sb(0,"th",37),d.Dc(1,"Cliente"),d.Rb())}function Ki(t,e){if(1&t&&(d.Sb(0,"td",38),d.Sb(1,"p"),d.Dc(2),d.ec(3,"titlecase"),d.Rb(),d.Sb(4,"p",60),d.Dc(5),d.Rb(),d.Sb(6,"p",60),d.Dc(7),d.Rb(),d.Rb()),2&t){const t=e.$implicit;d.Ab(2),d.Fc(" ",d.fc(3,3,t.referencia),""),d.Ab(3),d.Fc(" ",t.json_datos_delivery.p_header.arrDatosDelivery.direccion,""),d.Ab(2),d.Fc(" ",t.json_datos_delivery.p_header.arrDatosDelivery.telefono,"")}}function tn(t,e){1&t&&(d.Sb(0,"th",51),d.Dc(1,"Repartidor"),d.Rb())}function en(t,e){1&t&&(d.Qb(0),d.Dc(1," Cliente Recoge "),d.Pb())}function on(t,e){if(1&t&&(d.Dc(0),d.ec(1,"titlecase")),2&t){const t=d.dc().$implicit;d.Fc(" ",d.fc(1,1,t.nom_repartidor)," ")}}function nn(t,e){if(1&t&&(d.Sb(0,"td",38),d.Bc(1,en,2,0,"ng-container",61),d.Bc(2,on,2,3,"ng-template",null,62,d.Cc),d.Rb()),2&t){const t=e.$implicit,o=d.tc(3);d.Ab(1),d.jc("ngIf",t.json_datos_delivery.p_header.arrDatosDelivery.pasoRecoger)("ngIfElse",o)}}function rn(t,e){1&t&&(d.Sb(0,"th",51),d.Dc(1,"Metodo Pago"),d.Rb())}function sn(t,e){if(1&t&&(d.Sb(0,"td",38),d.Sb(1,"span",43),d.Dc(2),d.ec(3,"titlecase"),d.Rb(),d.Rb()),2&t){const t=e.$implicit;d.Ab(1),d.jc("ngClass",d.qc(4,yi,3===t.json_datos_delivery.p_header.arrDatosDelivery.metodoPago.idtipo_pago,2===t.json_datos_delivery.p_header.arrDatosDelivery.metodoPago.idtipo_pago,1===t.json_datos_delivery.p_header.arrDatosDelivery.metodoPago.idtipo_pago)),d.Ab(1),d.Fc(" ",d.fc(3,2,t.json_datos_delivery.p_header.arrDatosDelivery.metodoPago.descripcion)," : ")}}function an(t,e){1&t&&(d.Sb(0,"th",51),d.Dc(1,"Imp. Total"),d.Rb())}function cn(t,e){if(1&t&&(d.Sb(0,"td",52),d.Sb(1,"span",39),d.Dc(2),d.ec(3,"number"),d.Rb(),d.Rb()),2&t){const t=e.$implicit;d.Ab(2),d.Ec(d.gc(3,1,t.total_r,".2"))}}function dn(t,e){1&t&&d.Nb(0,"tr",45)}function ln(t,e){1&t&&d.Nb(0,"tr",46)}function pn(t,e){if(1&t&&(d.Sb(0,"table",21),d.Qb(1,53),d.Bc(2,Vi,2,0,"th",23),d.Bc(3,Xi,3,4,"td",24),d.Pb(),d.Qb(4,58),d.Bc(5,Zi,2,0,"th",23),d.Bc(6,Ji,7,3,"td",24),d.Pb(),d.Qb(7,47),d.Bc(8,Yi,2,0,"th",23),d.Bc(9,Ki,8,5,"td",24),d.Pb(),d.Qb(10,22),d.Bc(11,tn,2,0,"th",49),d.Bc(12,nn,4,2,"td",24),d.Pb(),d.Qb(13,59),d.Bc(14,rn,2,0,"th",49),d.Bc(15,sn,4,8,"td",24),d.Pb(),d.Qb(16,26),d.Bc(17,an,2,0,"th",49),d.Bc(18,cn,4,4,"td",50),d.Pb(),d.Bc(19,dn,1,0,"tr",28),d.Bc(20,ln,1,0,"tr",29),d.Rb()),2&t){const t=d.dc();d.jc("dataSource",t.dataPedidosAll),d.Ab(19),d.jc("matHeaderRowDef",t.displayedColumnsAllPedidos),d.Ab(1),d.jc("matRowDefColumns",t.displayedColumnsAllPedidos)}}const un=function(){return[5,10,20]};let hn=(()=>{class t{constructor(t){this.comercioService=t,this.dataResumenAll=new he.k(this.listResumenAll),this.dataPedidosAll=new he.k,this.dataPedidoPagadoTarjeta=[],this.displayedColumnsReparidores=["repartidor","num_pedidos","importe","metodo"],this.displayedColumnsPagoTarjeta=["cliente","tarjeta","importe"],this.displayedColumnsTopProducto=["n","producto","seccion","precio","cantidad","importe"],this.displayedColumnsAllPedidos=["n","pedido","cliente","repartidor","metodo_pago","importe"]}ngOnInit(){this.loadData(),this.dataResumenAll.paginator=this.paginator}loadData(){this.comercioService.loadDataCierreCaja().subscribe(t=>{console.log(t),this.dataCierre=t.map((t,e)=>(t.json_datos_delivery=JSON.parse(t.json_datos_delivery),t.n=e+1,t)),this.numTotalPedidos=this.dataCierre.length,this.dataPedidosAll.data=this.dataCierre,this.dataPedidosAll.paginator=this.paginatorPedido,this.dataFilter=ii(this.dataCierre),this.peditosXEstado(),this.pedidoXTipoPago(),this.pedidoXRepartidor(),this.topProductos(),this.tiempoAtencion()})}tiempoAtencion(){const t=this.dataFilter.dimension(t=>parseFloat(t.tiempo_atencion)).group().all();this.timepoPromedioEntrega=t.map(t=>t.key).reduce((t,e)=>t+e,0),this.timepoPromedioEntrega=Math.round(this.timepoPromedioEntrega/t.length),t.sort((t,e)=>t.key-e.key),this.tiempoMinEntrega=t[0].key,this.tiempoMaxEntrega=t[t.length-1].key,console.log("tiempoAtencion",t)}topProductos(){this.listResumenAll=[],this.dataCierre.map(t=>{t.json_datos_delivery.p_body.tipoconsumo.map(t=>{t.secciones.map(t=>{t.items.map(t=>{let e=this.listResumenAll.filter(e=>e.iditem===t.iditem)[0];e?(e.cantidad_seleccionada+=t.cantidad_seleccionada,e.precio_total+=t.precio_total):(e=JSON.parse(JSON.stringify(t)),this.listResumenAll.push(e))})})})}),this.listResumenAll=this.listResumenAll.sort((t,e)=>e.cantidad_seleccionada-t.cantidad_seleccionada).map((t,e)=>(t.n=e+1,t)),console.log("listResumenAll",this.listResumenAll),this.dataResumenAll.data=this.listResumenAll,this.dataResumenAll.paginator=this.paginator}pedidoXRepartidor(){const t=this.dataFilter.dimension(t=>t.idrepartidor);this.listPedidoXRepartidor=t.group().reduce((t,e,o)=>{if(e.idrepartidor){t.count+=1,t.nom_repartidor=e.nom_repartidor+" "+e.ap_repartidor,t.calificacion=e.calificacion,t.telefono=e.telefono_repartidor;const o="0"===e.total?parseFloat(e.total_r):parseFloat(e.total);return this.arrMetodosPagoReparidor(e.json_datos_delivery.p_header.arrDatosDelivery.metodoPago,t.metodoPago,o),t.importe+=o,t}},(t,e,o)=>{if(e.idrepartidor){t.count-=1,t.nom_repartidor=e.nom_repartidor+" "+e.ap_repartidor,t.calificacion=e.calificacion,t.telefono=e.telefono_repartidor;const o="0"===e.total?parseFloat(e.total_r):parseFloat(e.total);return this.arrMetodosPagoReparidor(e.json_datos_delivery.p_header.arrDatosDelivery.metodoPago,t.metodoPago,o),t.importe+=o,t}},()=>({count:0,nom_repartidor:"",telefono:"",importe:0,calificacion:0,metodoPago:[]})).all(),this.listPedidoXRepartidor=this.listPedidoXRepartidor.filter(t=>t.value),console.log("listPedidoXRepartidor",this.listPedidoXRepartidor)}arrMetodosPagoReparidor(t,e,o){const i=e.filter(e=>e.idtipo_pago===t.idtipo_pago)[0];i?(i.num_pedidos+=1,i.importe+=o):(t.num_pedidos=1,t.importe=o,e.push(t))}pedidoXTipoPago(){let t;this.dataPedidoPagadoTarjeta=[],this.importeTotalEnCaja=0;try{t=this.dataFilter.dimension(t=>null==t?void 0:t.metodoPagoRegistro[0].idtipo_pago)}catch(e){return}this.dataPedidoXTipoPago=t.group().reduce((t,e,o)=>{if(e.metodoPagoRegistro)return t.count+=1,t.importe+=parseFloat(e.metodoPagoRegistro[0].importe),this.importeTotalEnCaja+=parseFloat(e.metodoPagoRegistro[0].importe),t.descripcion=e.metodoPagoRegistro[0].descripcion,4===e.metodoPagoRegistro[0].idtipo_pago&&(e.metodoPagoRegistro[0].nom_cliente=e.json_datos_delivery.p_header.arrDatosDelivery.nombre,e.metodoPagoRegistro[0].idpedido=e.idpedido,this.dataPedidoPagadoTarjeta.push(e.metodoPagoRegistro[0])),t},(t,e,o)=>{if(e.metodoPagoRegistro)return t.count-=1,t.importe-=parseFloat(e.metodoPagoRegistro[0].importe),this.importeTotalEnCaja-=parseFloat(e.metodoPagoRegistro[0].importe),t.descripcion=e.metodoPagoRegistro[0].descripcion,t},()=>({count:0,descripcion:"",importe:0})).all(),this.dataPedidoXTipoPago=this.dataPedidoXTipoPago.filter(t=>t.value),console.log("ddPedidoXTipoPago",this.dataPedidoXTipoPago),console.log("dataPedidoPagadoTarjeta",this.dataPedidoPagadoTarjeta)}peditosXEstado(){const t=this.dataFilter.dimension(t=>t.pwa_estado);this.pedidosXEstado=t.group().reduce((t,e,o)=>{switch(t.count+=1,e.pwa_estado){case"P":t.descripcion="PENDIENTE";break;case"A":t.descripcion="ACEPTADO";break;case"D":t.descripcion="LISTO";break;case"R":t.descripcion="CON EL REPARTIDOR";break;case"E":t.descripcion="ENTREGADO"}return t},(t,e,o)=>{switch(t.count-=1,e.pwa_estado){case"P":t.descripcion="PENDIENTE";break;case"A":t.descripcion="ACEPTADO";break;case"D":t.descripcion="LISTO";break;case"R":t.descripcion="CON EL REPARTIDOR";break;case"E":t.descripcion="ENTREGADO"}return t},()=>({count:0,descripcion:""})).all(),console.log("pedidosXEstado",this.pedidosXEstado)}}return t.\u0275fac=function(e){return new(e||t)(d.Mb(f))},t.\u0275cmp=d.Gb({type:t,selectors:[["app-cuadre-caja"]],viewQuery:function(t,e){var o;1&t&&(d.zc(ci.a,!0),d.zc(di,!0)),2&t&&(d.sc(o=d.ac())&&(e.paginator=o.first),d.sc(o=d.ac())&&(e.paginatorPedido=o.first))},decls:93,vars:31,consts:[[1,"animated","fadeIn","page-body"],[1,"p-3","border-bottom","row"],[1,"col-md-6"],[1,"fw-100","fs-18","m-1"],[1,"col-md-6","text-right"],["mat-stroked-button","","color","primary"],[1,"row","p-3","m-0"],[1,"col-md-4","text-center","card-pedido"],[1,"text-secondary"],[1,"text-center","border-top","p-2","mt-2"],[1,"w-100","fs-12"],[4,"ngFor","ngForOf"],[1,"fs-12"],[1,"d-flex","justify-content-between"],[1,"text-center"],[1,"text-success","m-0"],[1,"fs-12","m-0"],[1,"text-danger","m-0"],[1,"row","m-0","p-3"],[1,"col-md-6","card-pedido"],[1,"fw-600","fs-15"],["mat-table","",1,"table-model-1","w-100",3,"dataSource"],["matColumnDef","repartidor"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","num_pedidos"],["matColumnDef","importe"],["matColumnDef","metodo"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","table-model-1 w-100","mat-table","",3,"dataSource",4,"ngIf"],[1,"col-12","card-pedido"],[1,"fw-600","fs-18"],["showFirstLastButtons","",3,"pageSizeOptions","hidePageSize"],["paginatorPedido",""],["align","left"],["align","right"],["mat-header-cell",""],["mat-cell",""],[1,"fw-600"],[1,"fw-100"],["class","mb-1",4,"ngFor","ngForOf"],[1,"mb-1"],[1,"fw-600","badge",3,"ngClass"],[1,"text-secondary","pl-1"],["mat-header-row",""],["mat-row",""],["matColumnDef","cliente"],["matColumnDef","tarjeta"],["mat-header-cell","","class","text-right",4,"matHeaderCellDef"],["mat-cell","","align","right",4,"matCellDef"],["mat-header-cell","",1,"text-right"],["mat-cell","","align","right"],["matColumnDef","n"],["matColumnDef","producto"],["matColumnDef","seccion"],["matColumnDef","precio"],["matColumnDef","cantidad"],["matColumnDef","pedido"],["matColumnDef","metodo_pago"],[1,"fw-100","text-secondary"],[4,"ngIf","ngIfElse"],["elseTemplate",""]],template:function(t,e){1&t&&(d.Sb(0,"div",0),d.Sb(1,"div",1),d.Sb(2,"div",2),d.Sb(3,"p",3),d.Dc(4,"Resumen del dia"),d.Rb(),d.Rb(),d.Sb(5,"div",4),d.Sb(6,"button",5),d.Dc(7,"Cerrar turno."),d.Rb(),d.Rb(),d.Rb(),d.Sb(8,"div",6),d.Sb(9,"div",7),d.Sb(10,"h3",8),d.Dc(11),d.Rb(),d.Sb(12,"span"),d.Dc(13,"Pedidos"),d.Rb(),d.Sb(14,"div",9),d.Sb(15,"table",10),d.Sb(16,"tbody"),d.Bc(17,li,6,5,"tr",11),d.Rb(),d.Rb(),d.Rb(),d.Rb(),d.Sb(18,"div",7),d.Sb(19,"h3",8),d.Dc(20),d.ec(21,"number"),d.Rb(),d.Sb(22,"span"),d.Dc(23,"Registro en Caja"),d.Rb(),d.Sb(24,"div",9),d.Sb(25,"table",10),d.Sb(26,"tbody"),d.Bc(27,pi,7,9,"tr",11),d.Rb(),d.Rb(),d.Rb(),d.Rb(),d.Sb(28,"div",7),d.Sb(29,"h3",8),d.Dc(30),d.ec(31,"number"),d.Sb(32,"span",12),d.Dc(33,"min"),d.Rb(),d.Rb(),d.Sb(34,"span"),d.Dc(35,"Tiempo promedio de entrega"),d.Rb(),d.Sb(36,"div",9),d.Sb(37,"div",13),d.Sb(38,"div",14),d.Sb(39,"p",15),d.Dc(40),d.ec(41,"number"),d.Rb(),d.Sb(42,"p",16),d.Dc(43," Tiempo Minimo"),d.Rb(),d.Rb(),d.Sb(44,"div",14),d.Sb(45,"p",17),d.Dc(46),d.ec(47,"number"),d.Rb(),d.Sb(48,"p",16),d.Dc(49," Tiempo Maximo"),d.Rb(),d.Rb(),d.Rb(),d.Rb(),d.Rb(),d.Rb(),d.Nb(50,"hr"),d.Sb(51,"div",18),d.Sb(52,"div",19),d.Sb(53,"div"),d.Sb(54,"span",20),d.Dc(55,"Pedidos por repartidor."),d.Rb(),d.Rb(),d.Sb(56,"table",21),d.Qb(57,22),d.Bc(58,ui,2,0,"th",23),d.Bc(59,hi,12,5,"td",24),d.Pb(),d.Qb(60,25),d.Bc(61,fi,2,0,"th",23),d.Bc(62,bi,3,4,"td",24),d.Pb(),d.Qb(63,26),d.Bc(64,mi,2,0,"th",23),d.Bc(65,gi,3,4,"td",24),d.Pb(),d.Qb(66,27),d.Bc(67,vi,2,0,"th",23),d.Bc(68,Ci,2,1,"td",24),d.Pb(),d.Bc(69,Ri,1,0,"tr",28),d.Bc(70,_i,1,0,"tr",29),d.Rb(),d.Rb(),d.Sb(71,"div",19),d.Sb(72,"div"),d.Sb(73,"span",20),d.Dc(74,"Pago con tarjeta desde la aplicaci\xf3n."),d.Rb(),d.Rb(),d.Bc(75,Ei,12,3,"table",30),d.Rb(),d.Rb(),d.Nb(76,"hr"),d.Sb(77,"div",18),d.Sb(78,"div",31),d.Sb(79,"div"),d.Sb(80,"span",32),d.Dc(81,"Top de productos."),d.Rb(),d.Rb(),d.Bc(82,Gi,21,3,"table",30),d.Nb(83,"mat-paginator",33),d.Rb(),d.Rb(),d.Nb(84,"hr"),d.Sb(85,"div",18),d.Sb(86,"div",31),d.Sb(87,"div"),d.Sb(88,"span",32),d.Dc(89,"Todos los pedidos."),d.Rb(),d.Rb(),d.Bc(90,pn,21,3,"table",30),d.Nb(91,"mat-paginator",33,34),d.Rb(),d.Rb(),d.Rb()),2&t&&(d.Ab(11),d.Ec(e.numTotalPedidos),d.Ab(6),d.jc("ngForOf",e.pedidosXEstado),d.Ab(3),d.Ec(d.gc(21,17,e.importeTotalEnCaja,".2")),d.Ab(7),d.jc("ngForOf",e.dataPedidoXTipoPago),d.Ab(3),d.Fc("",d.gc(31,20,e.timepoPromedioEntrega,"2.0")," "),d.Ab(10),d.Ec(d.gc(41,23,e.tiempoMinEntrega,"2.")),d.Ab(6),d.Ec(d.gc(47,26,e.tiempoMaxEntrega,"2.")),d.Ab(10),d.jc("dataSource",e.listPedidoXRepartidor),d.Ab(13),d.jc("matHeaderRowDef",e.displayedColumnsReparidores),d.Ab(1),d.jc("matRowDefColumns",e.displayedColumnsReparidores),d.Ab(5),d.jc("ngIf",e.dataPedidoPagadoTarjeta),d.Ab(7),d.jc("ngIf",e.listResumenAll),d.Ab(1),d.jc("pageSizeOptions",d.nc(29,un))("hidePageSize",!0),d.Ab(7),d.jc("ngIf",e.listResumenAll),d.Ab(1),d.jc("pageSizeOptions",d.nc(30,un))("hidePageSize",!0))},directives:[b.a,i.l,he.j,he.c,he.e,he.b,he.g,he.i,i.m,ci.a,he.d,he.a,i.k,he.f,he.h],pipes:[i.e,i.u],styles:[".page-body[_ngcontent-%COMP%]{background:#eee}.card-pedido[_ngcontent-%COMP%]{border-radius:15px;padding:15px;background-color:#fff;border:8px solid #eee}.card-pedido-head[_ngcontent-%COMP%]{-webkit-align-items:center;align-items:center;margin-bottom:3px}.card-pedido-body[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}"]}),t})(),fn=(()=>{class t{constructor(t,e){this.dialogRef=e,this.repartidor=t.repartidor||{},this.sufijo=t.sufijo,t.repartidor&&(this.repartidor.usuario=this.repartidor.usuario.replace(this.sufijo,""))}ngOnInit(){}cerrarDlg(){this.repartidor.usuario=this.sufijo+this.repartidor.usuario,this.dialogRef.close(this.repartidor)}}return t.\u0275fac=function(e){return new(e||t)(d.Mb(r.a),d.Mb(r.g))},t.\u0275cmp=d.Gb({type:t,selectors:[["app-dialog-add-repartidor"]],decls:24,vars:9,consts:[["form","ngForm"],[1,"w-50"],["matInput","","placeholder","Nombre","type","text","name","nombre","required","",3,"ngModel","ngModelChange"],["matInput","","placeholder","Apellido","type","text","name","apellido","required","",3,"ngModel","ngModelChange"],["matInput","","placeholder","DNI","type","number","name","dni","required","",3,"ngModel","ngModelChange"],["matInput","","placeholder","Telefono","type","number","name","telefono","required","",3,"ngModel","ngModelChange"],["matPrefix",""],["matInput","","placeholder","Usuario","type","text","name","usuario","required","",3,"ngModel","ngModelChange"],["matInput","","placeholder","Clave","type","password","name","pass","required","",3,"ngModel","ngModelChange"],["mat-flat-button","","color","primary",3,"disabled","click"],["mat-flat-button","","color","accent",1,"ml-3",3,"mat-dialog-close"]],template:function(t,e){if(1&t&&(d.Sb(0,"form",null,0),d.Sb(2,"h6"),d.Dc(3,"Repartidor"),d.Rb(),d.Nb(4,"hr"),d.Sb(5,"mat-form-field",1),d.Sb(6,"input",2),d.Zb("ngModelChange",(function(t){return e.repartidor.nombre=t})),d.Rb(),d.Rb(),d.Sb(7,"mat-form-field",1),d.Sb(8,"input",3),d.Zb("ngModelChange",(function(t){return e.repartidor.apellido=t})),d.Rb(),d.Rb(),d.Sb(9,"mat-form-field",1),d.Sb(10,"input",4),d.Zb("ngModelChange",(function(t){return e.repartidor.dni=t})),d.Rb(),d.Rb(),d.Sb(11,"mat-form-field",1),d.Sb(12,"input",5),d.Zb("ngModelChange",(function(t){return e.repartidor.telefono=t})),d.Rb(),d.Rb(),d.Sb(13,"mat-form-field",1),d.Sb(14,"span",6),d.Dc(15),d.Rb(),d.Sb(16,"input",7),d.Zb("ngModelChange",(function(t){return e.repartidor.usuario=t})),d.Rb(),d.Rb(),d.Sb(17,"mat-form-field",1),d.Sb(18,"input",8),d.Zb("ngModelChange",(function(t){return e.repartidor.pass=t})),d.Rb(),d.Rb(),d.Nb(19,"hr"),d.Sb(20,"button",9),d.Zb("click",(function(){return e.cerrarDlg()})),d.Dc(21,"Guardar"),d.Rb(),d.Sb(22,"button",10),d.Dc(23,"Cerrar"),d.Rb(),d.Rb()),2&t){const t=d.tc(1);d.Ab(6),d.jc("ngModel",e.repartidor.nombre),d.Ab(2),d.jc("ngModel",e.repartidor.apellido),d.Ab(2),d.jc("ngModel",e.repartidor.dni),d.Ab(2),d.jc("ngModel",e.repartidor.telefono),d.Ab(3),d.Fc("",e.sufijo," \xa0"),d.Ab(1),d.jc("ngModel",e.repartidor.usuario),d.Ab(2),d.jc("ngModel",e.repartidor.pass),d.Ab(2),d.jc("disabled",!t.valid),d.Ab(2),d.jc("mat-dialog-close",!1)}},directives:[ct.s,ct.l,ct.m,rt.b,at.a,ct.b,ct.q,ct.k,ct.n,ct.o,rt.f,b.a,r.d],styles:[""]}),t})();function bn(t,e){1&t&&(d.Sb(0,"th",23),d.Dc(1,"#"),d.Rb())}function mn(t,e){if(1&t&&(d.Sb(0,"td",24),d.Dc(1),d.ec(2,"number"),d.Rb()),2&t){const t=e.index;d.Ab(1),d.Fc(" ",d.gc(2,1,t+1,"2.")," ")}}function gn(t,e){1&t&&(d.Sb(0,"th",23),d.Dc(1,"Nombres"),d.Rb())}function vn(t,e){if(1&t&&(d.Sb(0,"td",24),d.Dc(1),d.Rb()),2&t){const t=e.$implicit;d.Ab(1),d.Gc(" ",t.nombre," ",t.apellido," ")}}function yn(t,e){1&t&&(d.Sb(0,"th",23),d.Dc(1,"DNI"),d.Rb())}function Sn(t,e){if(1&t&&(d.Sb(0,"td",24),d.Dc(1),d.Rb()),2&t){const t=e.$implicit;d.Ab(1),d.Fc(" ",t.dni," ")}}function Cn(t,e){1&t&&(d.Sb(0,"th",23),d.Dc(1,"Telefono"),d.Rb())}function Rn(t,e){if(1&t&&(d.Sb(0,"td",24),d.Dc(1),d.Rb()),2&t){const t=e.$implicit;d.Ab(1),d.Fc(" ",t.telefono," ")}}function _n(t,e){1&t&&(d.Sb(0,"th",23),d.Dc(1,"ciudad"),d.Rb())}function wn(t,e){if(1&t&&(d.Sb(0,"td",24),d.Dc(1),d.Rb()),2&t){const t=e.$implicit;d.Ab(1),d.Fc(" ",t.ciudad," ")}}function Pn(t,e){1&t&&(d.Sb(0,"th",23),d.Dc(1,"F. Registro"),d.Rb())}function kn(t,e){if(1&t&&(d.Sb(0,"td",24),d.Dc(1),d.Rb()),2&t){const t=e.$implicit;d.Ab(1),d.Fc(" ",t.f_registro," ")}}function Dn(t,e){1&t&&(d.Sb(0,"th",23),d.Dc(1,"Usuario"),d.Rb())}function xn(t,e){if(1&t&&(d.Sb(0,"td",24),d.Dc(1),d.Rb()),2&t){const t=e.$implicit;d.Ab(1),d.Fc(" ",t.usuario," ")}}function An(t,e){1&t&&d.Nb(0,"th",23)}function On(t,e){if(1&t){const t=d.Tb();d.Sb(0,"td",25),d.Sb(1,"i",26),d.Zb("click",(function(){d.vc(t);const o=e.$implicit;return d.dc(2).openDialogRepartidor(o)})),d.Rb(),d.Sb(2,"i",27),d.Zb("click",(function(){d.vc(t);const o=e.$implicit;return d.dc(2).borrarRepartidor(o)})),d.Rb(),d.Rb()}}function In(t,e){1&t&&d.Nb(0,"tr",28)}function En(t,e){1&t&&d.Nb(0,"tr",29)}function Tn(t,e){if(1&t&&(d.Sb(0,"table",9),d.Qb(1,10),d.Bc(2,bn,2,0,"th",11),d.Bc(3,mn,3,4,"td",12),d.Pb(),d.Qb(4,13),d.Bc(5,gn,2,0,"th",11),d.Bc(6,vn,2,2,"td",12),d.Pb(),d.Qb(7,14),d.Bc(8,yn,2,0,"th",11),d.Bc(9,Sn,2,1,"td",12),d.Pb(),d.Qb(10,15),d.Bc(11,Cn,2,0,"th",11),d.Bc(12,Rn,2,1,"td",12),d.Pb(),d.Qb(13,16),d.Bc(14,_n,2,0,"th",11),d.Bc(15,wn,2,1,"td",12),d.Pb(),d.Qb(16,17),d.Bc(17,Pn,2,0,"th",11),d.Bc(18,kn,2,1,"td",12),d.Pb(),d.Qb(19,18),d.Bc(20,Dn,2,0,"th",11),d.Bc(21,xn,2,1,"td",12),d.Pb(),d.Qb(22,19),d.Bc(23,An,1,0,"th",11),d.Bc(24,On,3,0,"td",20),d.Pb(),d.Bc(25,In,1,0,"tr",21),d.Bc(26,En,1,0,"tr",22),d.Rb()),2&t){const t=d.dc();d.jc("dataSource",t.listRepartidores),d.Ab(25),d.jc("matHeaderRowDef",t.displayedColumnsReparidores),d.Ab(1),d.jc("matRowDefColumns",t.displayedColumnsReparidores)}}const Fn=[{path:"",component:T,data:{titulo:"Inicio"},children:[{path:"",redirectTo:"ordenes/lista"},{path:"ordenes/:id",component:Co,data:{titulo:"Ordenes"}},{path:"seguimiento",component:Ro,data:{titulo:"Seguimiento"}},{path:"dashboard",component:_o,data:{titulo:"Dashboard"}},{path:"resumen-dia",component:hn,data:{titulo:"Resumen del Dia"}},{path:"repartidores",component:(()=>{class t{constructor(t,e,o,i){this.crudService=t,this.dialog=e,this.comercioService=o,this.infoTokenService=i,this.listRepartidores=new he.k,this.displayedColumnsReparidores=["n","nombre","dni","telefono","ciudad","f_registro","usuario","op"]}ngOnInit(){this.infoTokenService.getInfoUs(),this.loadRepartidores(),console.log("comercioService",this.comercioService.getSedeInfo())}loadRepartidores(){this.crudService.getAll("comercio","get-mis-repartidores",!1,!1,!0).subscribe(t=>{console.log(t),this.listRepartidores.data=t.data})}openDialogRepartidor(t=null){const e=new r.e;e.disableClose=!0,e.hasBackdrop=!0,e.width="400px",e.panelClass=["my-dialog-orden-detalle","my-dialog-scrool"],e.data={repartidor:t,ciudad:this.comercioService.sedeInfo.ciudad,sufijo:this.comercioService.sedeInfo.sufijo},this.dialog.open(fn,e).afterClosed().subscribe(t=>{t&&!1!==t&&(t.idsede=this.infoTokenService.infoUsToken.usuario.idsede,this.crudService.postFree({repartidor:t},"comercio","set-registrar-repartidor",!0).subscribe(e=>{t.idrepartidor||this.loadRepartidores()}))})}borrarRepartidor(t){const e=new r.e;e.disableClose=!0,e.hasBackdrop=!0,e.data={idMjs:2},this.dialog.open(N,e).afterClosed().subscribe(e=>{e&&this.crudService.postFree({idrepartidor:t.idrepartidor},"comercio","borrar-mi-repartidor",!0).subscribe(t=>{this.loadRepartidores()})})}}return t.\u0275fac=function(e){return new(e||t)(d.Mb(s.a),d.Mb(r.b),d.Mb(f),d.Mb(a.a))},t.\u0275cmp=d.Gb({type:t,selectors:[["app-mis-repartidores"]],decls:14,vars:1,consts:[[1,"animated","fadeIn"],[1,"w-100","m-0","p-3"],[1,"card-pedido","w-100"],[1,"d-flex","justify-content-between","align-items-center"],[1,"fw-600","fs-18"],[1,"text-secondary","m-0","fs-13"],["mat-fab","","color","primary",3,"click"],[1,"fa","fa-plus"],["class","table-model-1 w-100","mat-table","",3,"dataSource",4,"ngIf"],["mat-table","",1,"table-model-1","w-100",3,"dataSource"],["matColumnDef","n"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","nombre"],["matColumnDef","dni"],["matColumnDef","telefono"],["matColumnDef","ciudad"],["matColumnDef","f_registro"],["matColumnDef","usuario"],["matColumnDef","op"],["mat-cell","","class","xCursor",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-cell","",1,"xCursor"],[1,"fa","fa-pencil","pr-3",3,"click"],[1,"fa","fa-times","text-danger",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(t,e){1&t&&(d.Sb(0,"div",0),d.Sb(1,"div",1),d.Sb(2,"div",2),d.Sb(3,"div",3),d.Sb(4,"div"),d.Sb(5,"span",4),d.Dc(6,"Mis Repartidores"),d.Rb(),d.Sb(7,"p",5),d.Dc(8,"Si tu comercio tiene repartidores propios, crea los usuarios aqui."),d.Rb(),d.Rb(),d.Sb(9,"div"),d.Sb(10,"button",6),d.Zb("click",(function(){return e.openDialogRepartidor()})),d.Nb(11,"i",7),d.Rb(),d.Rb(),d.Rb(),d.Nb(12,"hr"),d.Bc(13,Tn,27,3,"table",8),d.Rb(),d.Rb(),d.Rb()),2&t&&(d.Ab(13),d.jc("ngIf",e.listRepartidores))},directives:[b.a,i.m,he.j,he.c,he.e,he.b,he.g,he.i,he.d,he.a,he.f,he.h],pipes:[i.e],styles:[""]}),t})(),data:{titulo:"Repartidores"}}]}];let jn=(()=>{class t{}return t.\u0275mod=d.Kb({type:t}),t.\u0275inj=d.Jb({factory:function(e){return new(e||t)},imports:[[n.d.forChild(Fn)],n.d]}),t})();var Bn=o("pKmL"),Mn=o("lSLK"),Nn=o("rsRi");let Ln=(()=>{class t{}return t.\u0275mod=d.Kb({type:t}),t.\u0275inj=d.Jb({factory:function(e){return new(e||t)},imports:[[i.c,jn,Bn.a,Mn.a,Nn.a,Jt]]}),t})()},CIKq:function(t,e,o){var i,n,r=o("Gbct"),s=o("Wm4p"),a=o("TypT"),c=o("Yvos"),d=o("Aplp"),l=o("x7D4")("engine.io-client:websocket");if("undefined"!=typeof WebSocket?i=WebSocket:"undefined"!=typeof self&&(i=self.WebSocket||self.MozWebSocket),"undefined"==typeof window)try{n=o(4)}catch(h){}var p=i||n;function u(t){t&&t.forceBase64&&(this.supportsBinary=!1),this.perMessageDeflate=t.perMessageDeflate,this.usingBrowserWebSocket=i&&!t.forceNode,this.protocols=t.protocols,this.usingBrowserWebSocket||(p=n),r.call(this,t)}t.exports=u,c(u,r),u.prototype.name="websocket",u.prototype.supportsBinary=!0,u.prototype.doOpen=function(){if(this.check()){var t=this.uri(),e=this.protocols,o={};this.isReactNative||(o.agent=this.agent,o.perMessageDeflate=this.perMessageDeflate,o.pfx=this.pfx,o.key=this.key,o.passphrase=this.passphrase,o.cert=this.cert,o.ca=this.ca,o.ciphers=this.ciphers,o.rejectUnauthorized=this.rejectUnauthorized),this.extraHeaders&&(o.headers=this.extraHeaders),this.localAddress&&(o.localAddress=this.localAddress);try{this.ws=this.usingBrowserWebSocket&&!this.isReactNative?e?new p(t,e):new p(t):new p(t,e,o)}catch(i){return this.emit("error",i)}void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="nodebuffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}},u.prototype.addEventListeners=function(){var t=this;this.ws.onopen=function(){t.onOpen()},this.ws.onclose=function(){t.onClose()},this.ws.onmessage=function(e){t.onData(e.data)},this.ws.onerror=function(e){t.onError("websocket error",e)}},u.prototype.write=function(t){var e=this;this.writable=!1;for(var o=t.length,i=0,n=o;i<n;i++)!function(t){s.encodePacket(t,e.supportsBinary,(function(i){if(!e.usingBrowserWebSocket){var n={};t.options&&(n.compress=t.options.compress),e.perMessageDeflate&&("string"==typeof i?Buffer.byteLength(i):i.length)<e.perMessageDeflate.threshold&&(n.compress=!1)}try{e.usingBrowserWebSocket?e.ws.send(i):e.ws.send(i,n)}catch(h){l("websocket closed before onclose event")}--o||(e.emit("flush"),setTimeout((function(){e.writable=!0,e.emit("drain")}),0))}))}(t[i])},u.prototype.onClose=function(){r.prototype.onClose.call(this)},u.prototype.doClose=function(){void 0!==this.ws&&this.ws.close()},u.prototype.uri=function(){var t=this.query||{},e=this.secure?"wss":"ws",o="";return this.port&&("wss"===e&&443!==Number(this.port)||"ws"===e&&80!==Number(this.port))&&(o=":"+this.port),this.timestampRequests&&(t[this.timestampParam]=d()),this.supportsBinary||(t.b64=1),(t=a.encode(t)).length&&(t="?"+t),e+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+o+this.path+t},u.prototype.check=function(){return!(!p||"__initialize"in p&&this.name===u.prototype.name)}},CUlp:function(t,e,o){var i,n;"undefined"!=typeof window&&window,void 0===(n="function"==typeof(i=function(){"use strict";function t(){}var e=t.prototype;return e.on=function(t,e){if(t&&e){var o=this._events=this._events||{},i=o[t]=o[t]||[];return-1==i.indexOf(e)&&i.push(e),this}},e.once=function(t,e){if(t&&e){this.on(t,e);var o=this._onceEvents=this._onceEvents||{};return(o[t]=o[t]||{})[e]=!0,this}},e.off=function(t,e){var o=this._events&&this._events[t];if(o&&o.length){var i=o.indexOf(e);return-1!=i&&o.splice(i,1),this}},e.emitEvent=function(t,e){var o=this._events&&this._events[t];if(o&&o.length){o=o.slice(0),e=e||[];for(var i=this._onceEvents&&this._onceEvents[t],n=0;n<o.length;n++){var r=o[n];i&&i[r]&&(this.off(t,r),delete i[r]),r.apply(this,e)}return this}},e.allOff=function(){delete this._events,delete this._onceEvents},t})?i.call(e,o,e,t):i)||(t.exports=n)},CUme:function(t,e,o){var i=o("Gbct"),n=o("TypT"),r=o("Wm4p"),s=o("Yvos"),a=o("Aplp"),c=o("x7D4")("engine.io-client:polling");t.exports=l;var d=null!=new(o("AdPF"))({xdomain:!1}).responseType;function l(t){d&&!(t&&t.forceBase64)||(this.supportsBinary=!1),i.call(this,t)}s(l,i),l.prototype.name="polling",l.prototype.doOpen=function(){this.poll()},l.prototype.pause=function(t){var e=this;function o(){c("paused"),e.readyState="paused",t()}if(this.readyState="pausing",this.polling||!this.writable){var i=0;this.polling&&(c("we are currently polling - waiting to pause"),i++,this.once("pollComplete",(function(){c("pre-pause polling complete"),--i||o()}))),this.writable||(c("we are currently writing - waiting to pause"),i++,this.once("drain",(function(){c("pre-pause writing complete"),--i||o()})))}else o()},l.prototype.poll=function(){c("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},l.prototype.onData=function(t){var e=this;c("polling got data %s",t),r.decodePayload(t,this.socket.binaryType,(function(t,o,i){if("opening"===e.readyState&&e.onOpen(),"close"===t.type)return e.onClose(),!1;e.onPacket(t)})),"closed"!==this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"===this.readyState?this.poll():c('ignoring poll - transport state "%s"',this.readyState))},l.prototype.doClose=function(){var t=this;function e(){c("writing close packet"),t.write([{type:"close"}])}"open"===this.readyState?(c("transport open - closing"),e()):(c("transport not open - deferring close"),this.once("open",e))},l.prototype.write=function(t){var e=this;this.writable=!1;var o=function(){e.writable=!0,e.emit("drain")};r.encodePayload(t,this.supportsBinary,(function(t){e.doWrite(t,o)}))},l.prototype.uri=function(){var t=this.query||{},e=this.secure?"https":"http",o="";return!1!==this.timestampRequests&&(t[this.timestampParam]=a()),this.supportsBinary||t.sid||(t.b64=1),t=n.encode(t),this.port&&("https"===e&&443!==Number(this.port)||"http"===e&&80!==Number(this.port))&&(o=":"+this.port),t.length&&(t="?"+t),e+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+o+this.path+t}},Cl5A:function(t,e,o){var i=o("CUme"),n=o("Yvos"),r=o("2UHX");t.exports=l;var s,a=/\n/g,c=/\\n/g;function d(){}function l(t){i.call(this,t),this.query=this.query||{},s||(s=r.___eio=r.___eio||[]),this.index=s.length;var e=this;s.push((function(t){e.onData(t)})),this.query.j=this.index,"function"==typeof addEventListener&&addEventListener("beforeunload",(function(){e.script&&(e.script.onerror=d)}),!1)}n(l,i),l.prototype.supportsBinary=!1,l.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),i.prototype.doClose.call(this)},l.prototype.doPoll=function(){var t=this,e=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),e.async=!0,e.src=this.uri(),e.onerror=function(e){t.onError("jsonp poll error",e)};var o=document.getElementsByTagName("script")[0];o?o.parentNode.insertBefore(e,o):(document.head||document.body).appendChild(e),this.script=e,"undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent)&&setTimeout((function(){var t=document.createElement("iframe");document.body.appendChild(t),document.body.removeChild(t)}),100)},l.prototype.doWrite=function(t,e){var o=this;if(!this.form){var i,n=document.createElement("form"),r=document.createElement("textarea"),s=this.iframeId="eio_iframe_"+this.index;n.className="socketio",n.style.position="absolute",n.style.top="-1000px",n.style.left="-1000px",n.target=s,n.method="POST",n.setAttribute("accept-charset","utf-8"),r.name="d",n.appendChild(r),document.body.appendChild(n),this.form=n,this.area=r}function d(){l(),e()}function l(){if(o.iframe)try{o.form.removeChild(o.iframe)}catch(t){o.onError("jsonp polling iframe removal error",t)}try{i=document.createElement('<iframe src="javascript:0" name="'+o.iframeId+'">')}catch(t){(i=document.createElement("iframe")).name=o.iframeId,i.src="javascript:0"}i.id=o.iframeId,o.form.appendChild(i),o.iframe=i}this.form.action=this.uri(),l(),t=t.replace(c,"\\\n"),this.area.value=t.replace(a,"\\n");try{this.form.submit()}catch(p){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"===o.iframe.readyState&&d()}:this.iframe.onload=d}},FGiv:function(t,e){var o=1e3,i=6e4,n=60*i,r=24*n;function s(t,e,o){if(!(t<e))return t<1.5*e?Math.floor(t/e)+" "+o:Math.ceil(t/e)+" "+o+"s"}t.exports=function(t,e){e=e||{};var a,c=typeof t;if("string"===c&&t.length>0)return function(t){if(!((t=String(t)).length>100)){var e=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(t);if(e){var s=parseFloat(e[1]);switch((e[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*s;case"days":case"day":case"d":return s*r;case"hours":case"hour":case"hrs":case"hr":case"h":return s*n;case"minutes":case"minute":case"mins":case"min":case"m":return s*i;case"seconds":case"second":case"secs":case"sec":case"s":return s*o;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return s;default:return}}}}(t);if("number"===c&&!1===isNaN(t))return e.long?s(a=t,r,"day")||s(a,n,"hour")||s(a,i,"minute")||s(a,o,"second")||a+" ms":function(t){return t>=r?Math.round(t/r)+"d":t>=n?Math.round(t/n)+"h":t>=i?Math.round(t/i)+"m":t>=o?Math.round(t/o)+"s":t+"ms"}(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))}},FXYA:function(t,e,o){function i(t){var o;function i(){if(i.enabled){var t=i,n=+new Date,r=n-(o||n);t.diff=r,t.prev=o,t.curr=n,o=n;for(var s=new Array(arguments.length),a=0;a<s.length;a++)s[a]=arguments[a];s[0]=e.coerce(s[0]),"string"!=typeof s[0]&&s.unshift("%O");var c=0;s[0]=s[0].replace(/%([a-zA-Z%])/g,(function(o,i){if("%%"===o)return o;c++;var n=e.formatters[i];return"function"==typeof n&&(o=n.call(t,s[c]),s.splice(c,1),c--),o})),e.formatArgs.call(t,s);var d=i.log||e.log||console.log.bind(console);d.apply(t,s)}}return i.namespace=t,i.enabled=e.enabled(t),i.useColors=e.useColors(),i.color=function(t){var o,i=0;for(o in t)i=(i<<5)-i+t.charCodeAt(o),i|=0;return e.colors[Math.abs(i)%e.colors.length]}(t),i.destroy=n,"function"==typeof e.init&&e.init(i),e.instances.push(i),i}function n(){var t=e.instances.indexOf(this);return-1!==t&&(e.instances.splice(t,1),!0)}(e=t.exports=i.debug=i.default=i).coerce=function(t){return t instanceof Error?t.stack||t.message:t},e.disable=function(){e.enable("")},e.enable=function(t){var o;e.save(t),e.names=[],e.skips=[];var i=("string"==typeof t?t:"").split(/[\s,]+/),n=i.length;for(o=0;o<n;o++)i[o]&&("-"===(t=i[o].replace(/\*/g,".*?"))[0]?e.skips.push(new RegExp("^"+t.substr(1)+"$")):e.names.push(new RegExp("^"+t+"$")));for(o=0;o<e.instances.length;o++){var r=e.instances[o];r.enabled=e.enabled(r.namespace)}},e.enabled=function(t){if("*"===t[t.length-1])return!0;var o,i;for(o=0,i=e.skips.length;o<i;o++)if(e.skips[o].test(t))return!1;for(o=0,i=e.names.length;o<i;o++)if(e.names[o].test(t))return!0;return!1},e.humanize=o("FGiv"),e.instances=[],e.names=[],e.skips=[],e.formatters={}},Gbct:function(t,e,o){var i=o("Wm4p"),n=o("cpc2");function r(t){this.path=t.path,this.hostname=t.hostname,this.port=t.port,this.secure=t.secure,this.query=t.query,this.timestampParam=t.timestampParam,this.timestampRequests=t.timestampRequests,this.readyState="",this.agent=t.agent||!1,this.socket=t.socket,this.enablesXDR=t.enablesXDR,this.withCredentials=t.withCredentials,this.pfx=t.pfx,this.key=t.key,this.passphrase=t.passphrase,this.cert=t.cert,this.ca=t.ca,this.ciphers=t.ciphers,this.rejectUnauthorized=t.rejectUnauthorized,this.forceNode=t.forceNode,this.isReactNative=t.isReactNative,this.extraHeaders=t.extraHeaders,this.localAddress=t.localAddress}t.exports=r,n(r.prototype),r.prototype.onError=function(t,e){var o=new Error(t);return o.type="TransportError",o.description=e,this.emit("error",o),this},r.prototype.open=function(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this},r.prototype.close=function(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this},r.prototype.send=function(t){if("open"!==this.readyState)throw new Error("Transport not open");this.write(t)},r.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},r.prototype.onData=function(t){var e=i.decodePacket(t,this.socket.binaryType);this.onPacket(e)},r.prototype.onPacket=function(t){this.emit("packet",t)},r.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},Hy43:function(t,e,o){var i,n;!function(r,s){"use strict";i=[o("CUlp"),o("QK1G"),o("YVj6"),o("KK1e")],void 0===(n=(function(t,e,o,i){return function(t,e,o,i,n){var r=t.console,s=t.jQuery,a=function(){},c=0,d={};function l(t,e){var o=i.getQueryElement(t);if(o){this.element=o,s&&(this.$element=s(this.element)),this.options=i.extend({},this.constructor.defaults),this.option(e);var n=++c;this.element.outlayerGUID=n,d[n]=this,this._create(),this._getOption("initLayout")&&this.layout()}else r&&r.error("Bad element for "+this.constructor.namespace+": "+(o||t))}l.namespace="outlayer",l.Item=n,l.defaults={containerStyle:{position:"relative"},initLayout:!0,originLeft:!0,originTop:!0,resize:!0,resizeContainer:!0,transitionDuration:"0.4s",hiddenStyle:{opacity:0,transform:"scale(0.001)"},visibleStyle:{opacity:1,transform:"scale(1)"}};var p=l.prototype;function u(t){function e(){t.apply(this,arguments)}return(e.prototype=Object.create(t.prototype)).constructor=e,e}i.extend(p,e.prototype),p.option=function(t){i.extend(this.options,t)},p._getOption=function(t){var e=this.constructor.compatOptions[t];return e&&void 0!==this.options[e]?this.options[e]:this.options[t]},l.compatOptions={initLayout:"isInitLayout",horizontal:"isHorizontal",layoutInstant:"isLayoutInstant",originLeft:"isOriginLeft",originTop:"isOriginTop",resize:"isResizeBound",resizeContainer:"isResizingContainer"},p._create=function(){this.reloadItems(),this.stamps=[],this.stamp(this.options.stamp),i.extend(this.element.style,this.options.containerStyle),this._getOption("resize")&&this.bindResize()},p.reloadItems=function(){this.items=this._itemize(this.element.children)},p._itemize=function(t){for(var e=this._filterFindItemElements(t),o=this.constructor.Item,i=[],n=0;n<e.length;n++){var r=new o(e[n],this);i.push(r)}return i},p._filterFindItemElements=function(t){return i.filterFindElements(t,this.options.itemSelector)},p.getItemElements=function(){return this.items.map((function(t){return t.element}))},p.layout=function(){this._resetLayout(),this._manageStamps();var t=this._getOption("layoutInstant");this.layoutItems(this.items,void 0!==t?t:!this._isLayoutInited),this._isLayoutInited=!0},p._init=p.layout,p._resetLayout=function(){this.getSize()},p.getSize=function(){this.size=o(this.element)},p._getMeasurement=function(t,e){var i,n=this.options[t];n?("string"==typeof n?i=this.element.querySelector(n):n instanceof HTMLElement&&(i=n),this[t]=i?o(i)[e]:n):this[t]=0},p.layoutItems=function(t,e){t=this._getItemsForLayout(t),this._layoutItems(t,e),this._postLayout()},p._getItemsForLayout=function(t){return t.filter((function(t){return!t.isIgnored}))},p._layoutItems=function(t,e){if(this._emitCompleteOnItems("layout",t),t&&t.length){var o=[];t.forEach((function(t){var i=this._getItemLayoutPosition(t);i.item=t,i.isInstant=e||t.isLayoutInstant,o.push(i)}),this),this._processLayoutQueue(o)}},p._getItemLayoutPosition=function(){return{x:0,y:0}},p._processLayoutQueue=function(t){this.updateStagger(),t.forEach((function(t,e){this._positionItem(t.item,t.x,t.y,t.isInstant,e)}),this)},p.updateStagger=function(){var t=this.options.stagger;if(null!=t)return this.stagger=function(t){if("number"==typeof t)return t;var e=t.match(/(^\d*\.?\d*)(\w*)/),o=e&&e[1],i=e&&e[2];return o.length?(o=parseFloat(o))*(h[i]||1):0}(t),this.stagger;this.stagger=0},p._positionItem=function(t,e,o,i,n){i?t.goTo(e,o):(t.stagger(n*this.stagger),t.moveTo(e,o))},p._postLayout=function(){this.resizeContainer()},p.resizeContainer=function(){if(this._getOption("resizeContainer")){var t=this._getContainerSize();t&&(this._setContainerMeasure(t.width,!0),this._setContainerMeasure(t.height,!1))}},p._getContainerSize=a,p._setContainerMeasure=function(t,e){if(void 0!==t){var o=this.size;o.isBorderBox&&(t+=e?o.paddingLeft+o.paddingRight+o.borderLeftWidth+o.borderRightWidth:o.paddingBottom+o.paddingTop+o.borderTopWidth+o.borderBottomWidth),t=Math.max(t,0),this.element.style[e?"width":"height"]=t+"px"}},p._emitCompleteOnItems=function(t,e){var o=this;function i(){o.dispatchEvent(t+"Complete",null,[e])}var n=e.length;if(e&&n){var r=0;e.forEach((function(e){e.once(t,s)}))}else i();function s(){++r==n&&i()}},p.dispatchEvent=function(t,e,o){var i=e?[e].concat(o):o;if(this.emitEvent(t,i),s)if(this.$element=this.$element||s(this.element),e){var n=s.Event(e);n.type=t,this.$element.trigger(n,o)}else this.$element.trigger(t,o)},p.ignore=function(t){var e=this.getItem(t);e&&(e.isIgnored=!0)},p.unignore=function(t){var e=this.getItem(t);e&&delete e.isIgnored},p.stamp=function(t){(t=this._find(t))&&(this.stamps=this.stamps.concat(t),t.forEach(this.ignore,this))},p.unstamp=function(t){(t=this._find(t))&&t.forEach((function(t){i.removeFrom(this.stamps,t),this.unignore(t)}),this)},p._find=function(t){if(t)return"string"==typeof t&&(t=this.element.querySelectorAll(t)),i.makeArray(t)},p._manageStamps=function(){this.stamps&&this.stamps.length&&(this._getBoundingRect(),this.stamps.forEach(this._manageStamp,this))},p._getBoundingRect=function(){var t=this.element.getBoundingClientRect(),e=this.size;this._boundingRect={left:t.left+e.paddingLeft+e.borderLeftWidth,top:t.top+e.paddingTop+e.borderTopWidth,right:t.right-(e.paddingRight+e.borderRightWidth),bottom:t.bottom-(e.paddingBottom+e.borderBottomWidth)}},p._manageStamp=a,p._getElementOffset=function(t){var e=t.getBoundingClientRect(),i=this._boundingRect,n=o(t);return{left:e.left-i.left-n.marginLeft,top:e.top-i.top-n.marginTop,right:i.right-e.right-n.marginRight,bottom:i.bottom-e.bottom-n.marginBottom}},p.handleEvent=i.handleEvent,p.bindResize=function(){t.addEventListener("resize",this),this.isResizeBound=!0},p.unbindResize=function(){t.removeEventListener("resize",this),this.isResizeBound=!1},p.onresize=function(){this.resize()},i.debounceMethod(l,"onresize",100),p.resize=function(){this.isResizeBound&&this.needsResizeLayout()&&this.layout()},p.needsResizeLayout=function(){var t=o(this.element);return this.size&&t&&t.innerWidth!==this.size.innerWidth},p.addItems=function(t){var e=this._itemize(t);return e.length&&(this.items=this.items.concat(e)),e},p.appended=function(t){var e=this.addItems(t);e.length&&(this.layoutItems(e,!0),this.reveal(e))},p.prepended=function(t){var e=this._itemize(t);if(e.length){var o=this.items.slice(0);this.items=e.concat(o),this._resetLayout(),this._manageStamps(),this.layoutItems(e,!0),this.reveal(e),this.layoutItems(o)}},p.reveal=function(t){if(this._emitCompleteOnItems("reveal",t),t&&t.length){var e=this.updateStagger();t.forEach((function(t,o){t.stagger(o*e),t.reveal()}))}},p.hide=function(t){if(this._emitCompleteOnItems("hide",t),t&&t.length){var e=this.updateStagger();t.forEach((function(t,o){t.stagger(o*e),t.hide()}))}},p.revealItemElements=function(t){var e=this.getItems(t);this.reveal(e)},p.hideItemElements=function(t){var e=this.getItems(t);this.hide(e)},p.getItem=function(t){for(var e=0;e<this.items.length;e++){var o=this.items[e];if(o.element==t)return o}},p.getItems=function(t){t=i.makeArray(t);var e=[];return t.forEach((function(t){var o=this.getItem(t);o&&e.push(o)}),this),e},p.remove=function(t){var e=this.getItems(t);this._emitCompleteOnItems("remove",e),e&&e.length&&e.forEach((function(t){t.remove(),i.removeFrom(this.items,t)}),this)},p.destroy=function(){var t=this.element.style;t.height="",t.position="",t.width="",this.items.forEach((function(t){t.destroy()})),this.unbindResize(),delete d[this.element.outlayerGUID],delete this.element.outlayerGUID,s&&s.removeData(this.element,this.constructor.namespace)},l.data=function(t){var e=(t=i.getQueryElement(t))&&t.outlayerGUID;return e&&d[e]},l.create=function(t,e){var o=u(l);return o.defaults=i.extend({},l.defaults),i.extend(o.defaults,e),o.compatOptions=i.extend({},l.compatOptions),o.namespace=t,o.data=l.data,o.Item=u(n),i.htmlInit(o,t),s&&s.bridget&&s.bridget(t,o),o};var h={ms:1,s:1e3};return l.Item=n,l}(r,t,e,o,i)}).apply(e,i))||(t.exports=n)}(window)},IW2O:function(t,e,o){"use strict";var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=o("Y4kR"),r=o("cSoz");e.takeUntil=function(t){return function(e){return e.lift(new s(t))}};var s=function(){function t(t){this.notifier=t}return t.prototype.call=function(t,e){var o=new a(t),i=r.subscribeToResult(o,this.notifier);return i&&!o.seenValue?(o.add(i),e.subscribe(o)):o},t}(),a=function(t){function e(e){var o=t.call(this,e)||this;return o.seenValue=!1,o}return i(e,t),e.prototype.notifyNext=function(t,e,o,i,n){this.seenValue=!0,this.complete()},e.prototype.notifyComplete=function(){},e}(n.OuterSubscriber)},KFGy:function(t,e,o){var i=o("Uwu7"),n=o("2xqC"),r=o("kSER"),s=o("2Dig"),a=o("QN7Q"),c=o("x7D4")("socket.io-client:socket"),d=o("TypT"),l=o("WLGk");t.exports=h;var p={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},u=n.prototype.emit;function h(t,e,o){this.io=t,this.nsp=e,this.json=this,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,this.flags={},o&&o.query&&(this.query=o.query),this.io.autoConnect&&this.open()}n(h.prototype),h.prototype.subEvents=function(){if(!this.subs){var t=this.io;this.subs=[s(t,"open",a(this,"onopen")),s(t,"packet",a(this,"onpacket")),s(t,"close",a(this,"onclose"))]}},h.prototype.open=h.prototype.connect=function(){return this.connected||(this.subEvents(),this.io.open(),"open"===this.io.readyState&&this.onopen(),this.emit("connecting")),this},h.prototype.send=function(){var t=r(arguments);return t.unshift("message"),this.emit.apply(this,t),this},h.prototype.emit=function(t){if(p.hasOwnProperty(t))return u.apply(this,arguments),this;var e=r(arguments),o={type:(void 0!==this.flags.binary?this.flags.binary:l(e))?i.BINARY_EVENT:i.EVENT,data:e,options:{}};return o.options.compress=!this.flags||!1!==this.flags.compress,"function"==typeof e[e.length-1]&&(c("emitting packet with ack id %d",this.ids),this.acks[this.ids]=e.pop(),o.id=this.ids++),this.connected?this.packet(o):this.sendBuffer.push(o),this.flags={},this},h.prototype.packet=function(t){t.nsp=this.nsp,this.io.packet(t)},h.prototype.onopen=function(){if(c("transport is open - connecting"),"/"!==this.nsp)if(this.query){var t="object"==typeof this.query?d.encode(this.query):this.query;c("sending connect packet with query %s",t),this.packet({type:i.CONNECT,query:t})}else this.packet({type:i.CONNECT})},h.prototype.onclose=function(t){c("close (%s)",t),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",t)},h.prototype.onpacket=function(t){if(t.nsp===this.nsp||t.type===i.ERROR&&"/"===t.nsp)switch(t.type){case i.CONNECT:this.onconnect();break;case i.EVENT:case i.BINARY_EVENT:this.onevent(t);break;case i.ACK:case i.BINARY_ACK:this.onack(t);break;case i.DISCONNECT:this.ondisconnect();break;case i.ERROR:this.emit("error",t.data)}},h.prototype.onevent=function(t){var e=t.data||[];c("emitting event %j",e),null!=t.id&&(c("attaching ack callback to event"),e.push(this.ack(t.id))),this.connected?u.apply(this,e):this.receiveBuffer.push(e)},h.prototype.ack=function(t){var e=this,o=!1;return function(){if(!o){o=!0;var n=r(arguments);c("sending ack %j",n),e.packet({type:l(n)?i.BINARY_ACK:i.ACK,id:t,data:n})}}},h.prototype.onack=function(t){var e=this.acks[t.id];"function"==typeof e?(c("calling ack %s with %j",t.id,t.data),e.apply(this,t.data),delete this.acks[t.id]):c("bad ack %s",t.id)},h.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},h.prototype.emitBuffered=function(){var t;for(t=0;t<this.receiveBuffer.length;t++)u.apply(this,this.receiveBuffer[t]);for(this.receiveBuffer=[],t=0;t<this.sendBuffer.length;t++)this.packet(this.sendBuffer[t]);this.sendBuffer=[]},h.prototype.ondisconnect=function(){c("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},h.prototype.destroy=function(){if(this.subs){for(var t=0;t<this.subs.length;t++)this.subs[t].destroy();this.subs=null}this.io.destroy(this)},h.prototype.close=h.prototype.disconnect=function(){return this.connected&&(c("performing disconnect (%s)",this.nsp),this.packet({type:i.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},h.prototype.compress=function(t){return this.flags.compress=t,this},h.prototype.binary=function(t){return this.flags.binary=t,this}},KK1e:function(t,e,o){var i,n,r;window,n=[o("CUlp"),o("QK1G")],void 0===(r="function"==typeof(i=function(t,e){"use strict";var o=document.documentElement.style,i="string"==typeof o.transition?"transition":"WebkitTransition",n="string"==typeof o.transform?"transform":"WebkitTransform",r={WebkitTransition:"webkitTransitionEnd",transition:"transitionend"}[i],s={transform:n,transition:i,transitionDuration:i+"Duration",transitionProperty:i+"Property",transitionDelay:i+"Delay"};function a(t,e){t&&(this.element=t,this.layout=e,this.position={x:0,y:0},this._create())}var c=a.prototype=Object.create(t.prototype);c.constructor=a,c._create=function(){this._transn={ingProperties:{},clean:{},onEnd:{}},this.css({position:"absolute"})},c.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},c.getSize=function(){this.size=e(this.element)},c.css=function(t){var e=this.element.style;for(var o in t)e[s[o]||o]=t[o]},c.getPosition=function(){var t=getComputedStyle(this.element),e=this.layout._getOption("originLeft"),o=this.layout._getOption("originTop"),i=t[e?"left":"right"],n=t[o?"top":"bottom"],r=parseFloat(i),s=parseFloat(n),a=this.layout.size;-1!=i.indexOf("%")&&(r=r/100*a.width),-1!=n.indexOf("%")&&(s=s/100*a.height),r=isNaN(r)?0:r,s=isNaN(s)?0:s,s-=o?a.paddingTop:a.paddingBottom,this.position.x=r-=e?a.paddingLeft:a.paddingRight,this.position.y=s},c.layoutPosition=function(){var t=this.layout.size,e={},o=this.layout._getOption("originLeft"),i=this.layout._getOption("originTop"),n=o?"right":"left";e[o?"left":"right"]=this.getXValue(this.position.x+t[o?"paddingLeft":"paddingRight"]),e[n]="";var r=i?"bottom":"top";e[i?"top":"bottom"]=this.getYValue(this.position.y+t[i?"paddingTop":"paddingBottom"]),e[r]="",this.css(e),this.emitEvent("layout",[this])},c.getXValue=function(t){var e=this.layout._getOption("horizontal");return this.layout.options.percentPosition&&!e?t/this.layout.size.width*100+"%":t+"px"},c.getYValue=function(t){var e=this.layout._getOption("horizontal");return this.layout.options.percentPosition&&e?t/this.layout.size.height*100+"%":t+"px"},c._transitionTo=function(t,e){this.getPosition();var o=this.position.x,i=this.position.y,n=t==this.position.x&&e==this.position.y;if(this.setPosition(t,e),!n||this.isTransitioning){var r={};r.transform=this.getTranslate(t-o,e-i),this.transition({to:r,onTransitionEnd:{transform:this.layoutPosition},isCleaning:!0})}else this.layoutPosition()},c.getTranslate=function(t,e){return"translate3d("+(t=this.layout._getOption("originLeft")?t:-t)+"px, "+(e=this.layout._getOption("originTop")?e:-e)+"px, 0)"},c.goTo=function(t,e){this.setPosition(t,e),this.layoutPosition()},c.moveTo=c._transitionTo,c.setPosition=function(t,e){this.position.x=parseFloat(t),this.position.y=parseFloat(e)},c._nonTransition=function(t){for(var e in this.css(t.to),t.isCleaning&&this._removeStyles(t.to),t.onTransitionEnd)t.onTransitionEnd[e].call(this)},c.transition=function(t){if(parseFloat(this.layout.options.transitionDuration)){var e=this._transn;for(var o in t.onTransitionEnd)e.onEnd[o]=t.onTransitionEnd[o];for(o in t.to)e.ingProperties[o]=!0,t.isCleaning&&(e.clean[o]=!0);t.from&&this.css(t.from),this.enableTransition(t.to),this.css(t.to),this.isTransitioning=!0}else this._nonTransition(t)};var d="opacity,"+n.replace(/([A-Z])/g,(function(t){return"-"+t.toLowerCase()}));c.enableTransition=function(){if(!this.isTransitioning){var t=this.layout.options.transitionDuration;this.css({transitionProperty:d,transitionDuration:t="number"==typeof t?t+"ms":t,transitionDelay:this.staggerDelay||0}),this.element.addEventListener(r,this,!1)}},c.onwebkitTransitionEnd=function(t){this.ontransitionend(t)},c.onotransitionend=function(t){this.ontransitionend(t)};var l={"-webkit-transform":"transform"};c.ontransitionend=function(t){if(t.target===this.element){var e=this._transn,o=l[t.propertyName]||t.propertyName;delete e.ingProperties[o],function(t){for(var e in t)return!1;return!0}(e.ingProperties)&&this.disableTransition(),o in e.clean&&(this.element.style[t.propertyName]="",delete e.clean[o]),o in e.onEnd&&(e.onEnd[o].call(this),delete e.onEnd[o]),this.emitEvent("transitionEnd",[this])}},c.disableTransition=function(){this.removeTransitionStyles(),this.element.removeEventListener(r,this,!1),this.isTransitioning=!1},c._removeStyles=function(t){var e={};for(var o in t)e[o]="";this.css(e)};var p={transitionProperty:"",transitionDuration:"",transitionDelay:""};return c.removeTransitionStyles=function(){this.css(p)},c.stagger=function(t){t=isNaN(t)?0:t,this.staggerDelay=t+"ms"},c.removeElem=function(){this.element.parentNode.removeChild(this.element),this.css({display:""}),this.emitEvent("remove",[this])},c.remove=function(){i&&parseFloat(this.layout.options.transitionDuration)?(this.once("transitionEnd",(function(){this.removeElem()})),this.hide()):this.removeElem()},c.reveal=function(){delete this.isHidden,this.css({display:""});var t=this.layout.options,e={};e[this.getHideRevealTransitionEndProperty("visibleStyle")]=this.onRevealTransitionEnd,this.transition({from:t.hiddenStyle,to:t.visibleStyle,isCleaning:!0,onTransitionEnd:e})},c.onRevealTransitionEnd=function(){this.isHidden||this.emitEvent("reveal")},c.getHideRevealTransitionEndProperty=function(t){var e=this.layout.options[t];if(e.opacity)return"opacity";for(var o in e)return o},c.hide=function(){this.isHidden=!0,this.css({display:""});var t=this.layout.options,e={};e[this.getHideRevealTransitionEndProperty("hiddenStyle")]=this.onHideTransitionEnd,this.transition({from:t.visibleStyle,to:t.hiddenStyle,isCleaning:!0,onTransitionEnd:e})},c.onHideTransitionEnd=function(){this.isHidden&&(this.css({display:"none"}),this.emitEvent("hide"))},c.destroy=function(){this.css({position:"",left:"",right:"",top:"",bottom:"",transition:"",transform:""})},a})?i.apply(e,n):i)||(t.exports=r)},L8wN:function(t,e,o){t.exports=function(t){function e(t){let e=0;for(let o=0;o<t.length;o++)e=(e<<5)-e+t.charCodeAt(o),e|=0;return i.colors[Math.abs(e)%i.colors.length]}function i(t){let o;function s(...t){if(!s.enabled)return;const e=s,n=Number(new Date);e.diff=n-(o||n),e.prev=o,e.curr=n,o=n,t[0]=i.coerce(t[0]),"string"!=typeof t[0]&&t.unshift("%O");let r=0;t[0]=t[0].replace(/%([a-zA-Z%])/g,(o,n)=>{if("%%"===o)return o;r++;const s=i.formatters[n];return"function"==typeof s&&(o=s.call(e,t[r]),t.splice(r,1),r--),o}),i.formatArgs.call(e,t),(e.log||i.log).apply(e,t)}return s.namespace=t,s.enabled=i.enabled(t),s.useColors=i.useColors(),s.color=e(t),s.destroy=n,s.extend=r,"function"==typeof i.init&&i.init(s),i.instances.push(s),s}function n(){const t=i.instances.indexOf(this);return-1!==t&&(i.instances.splice(t,1),!0)}function r(t,e){const o=i(this.namespace+(void 0===e?":":e)+t);return o.log=this.log,o}function s(t){return t.toString().substring(2,t.toString().length-2).replace(/\.\*\?$/,"*")}return i.debug=i,i.default=i,i.coerce=function(t){return t instanceof Error?t.stack||t.message:t},i.disable=function(){const t=[...i.names.map(s),...i.skips.map(s).map(t=>"-"+t)].join(",");return i.enable(""),t},i.enable=function(t){let e;i.save(t),i.names=[],i.skips=[];const o=("string"==typeof t?t:"").split(/[\s,]+/),n=o.length;for(e=0;e<n;e++)o[e]&&("-"===(t=o[e].replace(/\*/g,".*?"))[0]?i.skips.push(new RegExp("^"+t.substr(1)+"$")):i.names.push(new RegExp("^"+t+"$")));for(e=0;e<i.instances.length;e++){const t=i.instances[e];t.enabled=i.enabled(t.namespace)}},i.enabled=function(t){if("*"===t[t.length-1])return!0;let e,o;for(e=0,o=i.skips.length;e<o;e++)if(i.skips[e].test(t))return!1;for(e=0,o=i.names.length;e<o;e++)if(i.names[e].test(t))return!0;return!1},i.humanize=o("5LH7"),Object.keys(t).forEach(e=>{i[e]=t[e]}),i.instances=[],i.names=[],i.skips=[],i.formatters={},i.selectColor=e,i.enable(i.load()),i}},Njrz:function(t,e,o){var i=o("6C75"),n=o("qGlh"),r=Object.prototype.toString,s="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===r.call(Blob),a="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===r.call(File);e.deconstructPacket=function(t){var e=[],o=t;return o.data=function t(e,o){if(!e)return e;if(n(e)){var r={_placeholder:!0,num:o.length};return o.push(e),r}if(i(e)){for(var s=new Array(e.length),a=0;a<e.length;a++)s[a]=t(e[a],o);return s}if("object"==typeof e&&!(e instanceof Date)){for(var c in s={},e)s[c]=t(e[c],o);return s}return e}(t.data,e),o.attachments=e.length,{packet:o,buffers:e}},e.reconstructPacket=function(t,e){return t.data=function t(e,o){if(!e)return e;if(e&&e._placeholder)return o[e.num];if(i(e))for(var n=0;n<e.length;n++)e[n]=t(e[n],o);else if("object"==typeof e)for(var r in e)e[r]=t(e[r],o);return e}(t.data,e),t.attachments=void 0,t},e.removeBlobs=function(t,e){var o=0,r=t;!function t(c,d,l){if(!c)return c;if(s&&c instanceof Blob||a&&c instanceof File){o++;var p=new FileReader;p.onload=function(){l?l[d]=this.result:r=this.result,--o||e(r)},p.readAsArrayBuffer(c)}else if(i(c))for(var u=0;u<c.length;u++)t(c[u],u,c);else if("object"==typeof c&&!n(c))for(var h in c)t(c[h],h,c)}(r),o||e(r)}},OAkW:function(t,e,o){"use strict";e.subscribeToArray=function(t){return function(e){for(var o=0,i=t.length;o<i&&!e.closed;o++)e.next(t[o]);e.complete()}}},QK1G:function(t,e,o){var i,n;window,void 0===(n="function"==typeof(i=function(){"use strict";function t(t){var e=parseFloat(t);return-1==t.indexOf("%")&&!isNaN(e)&&e}var e="undefined"==typeof console?function(){}:function(t){console.error(t)},o=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"],i=o.length;function n(t){var o=getComputedStyle(t);return o||e("Style returned "+o+". Are you running this code in a hidden iframe on Firefox? See https://bit.ly/getsizebug1"),o}var r,s=!1;return function e(a){if(function(){if(!s){s=!0;var o=document.createElement("div");o.style.width="200px",o.style.padding="1px 2px 3px 4px",o.style.borderStyle="solid",o.style.borderWidth="1px 2px 3px 4px",o.style.boxSizing="border-box";var i=document.body||document.documentElement;i.appendChild(o);var a=n(o);r=200==Math.round(t(a.width)),e.isBoxSizeOuter=r,i.removeChild(o)}}(),"string"==typeof a&&(a=document.querySelector(a)),a&&"object"==typeof a&&a.nodeType){var c=n(a);if("none"==c.display)return function(){for(var t={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},e=0;e<i;e++)t[o[e]]=0;return t}();var d={};d.width=a.offsetWidth,d.height=a.offsetHeight;for(var l=d.isBorderBox="border-box"==c.boxSizing,p=0;p<i;p++){var u=o[p],h=parseFloat(c[u]);d[u]=isNaN(h)?0:h}var f=d.paddingLeft+d.paddingRight,b=d.paddingTop+d.paddingBottom,m=d.marginLeft+d.marginRight,g=d.marginTop+d.marginBottom,v=d.borderLeftWidth+d.borderRightWidth,y=d.borderTopWidth+d.borderBottomWidth,S=l&&r,C=t(c.width);!1!==C&&(d.width=C+(S?0:f+v));var R=t(c.height);return!1!==R&&(d.height=R+(S?0:b+y)),d.innerWidth=d.width-(f+v),d.innerHeight=d.height-(b+y),d.outerWidth=d.width+m,d.outerHeight=d.height+g,d}}})?i.call(e,o,e,t):i)||(t.exports=n)},QN7Q:function(t,e){var o=[].slice;t.exports=function(t,e){if("string"==typeof e&&(e=t[e]),"function"!=typeof e)throw new Error("bind() requires a function");var i=o.call(arguments,2);return function(){return e.apply(t,i.concat(o.call(arguments)))}}},TypT:function(t,e){e.encode=function(t){var e="";for(var o in t)t.hasOwnProperty(o)&&(e.length&&(e+="&"),e+=encodeURIComponent(o)+"="+encodeURIComponent(t[o]));return e},e.decode=function(t){for(var e={},o=t.split("&"),i=0,n=o.length;i<n;i++){var r=o[i].split("=");e[decodeURIComponent(r[0])]=decodeURIComponent(r[1])}return e}},Uwu7:function(t,e,o){var i=o("0KJs")("socket.io-parser"),n=o("2xqC"),r=o("Njrz"),s=o("6C75"),a=o("qGlh");function c(){}e.protocol=4,e.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK"],e.CONNECT=0,e.DISCONNECT=1,e.EVENT=2,e.ACK=3,e.ERROR=4,e.BINARY_EVENT=5,e.BINARY_ACK=6,e.Encoder=c,e.Decoder=p;var d=e.ERROR+'"encode error"';function l(t){var o=""+t.type;if(e.BINARY_EVENT!==t.type&&e.BINARY_ACK!==t.type||(o+=t.attachments+"-"),t.nsp&&"/"!==t.nsp&&(o+=t.nsp+","),null!=t.id&&(o+=t.id),null!=t.data){var n=function(t){try{return JSON.stringify(t)}catch(e){return!1}}(t.data);if(!1===n)return d;o+=n}return i("encoded %j as %s",t,o),o}function p(){this.reconstructor=null}function u(t){this.reconPack=t,this.buffers=[]}function h(t){return{type:e.ERROR,data:"parser error: "+t}}c.prototype.encode=function(t,o){i("encoding packet %j",t),e.BINARY_EVENT===t.type||e.BINARY_ACK===t.type?function(t,e){r.removeBlobs(t,(function(t){var o=r.deconstructPacket(t),i=l(o.packet),n=o.buffers;n.unshift(i),e(n)}))}(t,o):o([l(t)])},n(p.prototype),p.prototype.add=function(t){var o;if("string"==typeof t)o=function(t){var o=0,n={type:Number(t.charAt(0))};if(null==e.types[n.type])return h("unknown packet type "+n.type);if(e.BINARY_EVENT===n.type||e.BINARY_ACK===n.type){for(var r="";"-"!==t.charAt(++o)&&(r+=t.charAt(o),o!=t.length););if(r!=Number(r)||"-"!==t.charAt(o))throw new Error("Illegal attachments");n.attachments=Number(r)}if("/"===t.charAt(o+1))for(n.nsp="";++o&&","!==(c=t.charAt(o))&&(n.nsp+=c,o!==t.length););else n.nsp="/";var a=t.charAt(o+1);if(""!==a&&Number(a)==a){for(n.id="";++o;){var c;if(null==(c=t.charAt(o))||Number(c)!=c){--o;break}if(n.id+=t.charAt(o),o===t.length)break}n.id=Number(n.id)}if(t.charAt(++o)){var d=function(t){try{return JSON.parse(t)}catch(e){return!1}}(t.substr(o));if(!1===d||n.type!==e.ERROR&&!s(d))return h("invalid payload");n.data=d}return i("decoded %s as %j",t,n),n}(t),e.BINARY_EVENT===o.type||e.BINARY_ACK===o.type?(this.reconstructor=new u(o),0===this.reconstructor.reconPack.attachments&&this.emit("decoded",o)):this.emit("decoded",o);else{if(!a(t)&&!t.base64)throw new Error("Unknown type: "+t);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(o=this.reconstructor.takeBinaryData(t))&&(this.reconstructor=null,this.emit("decoded",o))}},p.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},u.prototype.takeBinaryData=function(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){var e=r.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null},u.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}},Uxeu:function(t,e){var o=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,i=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];t.exports=function(t){var e=t,n=t.indexOf("["),r=t.indexOf("]");-1!=n&&-1!=r&&(t=t.substring(0,n)+t.substring(n,r).replace(/:/g,";")+t.substring(r,t.length));for(var s=o.exec(t||""),a={},c=14;c--;)a[i[c]]=s[c]||"";return-1!=n&&-1!=r&&(a.source=e,a.host=a.host.substring(1,a.host.length-1).replace(/;/g,":"),a.authority=a.authority.replace("[","").replace("]","").replace(/;/g,":"),a.ipv6uri=!0),a}},VKeD:function(t,e,o){"use strict";function i(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}e.getSymbolIterator=i,e.iterator=i(),e.$$iterator=e.iterator},Vi6O:function(t,e,o){"use strict";var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}();e.InnerSubscriber=function(t){function e(e,o,i){var n=t.call(this)||this;return n.parent=e,n.outerValue=o,n.outerIndex=i,n.index=0,n}return i(e,t),e.prototype._next=function(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)},e.prototype._error=function(t){this.parent.notifyError(t,this),this.unsubscribe()},e.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},e}(o("FWf1").Subscriber)},WLGk:function(t,e,o){var i=o("6C75"),n=Object.prototype.toString,r="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===n.call(Blob),s="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===n.call(File);t.exports=function t(e){if(!e||"object"!=typeof e)return!1;if(i(e)){for(var o=0,n=e.length;o<n;o++)if(t(e[o]))return!0;return!1}if("function"==typeof Buffer&&Buffer.isBuffer&&Buffer.isBuffer(e)||"function"==typeof ArrayBuffer&&e instanceof ArrayBuffer||r&&e instanceof Blob||s&&e instanceof File)return!0;if(e.toJSON&&"function"==typeof e.toJSON&&1===arguments.length)return t(e.toJSON(),!0);for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)&&t(e[a]))return!0;return!1}},Wm4p:function(t,e,o){var i,n=o("dkv/"),r=o("WLGk"),s=o("ypnn"),a=o("zMFY"),c=o("oIG/");"undefined"!=typeof ArrayBuffer&&(i=o("g5Dd"));var d="undefined"!=typeof navigator&&/Android/i.test(navigator.userAgent),l="undefined"!=typeof navigator&&/PhantomJS/i.test(navigator.userAgent),p=d||l;e.protocol=3;var u=e.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},h=n(u),f={type:"error",data:"parser error"},b=o("14A5");function m(t,e,o){for(var i=new Array(t.length),n=a(t.length,o),r=function(t,o,n){e(o,(function(e,o){i[t]=o,n(e,i)}))},s=0;s<t.length;s++)r(s,t[s],n)}e.encodePacket=function(t,o,i,n){"function"==typeof o&&(n=o,o=!1),"function"==typeof i&&(n=i,i=null);var r=void 0===t.data?void 0:t.data.buffer||t.data;if("undefined"!=typeof ArrayBuffer&&r instanceof ArrayBuffer)return function(t,o,i){if(!o)return e.encodeBase64Packet(t,i);var n=t.data,r=new Uint8Array(n),s=new Uint8Array(1+n.byteLength);s[0]=u[t.type];for(var a=0;a<r.length;a++)s[a+1]=r[a];return i(s.buffer)}(t,o,n);if(void 0!==b&&r instanceof b)return function(t,o,i){if(!o)return e.encodeBase64Packet(t,i);if(p)return function(t,o,i){if(!o)return e.encodeBase64Packet(t,i);var n=new FileReader;return n.onload=function(){e.encodePacket({type:t.type,data:n.result},o,!0,i)},n.readAsArrayBuffer(t.data)}(t,o,i);var n=new Uint8Array(1);return n[0]=u[t.type],i(new b([n.buffer,t.data]))}(t,o,n);if(r&&r.base64)return function(t,o){return o("b"+e.packets[t.type]+t.data.data)}(t,n);var s=u[t.type];return void 0!==t.data&&(s+=i?c.encode(String(t.data),{strict:!1}):String(t.data)),n(""+s)},e.encodeBase64Packet=function(t,o){var i,n="b"+e.packets[t.type];if(void 0!==b&&t.data instanceof b){var r=new FileReader;return r.onload=function(){var t=r.result.split(",")[1];o(n+t)},r.readAsDataURL(t.data)}try{i=String.fromCharCode.apply(null,new Uint8Array(t.data))}catch(d){for(var s=new Uint8Array(t.data),a=new Array(s.length),c=0;c<s.length;c++)a[c]=s[c];i=String.fromCharCode.apply(null,a)}return n+=btoa(i),o(n)},e.decodePacket=function(t,o,i){if(void 0===t)return f;if("string"==typeof t){if("b"===t.charAt(0))return e.decodeBase64Packet(t.substr(1),o);if(i&&!1===(t=function(t){try{t=c.decode(t,{strict:!1})}catch(e){return!1}return t}(t)))return f;var n=t.charAt(0);return Number(n)==n&&h[n]?t.length>1?{type:h[n],data:t.substring(1)}:{type:h[n]}:f}n=new Uint8Array(t)[0];var r=s(t,1);return b&&"blob"===o&&(r=new b([r])),{type:h[n],data:r}},e.decodeBase64Packet=function(t,e){var o=h[t.charAt(0)];if(!i)return{type:o,data:{base64:!0,data:t.substr(1)}};var n=i.decode(t.substr(1));return"blob"===e&&b&&(n=new b([n])),{type:o,data:n}},e.encodePayload=function(t,o,i){"function"==typeof o&&(i=o,o=null);var n=r(t);return o&&n?b&&!p?e.encodePayloadAsBlob(t,i):e.encodePayloadAsArrayBuffer(t,i):t.length?void m(t,(function(t,i){e.encodePacket(t,!!n&&o,!1,(function(t){i(null,function(t){return t.length+":"+t}(t))}))}),(function(t,e){return i(e.join(""))})):i("0:")},e.decodePayload=function(t,o,i){if("string"!=typeof t)return e.decodePayloadAsBinary(t,o,i);var n;if("function"==typeof o&&(i=o,o=null),""===t)return i(f,0,1);for(var r,s,a="",c=0,d=t.length;c<d;c++){var l=t.charAt(c);if(":"===l){if(""===a||a!=(r=Number(a)))return i(f,0,1);if(a!=(s=t.substr(c+1,r)).length)return i(f,0,1);if(s.length){if(n=e.decodePacket(s,o,!1),f.type===n.type&&f.data===n.data)return i(f,0,1);if(!1===i(n,c+r,d))return}c+=r,a=""}else a+=l}return""!==a?i(f,0,1):void 0},e.encodePayloadAsArrayBuffer=function(t,o){if(!t.length)return o(new ArrayBuffer(0));m(t,(function(t,o){e.encodePacket(t,!0,!0,(function(t){return o(null,t)}))}),(function(t,e){var i=e.reduce((function(t,e){var o;return t+(o="string"==typeof e?e.length:e.byteLength).toString().length+o+2}),0),n=new Uint8Array(i),r=0;return e.forEach((function(t){var e="string"==typeof t,o=t;if(e){for(var i=new Uint8Array(t.length),s=0;s<t.length;s++)i[s]=t.charCodeAt(s);o=i.buffer}n[r++]=e?0:1;var a=o.byteLength.toString();for(s=0;s<a.length;s++)n[r++]=parseInt(a[s]);for(n[r++]=255,i=new Uint8Array(o),s=0;s<i.length;s++)n[r++]=i[s]})),o(n.buffer)}))},e.encodePayloadAsBlob=function(t,o){m(t,(function(t,o){e.encodePacket(t,!0,!0,(function(t){var e=new Uint8Array(1);if(e[0]=1,"string"==typeof t){for(var i=new Uint8Array(t.length),n=0;n<t.length;n++)i[n]=t.charCodeAt(n);t=i.buffer,e[0]=0}var r=(t instanceof ArrayBuffer?t.byteLength:t.size).toString(),s=new Uint8Array(r.length+1);for(n=0;n<r.length;n++)s[n]=parseInt(r[n]);if(s[r.length]=255,b){var a=new b([e.buffer,s.buffer,t]);o(null,a)}}))}),(function(t,e){return o(new b(e))}))},e.decodePayloadAsBinary=function(t,o,i){"function"==typeof o&&(i=o,o=null);for(var n=t,r=[];n.byteLength>0;){for(var a=new Uint8Array(n),c=0===a[0],d="",l=1;255!==a[l];l++){if(d.length>310)return i(f,0,1);d+=a[l]}n=s(n,2+d.length),d=parseInt(d);var p=s(n,0,d);if(c)try{p=String.fromCharCode.apply(null,new Uint8Array(p))}catch(b){var u=new Uint8Array(p);for(p="",l=0;l<u.length;l++)p+=String.fromCharCode(u[l])}r.push(p),n=s(n,d)}var h=r.length;r.forEach((function(t,n){i(e.decodePacket(t,o,!0),n,h)}))}},Y4kR:function(t,e,o){"use strict";var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}();e.OuterSubscriber=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.notifyNext=function(t,e,o,i,n){this.destination.next(e)},e.prototype.notifyError=function(t,e){this.destination.error(t)},e.prototype.notifyComplete=function(t){this.destination.complete()},e}(o("FWf1").Subscriber)},YVj6:function(t,e,o){var i,n;!function(r,s){i=[o("x0Ue")],void 0===(n=(function(t){return function(t,e){"use strict";var o={extend:function(t,e){for(var o in e)t[o]=e[o];return t},modulo:function(t,e){return(t%e+e)%e}},i=Array.prototype.slice;o.makeArray=function(t){return Array.isArray(t)?t:null==t?[]:"object"==typeof t&&"number"==typeof t.length?i.call(t):[t]},o.removeFrom=function(t,e){var o=t.indexOf(e);-1!=o&&t.splice(o,1)},o.getParent=function(t,o){for(;t.parentNode&&t!=document.body;)if(e(t=t.parentNode,o))return t},o.getQueryElement=function(t){return"string"==typeof t?document.querySelector(t):t},o.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},o.filterFindElements=function(t,i){t=o.makeArray(t);var n=[];return t.forEach((function(t){if(t instanceof HTMLElement)if(i){e(t,i)&&n.push(t);for(var o=t.querySelectorAll(i),r=0;r<o.length;r++)n.push(o[r])}else n.push(t)})),n},o.debounceMethod=function(t,e,o){o=o||100;var i=t.prototype[e],n=e+"Timeout";t.prototype[e]=function(){var t=this[n];clearTimeout(t);var e=arguments,r=this;this[n]=setTimeout((function(){i.apply(r,e),delete r[n]}),o)}},o.docReady=function(t){var e=document.readyState;"complete"==e||"interactive"==e?setTimeout(t):document.addEventListener("DOMContentLoaded",t)},o.toDashed=function(t){return t.replace(/(.)([A-Z])/g,(function(t,e,o){return e+"-"+o})).toLowerCase()};var n=t.console;return o.htmlInit=function(e,i){o.docReady((function(){var r=o.toDashed(i),s="data-"+r,a=document.querySelectorAll("["+s+"]"),c=document.querySelectorAll(".js-"+r),d=o.makeArray(a).concat(o.makeArray(c)),l=s+"-options",p=t.jQuery;d.forEach((function(t){var o,r=t.getAttribute(s)||t.getAttribute(l);try{o=r&&JSON.parse(r)}catch(c){return void(n&&n.error("Error parsing "+s+" on "+t.className+": "+c))}var a=new e(t,o);p&&p.data(t,i,a)}))}))},o}(r,t)}).apply(e,i))||(t.exports=n)}(window)},Yvos:function(t,e){t.exports=function(t,e){var o=function(){};o.prototype=e.prototype,t.prototype=new o,t.prototype.constructor=t}},Z5tI:function(t,e,o){"use strict";var i=o("MkmW");e.subscribeToPromise=function(t){return function(e){return t.then((function(t){e.closed||(e.next(t),e.complete())}),(function(t){return e.error(t)})).then(null,i.hostReportError),e}}},akSB:function(t,e,o){var i=o("AdPF"),n=o("0z79"),r=o("Cl5A"),s=o("CIKq");e.polling=function(t){var e=!1,o=!1,s=!1!==t.jsonp;if("undefined"!=typeof location){var a="https:"===location.protocol,c=location.port;c||(c=a?443:80),e=t.hostname!==location.hostname||c!==t.port,o=t.secure!==a}if(t.xdomain=e,t.xscheme=o,"open"in new i(t)&&!t.forceJSONP)return new n(t);if(!s)throw new Error("JSONP disabled");return new r(t)},e.websocket=s},cSoz:function(t,e,o){"use strict";var i=o("Vi6O"),n=o("6qA3"),r=o("Q1FS");e.subscribeToResult=function(t,e,o,s,a){if(void 0===a&&(a=new i.InnerSubscriber(t,o,s)),!a.closed)return e instanceof r.Observable?e.subscribe(a):n.subscribeTo(e)(a)}},cpc2:function(t,e,o){function i(t){if(t)return function(t){for(var e in i.prototype)t[e]=i.prototype[e];return t}(t)}t.exports=i,i.prototype.on=i.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},i.prototype.once=function(t,e){function o(){this.off(t,o),e.apply(this,arguments)}return o.fn=e,this.on(t,o),this},i.prototype.off=i.prototype.removeListener=i.prototype.removeAllListeners=i.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var o,i=this._callbacks["$"+t];if(!i)return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(var n=0;n<i.length;n++)if((o=i[n])===e||o.fn===e){i.splice(n,1);break}return 0===i.length&&delete this._callbacks["$"+t],this},i.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),o=this._callbacks["$"+t],i=1;i<arguments.length;i++)e[i-1]=arguments[i];if(o){i=0;for(var n=(o=o.slice(0)).length;i<n;++i)o[i].apply(this,e)}return this},i.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},i.prototype.hasListeners=function(t){return!!this.listeners(t).length}},"dkv/":function(t,e){t.exports=Object.keys||function(t){var e=[],o=Object.prototype.hasOwnProperty;for(var i in t)o.call(t,i)&&e.push(i);return e}},eOtv:function(t,e,o){var i=o("lKxJ"),n=o("KFGy"),r=o("2xqC"),s=o("Uwu7"),a=o("2Dig"),c=o("QN7Q"),d=o("x7D4")("socket.io-client:manager"),l=o("7jRU"),p=o("C2QD"),u=Object.prototype.hasOwnProperty;function h(t,e){if(!(this instanceof h))return new h(t,e);t&&"object"==typeof t&&(e=t,t=void 0),(e=e||{}).path=e.path||"/socket.io",this.nsps={},this.subs=[],this.opts=e,this.reconnection(!1!==e.reconnection),this.reconnectionAttempts(e.reconnectionAttempts||1/0),this.reconnectionDelay(e.reconnectionDelay||1e3),this.reconnectionDelayMax(e.reconnectionDelayMax||5e3),this.randomizationFactor(e.randomizationFactor||.5),this.backoff=new p({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==e.timeout?2e4:e.timeout),this.readyState="closed",this.uri=t,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[];var o=e.parser||s;this.encoder=new o.Encoder,this.decoder=new o.Decoder,this.autoConnect=!1!==e.autoConnect,this.autoConnect&&this.open()}t.exports=h,h.prototype.emitAll=function(){for(var t in this.emit.apply(this,arguments),this.nsps)u.call(this.nsps,t)&&this.nsps[t].emit.apply(this.nsps[t],arguments)},h.prototype.updateSocketIds=function(){for(var t in this.nsps)u.call(this.nsps,t)&&(this.nsps[t].id=this.generateId(t))},h.prototype.generateId=function(t){return("/"===t?"":t+"#")+this.engine.id},r(h.prototype),h.prototype.reconnection=function(t){return arguments.length?(this._reconnection=!!t,this):this._reconnection},h.prototype.reconnectionAttempts=function(t){return arguments.length?(this._reconnectionAttempts=t,this):this._reconnectionAttempts},h.prototype.reconnectionDelay=function(t){return arguments.length?(this._reconnectionDelay=t,this.backoff&&this.backoff.setMin(t),this):this._reconnectionDelay},h.prototype.randomizationFactor=function(t){return arguments.length?(this._randomizationFactor=t,this.backoff&&this.backoff.setJitter(t),this):this._randomizationFactor},h.prototype.reconnectionDelayMax=function(t){return arguments.length?(this._reconnectionDelayMax=t,this.backoff&&this.backoff.setMax(t),this):this._reconnectionDelayMax},h.prototype.timeout=function(t){return arguments.length?(this._timeout=t,this):this._timeout},h.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},h.prototype.open=h.prototype.connect=function(t,e){if(d("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;d("opening %s",this.uri),this.engine=i(this.uri,this.opts);var o=this.engine,n=this;this.readyState="opening",this.skipReconnect=!1;var r=a(o,"open",(function(){n.onopen(),t&&t()})),s=a(o,"error",(function(e){if(d("connect_error"),n.cleanup(),n.readyState="closed",n.emitAll("connect_error",e),t){var o=new Error("Connection error");o.data=e,t(o)}else n.maybeReconnectOnOpen()}));if(!1!==this._timeout){var c=this._timeout;d("connect attempt will timeout after %d",c);var l=setTimeout((function(){d("connect attempt timed out after %d",c),r.destroy(),o.close(),o.emit("error","timeout"),n.emitAll("connect_timeout",c)}),c);this.subs.push({destroy:function(){clearTimeout(l)}})}return this.subs.push(r),this.subs.push(s),this},h.prototype.onopen=function(){d("open"),this.cleanup(),this.readyState="open",this.emit("open");var t=this.engine;this.subs.push(a(t,"data",c(this,"ondata"))),this.subs.push(a(t,"ping",c(this,"onping"))),this.subs.push(a(t,"pong",c(this,"onpong"))),this.subs.push(a(t,"error",c(this,"onerror"))),this.subs.push(a(t,"close",c(this,"onclose"))),this.subs.push(a(this.decoder,"decoded",c(this,"ondecoded")))},h.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")},h.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)},h.prototype.ondata=function(t){this.decoder.add(t)},h.prototype.ondecoded=function(t){this.emit("packet",t)},h.prototype.onerror=function(t){d("error",t),this.emitAll("error",t)},h.prototype.socket=function(t,e){var o=this.nsps[t];if(!o){o=new n(this,t,e),this.nsps[t]=o;var i=this;o.on("connecting",r),o.on("connect",(function(){o.id=i.generateId(t)})),this.autoConnect&&r()}function r(){~l(i.connecting,o)||i.connecting.push(o)}return o},h.prototype.destroy=function(t){var e=l(this.connecting,t);~e&&this.connecting.splice(e,1),this.connecting.length||this.close()},h.prototype.packet=function(t){d("writing packet %j",t);var e=this;t.query&&0===t.type&&(t.nsp+="?"+t.query),e.encoding?e.packetBuffer.push(t):(e.encoding=!0,this.encoder.encode(t,(function(o){for(var i=0;i<o.length;i++)e.engine.write(o[i],t.options);e.encoding=!1,e.processPacketQueue()})))},h.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var t=this.packetBuffer.shift();this.packet(t)}},h.prototype.cleanup=function(){d("cleanup");for(var t=this.subs.length,e=0;e<t;e++)this.subs.shift().destroy();this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()},h.prototype.close=h.prototype.disconnect=function(){d("disconnect"),this.skipReconnect=!0,this.reconnecting=!1,"opening"===this.readyState&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},h.prototype.onclose=function(t){d("onclose"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",t),this._reconnection&&!this.skipReconnect&&this.reconnect()},h.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var t=this;if(this.backoff.attempts>=this._reconnectionAttempts)d("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var e=this.backoff.duration();d("will wait %dms before reconnect attempt",e),this.reconnecting=!0;var o=setTimeout((function(){t.skipReconnect||(d("attempting reconnect"),t.emitAll("reconnect_attempt",t.backoff.attempts),t.emitAll("reconnecting",t.backoff.attempts),t.skipReconnect||t.open((function(e){e?(d("reconnect attempt error"),t.reconnecting=!1,t.reconnect(),t.emitAll("reconnect_error",e.data)):(d("reconnect success"),t.onreconnect())})))}),e);this.subs.push({destroy:function(){clearTimeout(o)}})}},h.prototype.onreconnect=function(){var t=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",t)}},g5Dd:function(t,e){!function(){"use strict";for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=new Uint8Array(256),i=0;i<t.length;i++)o[t.charCodeAt(i)]=i;e.encode=function(e){var o,i=new Uint8Array(e),n=i.length,r="";for(o=0;o<n;o+=3)r+=t[i[o]>>2],r+=t[(3&i[o])<<4|i[o+1]>>4],r+=t[(15&i[o+1])<<2|i[o+2]>>6],r+=t[63&i[o+2]];return n%3==2?r=r.substring(0,r.length-1)+"=":n%3==1&&(r=r.substring(0,r.length-2)+"=="),r},e.decode=function(t){var e,i,n,r,s,a=.75*t.length,c=t.length,d=0;"="===t[t.length-1]&&(a--,"="===t[t.length-2]&&a--);var l=new ArrayBuffer(a),p=new Uint8Array(l);for(e=0;e<c;e+=4)i=o[t.charCodeAt(e)],n=o[t.charCodeAt(e+1)],r=o[t.charCodeAt(e+2)],s=o[t.charCodeAt(e+3)],p[d++]=i<<2|n>>4,p[d++]=(15&n)<<4|r>>2,p[d++]=(3&r)<<6|63&s;return l}}()},gFX4:function(t,e,o){var i=o("zJ60"),n=o("Uwu7"),r=o("eOtv"),s=o("x7D4")("socket.io-client");t.exports=e=c;var a=e.managers={};function c(t,e){"object"==typeof t&&(e=t,t=void 0),e=e||{};var o,n=i(t),c=n.source,d=n.id;return e.forceNew||e["force new connection"]||!1===e.multiplex||a[d]&&n.path in a[d].nsps?(s("ignoring socket cache for %s",c),o=r(c,e)):(a[d]||(s("new io instance for %s",c),a[d]=r(c,e)),o=a[d]),n.query&&!e.query&&(e.query=n.query),o.socket(n.path,e)}e.protocol=n.protocol,e.connect=c,e.Manager=o("eOtv"),e.Socket=o("KFGy")},hNNL:function(t,e,o){var i,n,r;window,n=[o("Hy43"),o("QK1G")],void 0===(r="function"==typeof(i=function(t,e){"use strict";var o=t.create("masonry");o.compatOptions.fitWidth="isFitWidth";var i=o.prototype;return i._resetLayout=function(){this.getSize(),this._getMeasurement("columnWidth","outerWidth"),this._getMeasurement("gutter","outerWidth"),this.measureColumns(),this.colYs=[];for(var t=0;t<this.cols;t++)this.colYs.push(0);this.maxY=0,this.horizontalColIndex=0},i.measureColumns=function(){if(this.getContainerWidth(),!this.columnWidth){var t=this.items[0],o=t&&t.element;this.columnWidth=o&&e(o).outerWidth||this.containerWidth}var i=this.columnWidth+=this.gutter,n=this.containerWidth+this.gutter,r=n/i,s=i-n%i;r=Math[s&&s<1?"round":"floor"](r),this.cols=Math.max(r,1)},i.getContainerWidth=function(){var t=this._getOption("fitWidth"),o=e(t?this.element.parentNode:this.element);this.containerWidth=o&&o.innerWidth},i._getItemLayoutPosition=function(t){t.getSize();var e=t.size.outerWidth%this.columnWidth,o=Math[e&&e<1?"round":"ceil"](t.size.outerWidth/this.columnWidth);o=Math.min(o,this.cols);for(var i=this[this.options.horizontalOrder?"_getHorizontalColPosition":"_getTopColPosition"](o,t),n={x:this.columnWidth*i.col,y:i.y},r=i.y+t.size.outerHeight,s=o+i.col,a=i.col;a<s;a++)this.colYs[a]=r;return n},i._getTopColPosition=function(t){var e=this._getTopColGroup(t),o=Math.min.apply(Math,e);return{col:e.indexOf(o),y:o}},i._getTopColGroup=function(t){if(t<2)return this.colYs;for(var e=[],o=this.cols+1-t,i=0;i<o;i++)e[i]=this._getColGroupY(i,t);return e},i._getColGroupY=function(t,e){if(e<2)return this.colYs[t];var o=this.colYs.slice(t,t+e);return Math.max.apply(Math,o)},i._getHorizontalColPosition=function(t,e){var o=this.horizontalColIndex%this.cols;return o=t>1&&o+t>this.cols?0:o,this.horizontalColIndex=e.size.outerWidth&&e.size.outerHeight?o+t:this.horizontalColIndex,{col:o,y:this._getColGroupY(o,t)}},i._manageStamp=function(t){var o=e(t),i=this._getElementOffset(t),n=this._getOption("originLeft")?i.left:i.right,r=n+o.outerWidth,s=Math.floor(n/this.columnWidth);s=Math.max(0,s);var a=Math.floor(r/this.columnWidth);a-=r%this.columnWidth?0:1,a=Math.min(this.cols-1,a);for(var c=(this._getOption("originTop")?i.top:i.bottom)+o.outerHeight,d=s;d<=a;d++)this.colYs[d]=Math.max(c,this.colYs[d])},i._getContainerSize=function(){this.maxY=Math.max.apply(Math,this.colYs);var t={height:this.maxY};return this._getOption("fitWidth")&&(t.width=this._getContainerFitWidth()),t},i._getContainerFitWidth=function(){for(var t=0,e=this.cols;--e&&0===this.colYs[e];)t++;return(this.cols-t)*this.columnWidth-this.gutter},i.needsResizeLayout=function(){var t=this.containerWidth;return this.getContainerWidth(),t!=this.containerWidth},o})?i.apply(e,n):i)||(t.exports=r)},kSER:function(t,e){t.exports=function(t,e){for(var o=[],i=(e=e||0)||0;i<t.length;i++)o[i-e]=t[i];return o}},lKxJ:function(t,e,o){t.exports=o("2pII"),t.exports.parser=o("Wm4p")},"oIG/":function(t,e){var o,i,n,r=String.fromCharCode;function s(t){for(var e,o,i=[],n=0,r=t.length;n<r;)(e=t.charCodeAt(n++))>=55296&&e<=56319&&n<r?56320==(64512&(o=t.charCodeAt(n++)))?i.push(((1023&e)<<10)+(1023&o)+65536):(i.push(e),n--):i.push(e);return i}function a(t,e){if(t>=55296&&t<=57343){if(e)throw Error("Lone surrogate U+"+t.toString(16).toUpperCase()+" is not a scalar value");return!1}return!0}function c(t,e){return r(t>>e&63|128)}function d(t,e){if(0==(4294967168&t))return r(t);var o="";return 0==(4294965248&t)?o=r(t>>6&31|192):0==(4294901760&t)?(a(t,e)||(t=65533),o=r(t>>12&15|224),o+=c(t,6)):0==(4292870144&t)&&(o=r(t>>18&7|240),o+=c(t,12),o+=c(t,6)),o+r(63&t|128)}function l(){if(n>=i)throw Error("Invalid byte index");var t=255&o[n];if(n++,128==(192&t))return 63&t;throw Error("Invalid continuation byte")}function p(t){var e,r;if(n>i)throw Error("Invalid byte index");if(n==i)return!1;if(e=255&o[n],n++,0==(128&e))return e;if(192==(224&e)){if((r=(31&e)<<6|l())>=128)return r;throw Error("Invalid continuation byte")}if(224==(240&e)){if((r=(15&e)<<12|l()<<6|l())>=2048)return a(r,t)?r:65533;throw Error("Invalid continuation byte")}if(240==(248&e)&&(r=(7&e)<<18|l()<<12|l()<<6|l())>=65536&&r<=1114111)return r;throw Error("Invalid UTF-8 detected")}t.exports={version:"2.1.2",encode:function(t,e){for(var o=!1!==(e=e||{}).strict,i=s(t),n=i.length,r=-1,a="";++r<n;)a+=d(i[r],o);return a},decode:function(t,e){var a=!1!==(e=e||{}).strict;o=s(t),i=o.length,n=0;for(var c,d=[];!1!==(c=p(a));)d.push(c);return function(t){for(var e,o=t.length,i=-1,n="";++i<o;)(e=t[i])>65535&&(n+=r((e-=65536)>>>10&1023|55296),e=56320|1023&e),n+=r(e);return n}(d)}}},ozli:function(t,e,o){"use strict";var i=o("zfKp");e.subscribeToObservable=function(t){return function(e){var o=t[i.observable]();if("function"!=typeof o.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return o.subscribe(e)}}},poJ0:function(t,e,o){"use strict";var i=o("VKeD");e.subscribeToIterable=function(t){return function(e){for(var o=t[i.iterator]();;){var n=o.next();if(n.done){e.complete();break}if(e.next(n.value),e.closed)break}return"function"==typeof o.return&&e.add((function(){o.return&&o.return()})),e}}},qGlh:function(t,e){t.exports=function(t){return o&&Buffer.isBuffer(t)||i&&(t instanceof ArrayBuffer||function(t){return"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer}(t))};var o="function"==typeof Buffer&&"function"==typeof Buffer.isBuffer,i="function"==typeof ArrayBuffer},vX6Q:function(t,e,o){var i,n;!function(r,s){"use strict";i=[o("CUlp")],void 0===(n=(function(t){return function(t,e){var o=t.jQuery,i=t.console;function n(t,e){for(var o in e)t[o]=e[o];return t}var r=Array.prototype.slice;function s(t,e,a){if(!(this instanceof s))return new s(t,e,a);var c,d=t;"string"==typeof t&&(d=document.querySelectorAll(t)),d?(this.elements=(c=d,Array.isArray(c)?c:"object"==typeof c&&"number"==typeof c.length?r.call(c):[c]),this.options=n({},this.options),"function"==typeof e?a=e:n(this.options,e),a&&this.on("always",a),this.getImages(),o&&(this.jqDeferred=new o.Deferred),setTimeout(this.check.bind(this))):i.error("Bad element for imagesLoaded "+(d||t))}(s.prototype=Object.create(e.prototype)).options={},s.prototype.getImages=function(){this.images=[],this.elements.forEach(this.addElementImages,this)},s.prototype.addElementImages=function(t){"IMG"==t.nodeName&&this.addImage(t),!0===this.options.background&&this.addElementBackgroundImages(t);var e=t.nodeType;if(e&&a[e]){for(var o=t.querySelectorAll("img"),i=0;i<o.length;i++)this.addImage(o[i]);if("string"==typeof this.options.background){var n=t.querySelectorAll(this.options.background);for(i=0;i<n.length;i++)this.addElementBackgroundImages(n[i])}}};var a={1:!0,9:!0,11:!0};function c(t){this.img=t}function d(t,e){this.url=t,this.element=e,this.img=new Image}return s.prototype.addElementBackgroundImages=function(t){var e=getComputedStyle(t);if(e)for(var o=/url\((['"])?(.*?)\1\)/gi,i=o.exec(e.backgroundImage);null!==i;){var n=i&&i[2];n&&this.addBackground(n,t),i=o.exec(e.backgroundImage)}},s.prototype.addImage=function(t){var e=new c(t);this.images.push(e)},s.prototype.addBackground=function(t,e){var o=new d(t,e);this.images.push(o)},s.prototype.check=function(){var t=this;function e(e,o,i){setTimeout((function(){t.progress(e,o,i)}))}this.progressedCount=0,this.hasAnyBroken=!1,this.images.length?this.images.forEach((function(t){t.once("progress",e),t.check()})):this.complete()},s.prototype.progress=function(t,e,o){this.progressedCount++,this.hasAnyBroken=this.hasAnyBroken||!t.isLoaded,this.emitEvent("progress",[this,t,e]),this.jqDeferred&&this.jqDeferred.notify&&this.jqDeferred.notify(this,t),this.progressedCount==this.images.length&&this.complete(),this.options.debug&&i&&i.log("progress: "+o,t,e)},s.prototype.complete=function(){var t=this.hasAnyBroken?"fail":"done";this.isComplete=!0,this.emitEvent(t,[this]),this.emitEvent("always",[this]),this.jqDeferred&&this.jqDeferred[this.hasAnyBroken?"reject":"resolve"](this)},(c.prototype=Object.create(e.prototype)).check=function(){this.getIsImageComplete()?this.confirm(0!==this.img.naturalWidth,"naturalWidth"):(this.proxyImage=new Image,this.proxyImage.addEventListener("load",this),this.proxyImage.addEventListener("error",this),this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.proxyImage.src=this.img.src)},c.prototype.getIsImageComplete=function(){return this.img.complete&&this.img.naturalWidth},c.prototype.confirm=function(t,e){this.isLoaded=t,this.emitEvent("progress",[this,this.img,e])},c.prototype.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},c.prototype.onload=function(){this.confirm(!0,"onload"),this.unbindEvents()},c.prototype.onerror=function(){this.confirm(!1,"onerror"),this.unbindEvents()},c.prototype.unbindEvents=function(){this.proxyImage.removeEventListener("load",this),this.proxyImage.removeEventListener("error",this),this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},(d.prototype=Object.create(c.prototype)).check=function(){this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.img.src=this.url,this.getIsImageComplete()&&(this.confirm(0!==this.img.naturalWidth,"naturalWidth"),this.unbindEvents())},d.prototype.unbindEvents=function(){this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},d.prototype.confirm=function(t,e){this.isLoaded=t,this.emitEvent("progress",[this,this.element,e])},s.makeJQueryPlugin=function(e){(e=e||t.jQuery)&&((o=e).fn.imagesLoaded=function(t,e){return new s(this,t,e).jqDeferred.promise(o(this))})},s.makeJQueryPlugin(),s}(r,t)}).apply(e,i))||(t.exports=n)}("undefined"!=typeof window?window:this)},x0Ue:function(t,e,o){var i,n;!function(r,s){"use strict";void 0===(n="function"==typeof(i=s)?i.call(e,o,e,t):i)||(t.exports=n)}(window,(function(){"use strict";var t=function(){var t=window.Element.prototype;if(t.matches)return"matches";if(t.matchesSelector)return"matchesSelector";for(var e=["webkit","moz","ms","o"],o=0;o<e.length;o++){var i=e[o]+"MatchesSelector";if(t[i])return i}}();return function(e,o){return e[t](o)}}))},x7D4:function(t,e,o){e.log=function(...t){return"object"==typeof console&&console.log&&console.log(...t)},e.formatArgs=function(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const o="color: "+this.color;e.splice(1,0,o,"color: inherit");let i=0,n=0;e[0].replace(/%[a-zA-Z%]/g,t=>{"%%"!==t&&(i++,"%c"===t&&(n=i))}),e.splice(n,0,o)},e.save=function(t){try{t?e.storage.setItem("debug",t):e.storage.removeItem("debug")}catch(o){}},e.load=function(){let t;try{t=e.storage.getItem("debug")}catch(o){}return!t&&"undefined"!=typeof process&&"env"in process&&(t=process.env.DEBUG),t},e.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},e.storage=function(){try{return localStorage}catch(t){}}(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.exports=o("L8wN")(e);const{formatters:i}=t.exports;i.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},yRPT:function(t,e,o){"use strict";e.isArrayLike=function(t){return t&&"number"==typeof t.length&&"function"!=typeof t}},yeub:function(t,e){try{t.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(o){t.exports=!1}},ypnn:function(t,e){t.exports=function(t,e,o){var i=t.byteLength;if(e=e||0,o=o||i,t.slice)return t.slice(e,o);if(e<0&&(e+=i),o<0&&(o+=i),o>i&&(o=i),e>=i||e>=o||0===i)return new ArrayBuffer(0);for(var n=new Uint8Array(t),r=new Uint8Array(o-e),s=e,a=0;s<o;s++,a++)r[a]=n[s];return r.buffer}},zJ60:function(t,e,o){var i=o("Uxeu"),n=o("x7D4")("socket.io-client:url");t.exports=function(t,e){var o=t;e=e||"undefined"!=typeof location&&location,null==t&&(t=e.protocol+"//"+e.host),"string"==typeof t&&("/"===t.charAt(0)&&(t="/"===t.charAt(1)?e.protocol+t:e.host+t),/^(https?|wss?):\/\//.test(t)||(n("protocol-less url %s",t),t=void 0!==e?e.protocol+"//"+t:"https://"+t),n("parse %s",t),o=i(t)),o.port||(/^(http|ws)$/.test(o.protocol)?o.port="80":/^(http|ws)s$/.test(o.protocol)&&(o.port="443")),o.path=o.path||"/";var r=-1!==o.host.indexOf(":")?"["+o.host+"]":o.host;return o.id=o.protocol+"://"+r+":"+o.port,o.href=o.protocol+"://"+r+(e&&e.port===o.port?"":":"+o.port),o}},zMFY:function(t,e){function o(){}t.exports=function(t,e,i){var n=!1;return i=i||o,r.count=t,0===t?e():r;function r(t,o){if(r.count<=0)throw new Error("after called too many times");--r.count,t?(n=!0,e(t),e=i):0!==r.count||n||e(null,o)}}}}]);